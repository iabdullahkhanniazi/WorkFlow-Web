(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var Yt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function eT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Pv={exports:{}},_u={},xv={exports:{}},Ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var na=Symbol.for("react.element"),tT=Symbol.for("react.portal"),nT=Symbol.for("react.fragment"),rT=Symbol.for("react.strict_mode"),iT=Symbol.for("react.profiler"),oT=Symbol.for("react.provider"),sT=Symbol.for("react.context"),aT=Symbol.for("react.forward_ref"),lT=Symbol.for("react.suspense"),uT=Symbol.for("react.memo"),cT=Symbol.for("react.lazy"),km=Symbol.iterator;function fT(t){return t===null||typeof t!="object"?null:(t=km&&t[km]||t["@@iterator"],typeof t=="function"?t:null)}var Ov={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Rv=Object.assign,Nv={};function _o(t,e,n){this.props=t,this.context=e,this.refs=Nv,this.updater=n||Ov}_o.prototype.isReactComponent={};_o.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};_o.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Cv(){}Cv.prototype=_o.prototype;function Fh(t,e,n){this.props=t,this.context=e,this.refs=Nv,this.updater=n||Ov}var Uh=Fh.prototype=new Cv;Uh.constructor=Fh;Rv(Uh,_o.prototype);Uh.isPureReactComponent=!0;var Pm=Array.isArray,Dv=Object.prototype.hasOwnProperty,Bh={current:null},Lv={key:!0,ref:!0,__self:!0,__source:!0};function Mv(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)Dv.call(e,r)&&!Lv.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:na,type:t,key:o,ref:s,props:i,_owner:Bh.current}}function hT(t,e){return{$$typeof:na,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function qh(t){return typeof t=="object"&&t!==null&&t.$$typeof===na}function dT(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var xm=/\/+/g;function Ic(t,e){return typeof t=="object"&&t!==null&&t.key!=null?dT(""+t.key):e.toString(36)}function cl(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case na:case tT:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+Ic(s,0):r,Pm(i)?(n="",t!=null&&(n=t.replace(xm,"$&/")+"/"),cl(i,e,n,"",function(c){return c})):i!=null&&(qh(i)&&(i=hT(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(xm,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",Pm(t))for(var a=0;a<t.length;a++){o=t[a];var l=r+Ic(o,a);s+=cl(o,e,n,l,i)}else if(l=fT(t),typeof l=="function")for(t=l.call(t),a=0;!(o=t.next()).done;)o=o.value,l=r+Ic(o,a++),s+=cl(o,e,n,l,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function Va(t,e,n){if(t==null)return t;var r=[],i=0;return cl(t,r,"","",function(o){return e.call(n,o,i++)}),r}function pT(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Vt={current:null},fl={transition:null},mT={ReactCurrentDispatcher:Vt,ReactCurrentBatchConfig:fl,ReactCurrentOwner:Bh};function jv(){throw Error("act(...) is not supported in production builds of React.")}Ae.Children={map:Va,forEach:function(t,e,n){Va(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Va(t,function(){e++}),e},toArray:function(t){return Va(t,function(e){return e})||[]},only:function(t){if(!qh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ae.Component=_o;Ae.Fragment=nT;Ae.Profiler=iT;Ae.PureComponent=Fh;Ae.StrictMode=rT;Ae.Suspense=lT;Ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mT;Ae.act=jv;Ae.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Rv({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=Bh.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Dv.call(e,l)&&!Lv.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:na,type:t.type,key:i,ref:o,props:r,_owner:s}};Ae.createContext=function(t){return t={$$typeof:sT,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:oT,_context:t},t.Consumer=t};Ae.createElement=Mv;Ae.createFactory=function(t){var e=Mv.bind(null,t);return e.type=t,e};Ae.createRef=function(){return{current:null}};Ae.forwardRef=function(t){return{$$typeof:aT,render:t}};Ae.isValidElement=qh;Ae.lazy=function(t){return{$$typeof:cT,_payload:{_status:-1,_result:t},_init:pT}};Ae.memo=function(t,e){return{$$typeof:uT,type:t,compare:e===void 0?null:e}};Ae.startTransition=function(t){var e=fl.transition;fl.transition={};try{t()}finally{fl.transition=e}};Ae.unstable_act=jv;Ae.useCallback=function(t,e){return Vt.current.useCallback(t,e)};Ae.useContext=function(t){return Vt.current.useContext(t)};Ae.useDebugValue=function(){};Ae.useDeferredValue=function(t){return Vt.current.useDeferredValue(t)};Ae.useEffect=function(t,e){return Vt.current.useEffect(t,e)};Ae.useId=function(){return Vt.current.useId()};Ae.useImperativeHandle=function(t,e,n){return Vt.current.useImperativeHandle(t,e,n)};Ae.useInsertionEffect=function(t,e){return Vt.current.useInsertionEffect(t,e)};Ae.useLayoutEffect=function(t,e){return Vt.current.useLayoutEffect(t,e)};Ae.useMemo=function(t,e){return Vt.current.useMemo(t,e)};Ae.useReducer=function(t,e,n){return Vt.current.useReducer(t,e,n)};Ae.useRef=function(t){return Vt.current.useRef(t)};Ae.useState=function(t){return Vt.current.useState(t)};Ae.useSyncExternalStore=function(t,e,n){return Vt.current.useSyncExternalStore(t,e,n)};Ae.useTransition=function(){return Vt.current.useTransition()};Ae.version="18.3.1";xv.exports=Ae;var de=xv.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gT=de,yT=Symbol.for("react.element"),vT=Symbol.for("react.fragment"),_T=Object.prototype.hasOwnProperty,ET=gT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,wT={key:!0,ref:!0,__self:!0,__source:!0};function Vv(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)_T.call(e,r)&&!wT.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:yT,type:t,key:o,ref:s,props:i,_owner:ET.current}}_u.Fragment=vT;_u.jsx=Vv;_u.jsxs=Vv;Pv.exports=_u;var F=Pv.exports,Fv={exports:{}},tn={},Uv={exports:{}},Bv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(G,q){var V=G.length;G.push(q);e:for(;0<V;){var C=V-1>>>1,M=G[C];if(0<i(M,q))G[C]=q,G[V]=M,V=C;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var q=G[0],V=G.pop();if(V!==q){G[0]=V;e:for(var C=0,M=G.length,U=M>>>1;C<U;){var K=2*(C+1)-1,z=G[K],j=K+1,$=G[j];if(0>i(z,V))j<M&&0>i($,z)?(G[C]=$,G[j]=V,C=j):(G[C]=z,G[K]=V,C=K);else if(j<M&&0>i($,V))G[C]=$,G[j]=V,C=j;else break e}}return q}function i(G,q){var V=G.sortIndex-q.sortIndex;return V!==0?V:G.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var l=[],c=[],d=1,h=null,f=3,m=!1,w=!1,_=!1,E=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(G){for(var q=n(c);q!==null;){if(q.callback===null)r(c);else if(q.startTime<=G)r(c),q.sortIndex=q.expirationTime,e(l,q);else break;q=n(c)}}function y(G){if(_=!1,v(G),!w)if(n(l)!==null)w=!0,H(k);else{var q=n(c);q!==null&&W(y,q.startTime-G)}}function k(G,q){w=!1,_&&(_=!1,g(T),T=-1),m=!0;var V=f;try{for(v(q),h=n(l);h!==null&&(!(h.expirationTime>q)||G&&!I());){var C=h.callback;if(typeof C=="function"){h.callback=null,f=h.priorityLevel;var M=C(h.expirationTime<=q);q=t.unstable_now(),typeof M=="function"?h.callback=M:h===n(l)&&r(l),v(q)}else r(l);h=n(l)}if(h!==null)var U=!0;else{var K=n(c);K!==null&&W(y,K.startTime-q),U=!1}return U}finally{h=null,f=V,m=!1}}var N=!1,S=null,T=-1,P=5,b=-1;function I(){return!(t.unstable_now()-b<P)}function x(){if(S!==null){var G=t.unstable_now();b=G;var q=!0;try{q=S(!0,G)}finally{q?O():(N=!1,S=null)}}else N=!1}var O;if(typeof p=="function")O=function(){p(x)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,B=L.port2;L.port1.onmessage=x,O=function(){B.postMessage(null)}}else O=function(){E(x,0)};function H(G){S=G,N||(N=!0,O())}function W(G,q){T=E(function(){G(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){w||m||(w=!0,H(k))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(G){switch(f){case 1:case 2:case 3:var q=3;break;default:q=f}var V=f;f=q;try{return G()}finally{f=V}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,q){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var V=f;f=G;try{return q()}finally{f=V}},t.unstable_scheduleCallback=function(G,q,V){var C=t.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?C+V:C):V=C,G){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=V+M,G={id:d++,callback:q,priorityLevel:G,startTime:V,expirationTime:M,sortIndex:-1},V>C?(G.sortIndex=V,e(c,G),n(l)===null&&G===n(c)&&(_?(g(T),T=-1):_=!0,W(y,V-C))):(G.sortIndex=M,e(l,G),w||m||(w=!0,H(k))),G},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(G){var q=f;return function(){var V=f;f=q;try{return G.apply(this,arguments)}finally{f=V}}}})(Bv);Uv.exports=Bv;var TT=Uv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bT=de,en=TT;function se(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var qv=new Set,Ps={};function vi(t,e){no(t,e),no(t+"Capture",e)}function no(t,e){for(Ps[t]=e,t=0;t<e.length;t++)qv.add(e[t])}var Wn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),mf=Object.prototype.hasOwnProperty,IT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Om={},Rm={};function AT(t){return mf.call(Rm,t)?!0:mf.call(Om,t)?!1:IT.test(t)?Rm[t]=!0:(Om[t]=!0,!1)}function ST(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function kT(t,e,n,r){if(e===null||typeof e>"u"||ST(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ft(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var Tt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Tt[t]=new Ft(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Tt[e]=new Ft(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Tt[t]=new Ft(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Tt[t]=new Ft(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Tt[t]=new Ft(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Tt[t]=new Ft(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Tt[t]=new Ft(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Tt[t]=new Ft(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Tt[t]=new Ft(t,5,!1,t.toLowerCase(),null,!1,!1)});var $h=/[\-:]([a-z])/g;function zh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace($h,zh);Tt[e]=new Ft(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace($h,zh);Tt[e]=new Ft(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace($h,zh);Tt[e]=new Ft(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Tt[t]=new Ft(t,1,!1,t.toLowerCase(),null,!1,!1)});Tt.xlinkHref=new Ft("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Tt[t]=new Ft(t,1,!1,t.toLowerCase(),null,!0,!0)});function Hh(t,e,n,r){var i=Tt.hasOwnProperty(e)?Tt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(kT(e,n,i,r)&&(n=null),r||i===null?AT(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var er=bT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Fa=Symbol.for("react.element"),Ri=Symbol.for("react.portal"),Ni=Symbol.for("react.fragment"),Wh=Symbol.for("react.strict_mode"),gf=Symbol.for("react.profiler"),$v=Symbol.for("react.provider"),zv=Symbol.for("react.context"),Kh=Symbol.for("react.forward_ref"),yf=Symbol.for("react.suspense"),vf=Symbol.for("react.suspense_list"),Gh=Symbol.for("react.memo"),ur=Symbol.for("react.lazy"),Hv=Symbol.for("react.offscreen"),Nm=Symbol.iterator;function Ko(t){return t===null||typeof t!="object"?null:(t=Nm&&t[Nm]||t["@@iterator"],typeof t=="function"?t:null)}var Ye=Object.assign,Ac;function is(t){if(Ac===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ac=e&&e[1]||""}return`
`+Ac+t}var Sc=!1;function kc(t,e){if(!t||Sc)return"";Sc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var l=`
`+i[s].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=s&&0<=a);break}}}finally{Sc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?is(t):""}function PT(t){switch(t.tag){case 5:return is(t.type);case 16:return is("Lazy");case 13:return is("Suspense");case 19:return is("SuspenseList");case 0:case 2:case 15:return t=kc(t.type,!1),t;case 11:return t=kc(t.type.render,!1),t;case 1:return t=kc(t.type,!0),t;default:return""}}function _f(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ni:return"Fragment";case Ri:return"Portal";case gf:return"Profiler";case Wh:return"StrictMode";case yf:return"Suspense";case vf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case zv:return(t.displayName||"Context")+".Consumer";case $v:return(t._context.displayName||"Context")+".Provider";case Kh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Gh:return e=t.displayName||null,e!==null?e:_f(t.type)||"Memo";case ur:e=t._payload,t=t._init;try{return _f(t(e))}catch{}}return null}function xT(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _f(e);case 8:return e===Wh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Cr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Wv(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function OT(t){var e=Wv(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ua(t){t._valueTracker||(t._valueTracker=OT(t))}function Kv(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Wv(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Rl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ef(t,e){var n=e.checked;return Ye({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Cm(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Cr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Gv(t,e){e=e.checked,e!=null&&Hh(t,"checked",e,!1)}function wf(t,e){Gv(t,e);var n=Cr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Tf(t,e.type,n):e.hasOwnProperty("defaultValue")&&Tf(t,e.type,Cr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Dm(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Tf(t,e,n){(e!=="number"||Rl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var os=Array.isArray;function Hi(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Cr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function bf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(se(91));return Ye({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Lm(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(se(92));if(os(n)){if(1<n.length)throw Error(se(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Cr(n)}}function Qv(t,e){var n=Cr(e.value),r=Cr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Mm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Yv(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function If(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Yv(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ba,Xv=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ba=Ba||document.createElement("div"),Ba.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ba.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function xs(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ps={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},RT=["Webkit","ms","Moz","O"];Object.keys(ps).forEach(function(t){RT.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ps[e]=ps[t]})});function Jv(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ps.hasOwnProperty(t)&&ps[t]?(""+e).trim():e+"px"}function Zv(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Jv(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var NT=Ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Af(t,e){if(e){if(NT[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(se(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(se(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(se(61))}if(e.style!=null&&typeof e.style!="object")throw Error(se(62))}}function Sf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kf=null;function Qh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Pf=null,Wi=null,Ki=null;function jm(t){if(t=oa(t)){if(typeof Pf!="function")throw Error(se(280));var e=t.stateNode;e&&(e=Iu(e),Pf(t.stateNode,t.type,e))}}function e_(t){Wi?Ki?Ki.push(t):Ki=[t]:Wi=t}function t_(){if(Wi){var t=Wi,e=Ki;if(Ki=Wi=null,jm(t),e)for(t=0;t<e.length;t++)jm(e[t])}}function n_(t,e){return t(e)}function r_(){}var Pc=!1;function i_(t,e,n){if(Pc)return t(e,n);Pc=!0;try{return n_(t,e,n)}finally{Pc=!1,(Wi!==null||Ki!==null)&&(r_(),t_())}}function Os(t,e){var n=t.stateNode;if(n===null)return null;var r=Iu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(se(231,e,typeof n));return n}var xf=!1;if(Wn)try{var Go={};Object.defineProperty(Go,"passive",{get:function(){xf=!0}}),window.addEventListener("test",Go,Go),window.removeEventListener("test",Go,Go)}catch{xf=!1}function CT(t,e,n,r,i,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var ms=!1,Nl=null,Cl=!1,Of=null,DT={onError:function(t){ms=!0,Nl=t}};function LT(t,e,n,r,i,o,s,a,l){ms=!1,Nl=null,CT.apply(DT,arguments)}function MT(t,e,n,r,i,o,s,a,l){if(LT.apply(this,arguments),ms){if(ms){var c=Nl;ms=!1,Nl=null}else throw Error(se(198));Cl||(Cl=!0,Of=c)}}function _i(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function o_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Vm(t){if(_i(t)!==t)throw Error(se(188))}function jT(t){var e=t.alternate;if(!e){if(e=_i(t),e===null)throw Error(se(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Vm(i),t;if(o===r)return Vm(i),e;o=o.sibling}throw Error(se(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s)throw Error(se(189))}}if(n.alternate!==r)throw Error(se(190))}if(n.tag!==3)throw Error(se(188));return n.stateNode.current===n?t:e}function s_(t){return t=jT(t),t!==null?a_(t):null}function a_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=a_(t);if(e!==null)return e;t=t.sibling}return null}var l_=en.unstable_scheduleCallback,Fm=en.unstable_cancelCallback,VT=en.unstable_shouldYield,FT=en.unstable_requestPaint,it=en.unstable_now,UT=en.unstable_getCurrentPriorityLevel,Yh=en.unstable_ImmediatePriority,u_=en.unstable_UserBlockingPriority,Dl=en.unstable_NormalPriority,BT=en.unstable_LowPriority,c_=en.unstable_IdlePriority,Eu=null,Pn=null;function qT(t){if(Pn&&typeof Pn.onCommitFiberRoot=="function")try{Pn.onCommitFiberRoot(Eu,t,void 0,(t.current.flags&128)===128)}catch{}}var gn=Math.clz32?Math.clz32:HT,$T=Math.log,zT=Math.LN2;function HT(t){return t>>>=0,t===0?32:31-($T(t)/zT|0)|0}var qa=64,$a=4194304;function ss(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ll(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var a=s&~i;a!==0?r=ss(a):(o&=s,o!==0&&(r=ss(o)))}else s=n&~i,s!==0?r=ss(s):o!==0&&(r=ss(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-gn(e),i=1<<n,r|=t[n],e&=~i;return r}function WT(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function KT(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-gn(o),a=1<<s,l=i[s];l===-1?(!(a&n)||a&r)&&(i[s]=WT(a,e)):l<=e&&(t.expiredLanes|=a),o&=~a}}function Rf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function f_(){var t=qa;return qa<<=1,!(qa&4194240)&&(qa=64),t}function xc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ra(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-gn(e),t[e]=n}function GT(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-gn(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function Xh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-gn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var De=0;function h_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var d_,Jh,p_,m_,g_,Nf=!1,za=[],Er=null,wr=null,Tr=null,Rs=new Map,Ns=new Map,fr=[],QT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Um(t,e){switch(t){case"focusin":case"focusout":Er=null;break;case"dragenter":case"dragleave":wr=null;break;case"mouseover":case"mouseout":Tr=null;break;case"pointerover":case"pointerout":Rs.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ns.delete(e.pointerId)}}function Qo(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=oa(e),e!==null&&Jh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function YT(t,e,n,r,i){switch(e){case"focusin":return Er=Qo(Er,t,e,n,r,i),!0;case"dragenter":return wr=Qo(wr,t,e,n,r,i),!0;case"mouseover":return Tr=Qo(Tr,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Rs.set(o,Qo(Rs.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Ns.set(o,Qo(Ns.get(o)||null,t,e,n,r,i)),!0}return!1}function y_(t){var e=ei(t.target);if(e!==null){var n=_i(e);if(n!==null){if(e=n.tag,e===13){if(e=o_(n),e!==null){t.blockedOn=e,g_(t.priority,function(){p_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function hl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Cf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);kf=r,n.target.dispatchEvent(r),kf=null}else return e=oa(n),e!==null&&Jh(e),t.blockedOn=n,!1;e.shift()}return!0}function Bm(t,e,n){hl(t)&&n.delete(e)}function XT(){Nf=!1,Er!==null&&hl(Er)&&(Er=null),wr!==null&&hl(wr)&&(wr=null),Tr!==null&&hl(Tr)&&(Tr=null),Rs.forEach(Bm),Ns.forEach(Bm)}function Yo(t,e){t.blockedOn===e&&(t.blockedOn=null,Nf||(Nf=!0,en.unstable_scheduleCallback(en.unstable_NormalPriority,XT)))}function Cs(t){function e(i){return Yo(i,t)}if(0<za.length){Yo(za[0],t);for(var n=1;n<za.length;n++){var r=za[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Er!==null&&Yo(Er,t),wr!==null&&Yo(wr,t),Tr!==null&&Yo(Tr,t),Rs.forEach(e),Ns.forEach(e),n=0;n<fr.length;n++)r=fr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<fr.length&&(n=fr[0],n.blockedOn===null);)y_(n),n.blockedOn===null&&fr.shift()}var Gi=er.ReactCurrentBatchConfig,Ml=!0;function JT(t,e,n,r){var i=De,o=Gi.transition;Gi.transition=null;try{De=1,Zh(t,e,n,r)}finally{De=i,Gi.transition=o}}function ZT(t,e,n,r){var i=De,o=Gi.transition;Gi.transition=null;try{De=4,Zh(t,e,n,r)}finally{De=i,Gi.transition=o}}function Zh(t,e,n,r){if(Ml){var i=Cf(t,e,n,r);if(i===null)Fc(t,e,r,jl,n),Um(t,r);else if(YT(i,t,e,n,r))r.stopPropagation();else if(Um(t,r),e&4&&-1<QT.indexOf(t)){for(;i!==null;){var o=oa(i);if(o!==null&&d_(o),o=Cf(t,e,n,r),o===null&&Fc(t,e,r,jl,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else Fc(t,e,r,null,n)}}var jl=null;function Cf(t,e,n,r){if(jl=null,t=Qh(r),t=ei(t),t!==null)if(e=_i(t),e===null)t=null;else if(n=e.tag,n===13){if(t=o_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return jl=t,null}function v_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(UT()){case Yh:return 1;case u_:return 4;case Dl:case BT:return 16;case c_:return 536870912;default:return 16}default:return 16}}var yr=null,ed=null,dl=null;function __(){if(dl)return dl;var t,e=ed,n=e.length,r,i="value"in yr?yr.value:yr.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return dl=i.slice(t,1<r?1-r:void 0)}function pl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ha(){return!0}function qm(){return!1}function nn(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Ha:qm,this.isPropagationStopped=qm,this}return Ye(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ha)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ha)},persist:function(){},isPersistent:Ha}),e}var Eo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=nn(Eo),ia=Ye({},Eo,{view:0,detail:0}),eb=nn(ia),Oc,Rc,Xo,wu=Ye({},ia,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Xo&&(Xo&&t.type==="mousemove"?(Oc=t.screenX-Xo.screenX,Rc=t.screenY-Xo.screenY):Rc=Oc=0,Xo=t),Oc)},movementY:function(t){return"movementY"in t?t.movementY:Rc}}),$m=nn(wu),tb=Ye({},wu,{dataTransfer:0}),nb=nn(tb),rb=Ye({},ia,{relatedTarget:0}),Nc=nn(rb),ib=Ye({},Eo,{animationName:0,elapsedTime:0,pseudoElement:0}),ob=nn(ib),sb=Ye({},Eo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ab=nn(sb),lb=Ye({},Eo,{data:0}),zm=nn(lb),ub={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hb(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=fb[t])?!!e[t]:!1}function nd(){return hb}var db=Ye({},ia,{key:function(t){if(t.key){var e=ub[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=pl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?cb[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nd,charCode:function(t){return t.type==="keypress"?pl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?pl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),pb=nn(db),mb=Ye({},wu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hm=nn(mb),gb=Ye({},ia,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nd}),yb=nn(gb),vb=Ye({},Eo,{propertyName:0,elapsedTime:0,pseudoElement:0}),_b=nn(vb),Eb=Ye({},wu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),wb=nn(Eb),Tb=[9,13,27,32],rd=Wn&&"CompositionEvent"in window,gs=null;Wn&&"documentMode"in document&&(gs=document.documentMode);var bb=Wn&&"TextEvent"in window&&!gs,E_=Wn&&(!rd||gs&&8<gs&&11>=gs),Wm=" ",Km=!1;function w_(t,e){switch(t){case"keyup":return Tb.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function T_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ci=!1;function Ib(t,e){switch(t){case"compositionend":return T_(e);case"keypress":return e.which!==32?null:(Km=!0,Wm);case"textInput":return t=e.data,t===Wm&&Km?null:t;default:return null}}function Ab(t,e){if(Ci)return t==="compositionend"||!rd&&w_(t,e)?(t=__(),dl=ed=yr=null,Ci=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return E_&&e.locale!=="ko"?null:e.data;default:return null}}var Sb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Sb[t.type]:e==="textarea"}function b_(t,e,n,r){e_(r),e=Vl(e,"onChange"),0<e.length&&(n=new td("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ys=null,Ds=null;function kb(t){D_(t,0)}function Tu(t){var e=Mi(t);if(Kv(e))return t}function Pb(t,e){if(t==="change")return e}var I_=!1;if(Wn){var Cc;if(Wn){var Dc="oninput"in document;if(!Dc){var Qm=document.createElement("div");Qm.setAttribute("oninput","return;"),Dc=typeof Qm.oninput=="function"}Cc=Dc}else Cc=!1;I_=Cc&&(!document.documentMode||9<document.documentMode)}function Ym(){ys&&(ys.detachEvent("onpropertychange",A_),Ds=ys=null)}function A_(t){if(t.propertyName==="value"&&Tu(Ds)){var e=[];b_(e,Ds,t,Qh(t)),i_(kb,e)}}function xb(t,e,n){t==="focusin"?(Ym(),ys=e,Ds=n,ys.attachEvent("onpropertychange",A_)):t==="focusout"&&Ym()}function Ob(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Tu(Ds)}function Rb(t,e){if(t==="click")return Tu(e)}function Nb(t,e){if(t==="input"||t==="change")return Tu(e)}function Cb(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var _n=typeof Object.is=="function"?Object.is:Cb;function Ls(t,e){if(_n(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!mf.call(e,i)||!_n(t[i],e[i]))return!1}return!0}function Xm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Jm(t,e){var n=Xm(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Xm(n)}}function S_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?S_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function k_(){for(var t=window,e=Rl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Rl(t.document)}return e}function id(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Db(t){var e=k_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&S_(n.ownerDocument.documentElement,n)){if(r!==null&&id(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=Jm(n,o);var s=Jm(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Lb=Wn&&"documentMode"in document&&11>=document.documentMode,Di=null,Df=null,vs=null,Lf=!1;function Zm(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Lf||Di==null||Di!==Rl(r)||(r=Di,"selectionStart"in r&&id(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),vs&&Ls(vs,r)||(vs=r,r=Vl(Df,"onSelect"),0<r.length&&(e=new td("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Di)))}function Wa(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Li={animationend:Wa("Animation","AnimationEnd"),animationiteration:Wa("Animation","AnimationIteration"),animationstart:Wa("Animation","AnimationStart"),transitionend:Wa("Transition","TransitionEnd")},Lc={},P_={};Wn&&(P_=document.createElement("div").style,"AnimationEvent"in window||(delete Li.animationend.animation,delete Li.animationiteration.animation,delete Li.animationstart.animation),"TransitionEvent"in window||delete Li.transitionend.transition);function bu(t){if(Lc[t])return Lc[t];if(!Li[t])return t;var e=Li[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in P_)return Lc[t]=e[n];return t}var x_=bu("animationend"),O_=bu("animationiteration"),R_=bu("animationstart"),N_=bu("transitionend"),C_=new Map,eg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fr(t,e){C_.set(t,e),vi(e,[t])}for(var Mc=0;Mc<eg.length;Mc++){var jc=eg[Mc],Mb=jc.toLowerCase(),jb=jc[0].toUpperCase()+jc.slice(1);Fr(Mb,"on"+jb)}Fr(x_,"onAnimationEnd");Fr(O_,"onAnimationIteration");Fr(R_,"onAnimationStart");Fr("dblclick","onDoubleClick");Fr("focusin","onFocus");Fr("focusout","onBlur");Fr(N_,"onTransitionEnd");no("onMouseEnter",["mouseout","mouseover"]);no("onMouseLeave",["mouseout","mouseover"]);no("onPointerEnter",["pointerout","pointerover"]);no("onPointerLeave",["pointerout","pointerover"]);vi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));vi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));vi("onBeforeInput",["compositionend","keypress","textInput","paste"]);vi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));vi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));vi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var as="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Vb=new Set("cancel close invalid load scroll toggle".split(" ").concat(as));function tg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,MT(r,e,void 0,t),t.currentTarget=null}function D_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;tg(i,a,c),o=l}else for(s=0;s<r.length;s++){if(a=r[s],l=a.instance,c=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;tg(i,a,c),o=l}}}if(Cl)throw t=Of,Cl=!1,Of=null,t}function qe(t,e){var n=e[Uf];n===void 0&&(n=e[Uf]=new Set);var r=t+"__bubble";n.has(r)||(L_(e,t,2,!1),n.add(r))}function Vc(t,e,n){var r=0;e&&(r|=4),L_(n,t,r,e)}var Ka="_reactListening"+Math.random().toString(36).slice(2);function Ms(t){if(!t[Ka]){t[Ka]=!0,qv.forEach(function(n){n!=="selectionchange"&&(Vb.has(n)||Vc(n,!1,t),Vc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ka]||(e[Ka]=!0,Vc("selectionchange",!1,e))}}function L_(t,e,n,r){switch(v_(e)){case 1:var i=JT;break;case 4:i=ZT;break;default:i=Zh}n=i.bind(null,e,n,t),i=void 0,!xf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Fc(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;a!==null;){if(s=ei(a),s===null)return;if(l=s.tag,l===5||l===6){r=o=s;continue e}a=a.parentNode}}r=r.return}i_(function(){var c=o,d=Qh(n),h=[];e:{var f=C_.get(t);if(f!==void 0){var m=td,w=t;switch(t){case"keypress":if(pl(n)===0)break e;case"keydown":case"keyup":m=pb;break;case"focusin":w="focus",m=Nc;break;case"focusout":w="blur",m=Nc;break;case"beforeblur":case"afterblur":m=Nc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=$m;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=nb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=yb;break;case x_:case O_:case R_:m=ob;break;case N_:m=_b;break;case"scroll":m=eb;break;case"wheel":m=wb;break;case"copy":case"cut":case"paste":m=ab;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Hm}var _=(e&4)!==0,E=!_&&t==="scroll",g=_?f!==null?f+"Capture":null:f;_=[];for(var p=c,v;p!==null;){v=p;var y=v.stateNode;if(v.tag===5&&y!==null&&(v=y,g!==null&&(y=Os(p,g),y!=null&&_.push(js(p,y,v)))),E)break;p=p.return}0<_.length&&(f=new m(f,w,null,n,d),h.push({event:f,listeners:_}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&n!==kf&&(w=n.relatedTarget||n.fromElement)&&(ei(w)||w[Kn]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(w=n.relatedTarget||n.toElement,m=c,w=w?ei(w):null,w!==null&&(E=_i(w),w!==E||w.tag!==5&&w.tag!==6)&&(w=null)):(m=null,w=c),m!==w)){if(_=$m,y="onMouseLeave",g="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(_=Hm,y="onPointerLeave",g="onPointerEnter",p="pointer"),E=m==null?f:Mi(m),v=w==null?f:Mi(w),f=new _(y,p+"leave",m,n,d),f.target=E,f.relatedTarget=v,y=null,ei(d)===c&&(_=new _(g,p+"enter",w,n,d),_.target=v,_.relatedTarget=E,y=_),E=y,m&&w)t:{for(_=m,g=w,p=0,v=_;v;v=ki(v))p++;for(v=0,y=g;y;y=ki(y))v++;for(;0<p-v;)_=ki(_),p--;for(;0<v-p;)g=ki(g),v--;for(;p--;){if(_===g||g!==null&&_===g.alternate)break t;_=ki(_),g=ki(g)}_=null}else _=null;m!==null&&ng(h,f,m,_,!1),w!==null&&E!==null&&ng(h,E,w,_,!0)}}e:{if(f=c?Mi(c):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var k=Pb;else if(Gm(f))if(I_)k=Nb;else{k=Ob;var N=xb}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(k=Rb);if(k&&(k=k(t,c))){b_(h,k,n,d);break e}N&&N(t,f,c),t==="focusout"&&(N=f._wrapperState)&&N.controlled&&f.type==="number"&&Tf(f,"number",f.value)}switch(N=c?Mi(c):window,t){case"focusin":(Gm(N)||N.contentEditable==="true")&&(Di=N,Df=c,vs=null);break;case"focusout":vs=Df=Di=null;break;case"mousedown":Lf=!0;break;case"contextmenu":case"mouseup":case"dragend":Lf=!1,Zm(h,n,d);break;case"selectionchange":if(Lb)break;case"keydown":case"keyup":Zm(h,n,d)}var S;if(rd)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Ci?w_(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(E_&&n.locale!=="ko"&&(Ci||T!=="onCompositionStart"?T==="onCompositionEnd"&&Ci&&(S=__()):(yr=d,ed="value"in yr?yr.value:yr.textContent,Ci=!0)),N=Vl(c,T),0<N.length&&(T=new zm(T,t,null,n,d),h.push({event:T,listeners:N}),S?T.data=S:(S=T_(n),S!==null&&(T.data=S)))),(S=bb?Ib(t,n):Ab(t,n))&&(c=Vl(c,"onBeforeInput"),0<c.length&&(d=new zm("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=S))}D_(h,e)})}function js(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Vl(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Os(t,n),o!=null&&r.unshift(js(t,o,i)),o=Os(t,e),o!=null&&r.push(js(t,o,i))),t=t.return}return r}function ki(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ng(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Os(n,o),l!=null&&s.unshift(js(n,l,a))):i||(l=Os(n,o),l!=null&&s.push(js(n,l,a)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var Fb=/\r\n?/g,Ub=/\u0000|\uFFFD/g;function rg(t){return(typeof t=="string"?t:""+t).replace(Fb,`
`).replace(Ub,"")}function Ga(t,e,n){if(e=rg(e),rg(t)!==e&&n)throw Error(se(425))}function Fl(){}var Mf=null,jf=null;function Vf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Bb=typeof clearTimeout=="function"?clearTimeout:void 0,ig=typeof Promise=="function"?Promise:void 0,qb=typeof queueMicrotask=="function"?queueMicrotask:typeof ig<"u"?function(t){return ig.resolve(null).then(t).catch($b)}:Ff;function $b(t){setTimeout(function(){throw t})}function Uc(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Cs(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Cs(e)}function br(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function og(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var wo=Math.random().toString(36).slice(2),Sn="__reactFiber$"+wo,Vs="__reactProps$"+wo,Kn="__reactContainer$"+wo,Uf="__reactEvents$"+wo,zb="__reactListeners$"+wo,Hb="__reactHandles$"+wo;function ei(t){var e=t[Sn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Kn]||n[Sn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=og(t);t!==null;){if(n=t[Sn])return n;t=og(t)}return e}t=n,n=t.parentNode}return null}function oa(t){return t=t[Sn]||t[Kn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Mi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(se(33))}function Iu(t){return t[Vs]||null}var Bf=[],ji=-1;function Ur(t){return{current:t}}function He(t){0>ji||(t.current=Bf[ji],Bf[ji]=null,ji--)}function Fe(t,e){ji++,Bf[ji]=t.current,t.current=e}var Dr={},Nt=Ur(Dr),$t=Ur(!1),ai=Dr;function ro(t,e){var n=t.type.contextTypes;if(!n)return Dr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function zt(t){return t=t.childContextTypes,t!=null}function Ul(){He($t),He(Nt)}function sg(t,e,n){if(Nt.current!==Dr)throw Error(se(168));Fe(Nt,e),Fe($t,n)}function M_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(se(108,xT(t)||"Unknown",i));return Ye({},n,r)}function Bl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Dr,ai=Nt.current,Fe(Nt,t),Fe($t,$t.current),!0}function ag(t,e,n){var r=t.stateNode;if(!r)throw Error(se(169));n?(t=M_(t,e,ai),r.__reactInternalMemoizedMergedChildContext=t,He($t),He(Nt),Fe(Nt,t)):He($t),Fe($t,n)}var Vn=null,Au=!1,Bc=!1;function j_(t){Vn===null?Vn=[t]:Vn.push(t)}function Wb(t){Au=!0,j_(t)}function Br(){if(!Bc&&Vn!==null){Bc=!0;var t=0,e=De;try{var n=Vn;for(De=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Vn=null,Au=!1}catch(i){throw Vn!==null&&(Vn=Vn.slice(t+1)),l_(Yh,Br),i}finally{De=e,Bc=!1}}return null}var Vi=[],Fi=0,ql=null,$l=0,rn=[],on=0,li=null,Fn=1,Un="";function Yr(t,e){Vi[Fi++]=$l,Vi[Fi++]=ql,ql=t,$l=e}function V_(t,e,n){rn[on++]=Fn,rn[on++]=Un,rn[on++]=li,li=t;var r=Fn;t=Un;var i=32-gn(r)-1;r&=~(1<<i),n+=1;var o=32-gn(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Fn=1<<32-gn(e)+i|n<<i|r,Un=o+t}else Fn=1<<o|n<<i|r,Un=t}function od(t){t.return!==null&&(Yr(t,1),V_(t,1,0))}function sd(t){for(;t===ql;)ql=Vi[--Fi],Vi[Fi]=null,$l=Vi[--Fi],Vi[Fi]=null;for(;t===li;)li=rn[--on],rn[on]=null,Un=rn[--on],rn[on]=null,Fn=rn[--on],rn[on]=null}var Zt=null,Xt=null,We=!1,mn=null;function F_(t,e){var n=sn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function lg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Zt=t,Xt=br(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Zt=t,Xt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=li!==null?{id:Fn,overflow:Un}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=sn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Zt=t,Xt=null,!0):!1;default:return!1}}function qf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function $f(t){if(We){var e=Xt;if(e){var n=e;if(!lg(t,e)){if(qf(t))throw Error(se(418));e=br(n.nextSibling);var r=Zt;e&&lg(t,e)?F_(r,n):(t.flags=t.flags&-4097|2,We=!1,Zt=t)}}else{if(qf(t))throw Error(se(418));t.flags=t.flags&-4097|2,We=!1,Zt=t}}}function ug(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Zt=t}function Qa(t){if(t!==Zt)return!1;if(!We)return ug(t),We=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Vf(t.type,t.memoizedProps)),e&&(e=Xt)){if(qf(t))throw U_(),Error(se(418));for(;e;)F_(t,e),e=br(e.nextSibling)}if(ug(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(se(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Xt=br(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Xt=null}}else Xt=Zt?br(t.stateNode.nextSibling):null;return!0}function U_(){for(var t=Xt;t;)t=br(t.nextSibling)}function io(){Xt=Zt=null,We=!1}function ad(t){mn===null?mn=[t]:mn.push(t)}var Kb=er.ReactCurrentBatchConfig;function Jo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(se(309));var r=n.stateNode}if(!r)throw Error(se(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var a=i.refs;s===null?delete a[o]:a[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(se(284));if(!n._owner)throw Error(se(290,t))}return t}function Ya(t,e){throw t=Object.prototype.toString.call(e),Error(se(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function cg(t){var e=t._init;return e(t._payload)}function B_(t){function e(g,p){if(t){var v=g.deletions;v===null?(g.deletions=[p],g.flags|=16):v.push(p)}}function n(g,p){if(!t)return null;for(;p!==null;)e(g,p),p=p.sibling;return null}function r(g,p){for(g=new Map;p!==null;)p.key!==null?g.set(p.key,p):g.set(p.index,p),p=p.sibling;return g}function i(g,p){return g=kr(g,p),g.index=0,g.sibling=null,g}function o(g,p,v){return g.index=v,t?(v=g.alternate,v!==null?(v=v.index,v<p?(g.flags|=2,p):v):(g.flags|=2,p)):(g.flags|=1048576,p)}function s(g){return t&&g.alternate===null&&(g.flags|=2),g}function a(g,p,v,y){return p===null||p.tag!==6?(p=Gc(v,g.mode,y),p.return=g,p):(p=i(p,v),p.return=g,p)}function l(g,p,v,y){var k=v.type;return k===Ni?d(g,p,v.props.children,y,v.key):p!==null&&(p.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===ur&&cg(k)===p.type)?(y=i(p,v.props),y.ref=Jo(g,p,v),y.return=g,y):(y=wl(v.type,v.key,v.props,null,g.mode,y),y.ref=Jo(g,p,v),y.return=g,y)}function c(g,p,v,y){return p===null||p.tag!==4||p.stateNode.containerInfo!==v.containerInfo||p.stateNode.implementation!==v.implementation?(p=Qc(v,g.mode,y),p.return=g,p):(p=i(p,v.children||[]),p.return=g,p)}function d(g,p,v,y,k){return p===null||p.tag!==7?(p=oi(v,g.mode,y,k),p.return=g,p):(p=i(p,v),p.return=g,p)}function h(g,p,v){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Gc(""+p,g.mode,v),p.return=g,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Fa:return v=wl(p.type,p.key,p.props,null,g.mode,v),v.ref=Jo(g,null,p),v.return=g,v;case Ri:return p=Qc(p,g.mode,v),p.return=g,p;case ur:var y=p._init;return h(g,y(p._payload),v)}if(os(p)||Ko(p))return p=oi(p,g.mode,v,null),p.return=g,p;Ya(g,p)}return null}function f(g,p,v,y){var k=p!==null?p.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return k!==null?null:a(g,p,""+v,y);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Fa:return v.key===k?l(g,p,v,y):null;case Ri:return v.key===k?c(g,p,v,y):null;case ur:return k=v._init,f(g,p,k(v._payload),y)}if(os(v)||Ko(v))return k!==null?null:d(g,p,v,y,null);Ya(g,v)}return null}function m(g,p,v,y,k){if(typeof y=="string"&&y!==""||typeof y=="number")return g=g.get(v)||null,a(p,g,""+y,k);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Fa:return g=g.get(y.key===null?v:y.key)||null,l(p,g,y,k);case Ri:return g=g.get(y.key===null?v:y.key)||null,c(p,g,y,k);case ur:var N=y._init;return m(g,p,v,N(y._payload),k)}if(os(y)||Ko(y))return g=g.get(v)||null,d(p,g,y,k,null);Ya(p,y)}return null}function w(g,p,v,y){for(var k=null,N=null,S=p,T=p=0,P=null;S!==null&&T<v.length;T++){S.index>T?(P=S,S=null):P=S.sibling;var b=f(g,S,v[T],y);if(b===null){S===null&&(S=P);break}t&&S&&b.alternate===null&&e(g,S),p=o(b,p,T),N===null?k=b:N.sibling=b,N=b,S=P}if(T===v.length)return n(g,S),We&&Yr(g,T),k;if(S===null){for(;T<v.length;T++)S=h(g,v[T],y),S!==null&&(p=o(S,p,T),N===null?k=S:N.sibling=S,N=S);return We&&Yr(g,T),k}for(S=r(g,S);T<v.length;T++)P=m(S,g,T,v[T],y),P!==null&&(t&&P.alternate!==null&&S.delete(P.key===null?T:P.key),p=o(P,p,T),N===null?k=P:N.sibling=P,N=P);return t&&S.forEach(function(I){return e(g,I)}),We&&Yr(g,T),k}function _(g,p,v,y){var k=Ko(v);if(typeof k!="function")throw Error(se(150));if(v=k.call(v),v==null)throw Error(se(151));for(var N=k=null,S=p,T=p=0,P=null,b=v.next();S!==null&&!b.done;T++,b=v.next()){S.index>T?(P=S,S=null):P=S.sibling;var I=f(g,S,b.value,y);if(I===null){S===null&&(S=P);break}t&&S&&I.alternate===null&&e(g,S),p=o(I,p,T),N===null?k=I:N.sibling=I,N=I,S=P}if(b.done)return n(g,S),We&&Yr(g,T),k;if(S===null){for(;!b.done;T++,b=v.next())b=h(g,b.value,y),b!==null&&(p=o(b,p,T),N===null?k=b:N.sibling=b,N=b);return We&&Yr(g,T),k}for(S=r(g,S);!b.done;T++,b=v.next())b=m(S,g,T,b.value,y),b!==null&&(t&&b.alternate!==null&&S.delete(b.key===null?T:b.key),p=o(b,p,T),N===null?k=b:N.sibling=b,N=b);return t&&S.forEach(function(x){return e(g,x)}),We&&Yr(g,T),k}function E(g,p,v,y){if(typeof v=="object"&&v!==null&&v.type===Ni&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Fa:e:{for(var k=v.key,N=p;N!==null;){if(N.key===k){if(k=v.type,k===Ni){if(N.tag===7){n(g,N.sibling),p=i(N,v.props.children),p.return=g,g=p;break e}}else if(N.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===ur&&cg(k)===N.type){n(g,N.sibling),p=i(N,v.props),p.ref=Jo(g,N,v),p.return=g,g=p;break e}n(g,N);break}else e(g,N);N=N.sibling}v.type===Ni?(p=oi(v.props.children,g.mode,y,v.key),p.return=g,g=p):(y=wl(v.type,v.key,v.props,null,g.mode,y),y.ref=Jo(g,p,v),y.return=g,g=y)}return s(g);case Ri:e:{for(N=v.key;p!==null;){if(p.key===N)if(p.tag===4&&p.stateNode.containerInfo===v.containerInfo&&p.stateNode.implementation===v.implementation){n(g,p.sibling),p=i(p,v.children||[]),p.return=g,g=p;break e}else{n(g,p);break}else e(g,p);p=p.sibling}p=Qc(v,g.mode,y),p.return=g,g=p}return s(g);case ur:return N=v._init,E(g,p,N(v._payload),y)}if(os(v))return w(g,p,v,y);if(Ko(v))return _(g,p,v,y);Ya(g,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,p!==null&&p.tag===6?(n(g,p.sibling),p=i(p,v),p.return=g,g=p):(n(g,p),p=Gc(v,g.mode,y),p.return=g,g=p),s(g)):n(g,p)}return E}var oo=B_(!0),q_=B_(!1),zl=Ur(null),Hl=null,Ui=null,ld=null;function ud(){ld=Ui=Hl=null}function cd(t){var e=zl.current;He(zl),t._currentValue=e}function zf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Qi(t,e){Hl=t,ld=Ui=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(qt=!0),t.firstContext=null)}function ln(t){var e=t._currentValue;if(ld!==t)if(t={context:t,memoizedValue:e,next:null},Ui===null){if(Hl===null)throw Error(se(308));Ui=t,Hl.dependencies={lanes:0,firstContext:t}}else Ui=Ui.next=t;return e}var ti=null;function fd(t){ti===null?ti=[t]:ti.push(t)}function $_(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,fd(e)):(n.next=i.next,i.next=n),e.interleaved=n,Gn(t,r)}function Gn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var cr=!1;function hd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function z_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function zn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ir(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Oe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Gn(t,n)}return i=r.interleaved,i===null?(e.next=e,fd(r)):(e.next=i.next,i.next=e),r.interleaved=e,Gn(t,n)}function ml(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Xh(t,n)}}function fg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Wl(t,e,n,r){var i=t.updateQueue;cr=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,s===null?o=c:s.next=c,s=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==s&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(o!==null){var h=i.baseState;s=0,d=c=l=null,a=o;do{var f=a.lane,m=a.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=t,_=a;switch(f=e,m=n,_.tag){case 1:if(w=_.payload,typeof w=="function"){h=w.call(m,h,f);break e}h=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=_.payload,f=typeof w=="function"?w.call(m,h,f):w,f==null)break e;h=Ye({},h,f);break e;case 2:cr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else m={eventTime:m,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=m,l=h):d=d.next=m,s|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(d===null&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);ci|=s,t.lanes=s,t.memoizedState=h}}function hg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(se(191,i));i.call(r)}}}var sa={},xn=Ur(sa),Fs=Ur(sa),Us=Ur(sa);function ni(t){if(t===sa)throw Error(se(174));return t}function dd(t,e){switch(Fe(Us,e),Fe(Fs,t),Fe(xn,sa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:If(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=If(e,t)}He(xn),Fe(xn,e)}function so(){He(xn),He(Fs),He(Us)}function H_(t){ni(Us.current);var e=ni(xn.current),n=If(e,t.type);e!==n&&(Fe(Fs,t),Fe(xn,n))}function pd(t){Fs.current===t&&(He(xn),He(Fs))}var Ge=Ur(0);function Kl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var qc=[];function md(){for(var t=0;t<qc.length;t++)qc[t]._workInProgressVersionPrimary=null;qc.length=0}var gl=er.ReactCurrentDispatcher,$c=er.ReactCurrentBatchConfig,ui=0,Qe=null,ut=null,dt=null,Gl=!1,_s=!1,Bs=0,Gb=0;function St(){throw Error(se(321))}function gd(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!_n(t[n],e[n]))return!1;return!0}function yd(t,e,n,r,i,o){if(ui=o,Qe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,gl.current=t===null||t.memoizedState===null?Jb:Zb,t=n(r,i),_s){o=0;do{if(_s=!1,Bs=0,25<=o)throw Error(se(301));o+=1,dt=ut=null,e.updateQueue=null,gl.current=eI,t=n(r,i)}while(_s)}if(gl.current=Ql,e=ut!==null&&ut.next!==null,ui=0,dt=ut=Qe=null,Gl=!1,e)throw Error(se(300));return t}function vd(){var t=Bs!==0;return Bs=0,t}function An(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dt===null?Qe.memoizedState=dt=t:dt=dt.next=t,dt}function un(){if(ut===null){var t=Qe.alternate;t=t!==null?t.memoizedState:null}else t=ut.next;var e=dt===null?Qe.memoizedState:dt.next;if(e!==null)dt=e,ut=t;else{if(t===null)throw Error(se(310));ut=t,t={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},dt===null?Qe.memoizedState=dt=t:dt=dt.next=t}return dt}function qs(t,e){return typeof e=="function"?e(t):e}function zc(t){var e=un(),n=e.queue;if(n===null)throw Error(se(311));n.lastRenderedReducer=t;var r=ut,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=s=null,l=null,c=o;do{var d=c.lane;if((ui&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,s=r):l=l.next=h,Qe.lanes|=d,ci|=d}c=c.next}while(c!==null&&c!==o);l===null?s=r:l.next=a,_n(r,e.memoizedState)||(qt=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,Qe.lanes|=o,ci|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Hc(t){var e=un(),n=e.queue;if(n===null)throw Error(se(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);_n(o,e.memoizedState)||(qt=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function W_(){}function K_(t,e){var n=Qe,r=un(),i=e(),o=!_n(r.memoizedState,i);if(o&&(r.memoizedState=i,qt=!0),r=r.queue,_d(Y_.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||dt!==null&&dt.memoizedState.tag&1){if(n.flags|=2048,$s(9,Q_.bind(null,n,r,i,e),void 0,null),pt===null)throw Error(se(349));ui&30||G_(n,e,i)}return i}function G_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Qe.updateQueue,e===null?(e={lastEffect:null,stores:null},Qe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Q_(t,e,n,r){e.value=n,e.getSnapshot=r,X_(e)&&J_(t)}function Y_(t,e,n){return n(function(){X_(e)&&J_(t)})}function X_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!_n(t,n)}catch{return!0}}function J_(t){var e=Gn(t,1);e!==null&&yn(e,t,1,-1)}function dg(t){var e=An();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qs,lastRenderedState:t},e.queue=t,t=t.dispatch=Xb.bind(null,Qe,t),[e.memoizedState,t]}function $s(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Qe.updateQueue,e===null?(e={lastEffect:null,stores:null},Qe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Z_(){return un().memoizedState}function yl(t,e,n,r){var i=An();Qe.flags|=t,i.memoizedState=$s(1|e,n,void 0,r===void 0?null:r)}function Su(t,e,n,r){var i=un();r=r===void 0?null:r;var o=void 0;if(ut!==null){var s=ut.memoizedState;if(o=s.destroy,r!==null&&gd(r,s.deps)){i.memoizedState=$s(e,n,o,r);return}}Qe.flags|=t,i.memoizedState=$s(1|e,n,o,r)}function pg(t,e){return yl(8390656,8,t,e)}function _d(t,e){return Su(2048,8,t,e)}function e0(t,e){return Su(4,2,t,e)}function t0(t,e){return Su(4,4,t,e)}function n0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function r0(t,e,n){return n=n!=null?n.concat([t]):null,Su(4,4,n0.bind(null,e,t),n)}function Ed(){}function i0(t,e){var n=un();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&gd(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function o0(t,e){var n=un();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&gd(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function s0(t,e,n){return ui&21?(_n(n,e)||(n=f_(),Qe.lanes|=n,ci|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,qt=!0),t.memoizedState=n)}function Qb(t,e){var n=De;De=n!==0&&4>n?n:4,t(!0);var r=$c.transition;$c.transition={};try{t(!1),e()}finally{De=n,$c.transition=r}}function a0(){return un().memoizedState}function Yb(t,e,n){var r=Sr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},l0(t))u0(e,n);else if(n=$_(t,e,n,r),n!==null){var i=jt();yn(n,t,r,i),c0(n,e,r)}}function Xb(t,e,n){var r=Sr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(l0(t))u0(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,_n(a,s)){var l=e.interleaved;l===null?(i.next=i,fd(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=$_(t,e,i,r),n!==null&&(i=jt(),yn(n,t,r,i),c0(n,e,r))}}function l0(t){var e=t.alternate;return t===Qe||e!==null&&e===Qe}function u0(t,e){_s=Gl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function c0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Xh(t,n)}}var Ql={readContext:ln,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useInsertionEffect:St,useLayoutEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useMutableSource:St,useSyncExternalStore:St,useId:St,unstable_isNewReconciler:!1},Jb={readContext:ln,useCallback:function(t,e){return An().memoizedState=[t,e===void 0?null:e],t},useContext:ln,useEffect:pg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,yl(4194308,4,n0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return yl(4194308,4,t,e)},useInsertionEffect:function(t,e){return yl(4,2,t,e)},useMemo:function(t,e){var n=An();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=An();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Yb.bind(null,Qe,t),[r.memoizedState,t]},useRef:function(t){var e=An();return t={current:t},e.memoizedState=t},useState:dg,useDebugValue:Ed,useDeferredValue:function(t){return An().memoizedState=t},useTransition:function(){var t=dg(!1),e=t[0];return t=Qb.bind(null,t[1]),An().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Qe,i=An();if(We){if(n===void 0)throw Error(se(407));n=n()}else{if(n=e(),pt===null)throw Error(se(349));ui&30||G_(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,pg(Y_.bind(null,r,o,t),[t]),r.flags|=2048,$s(9,Q_.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=An(),e=pt.identifierPrefix;if(We){var n=Un,r=Fn;n=(r&~(1<<32-gn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Bs++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Gb++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Zb={readContext:ln,useCallback:i0,useContext:ln,useEffect:_d,useImperativeHandle:r0,useInsertionEffect:e0,useLayoutEffect:t0,useMemo:o0,useReducer:zc,useRef:Z_,useState:function(){return zc(qs)},useDebugValue:Ed,useDeferredValue:function(t){var e=un();return s0(e,ut.memoizedState,t)},useTransition:function(){var t=zc(qs)[0],e=un().memoizedState;return[t,e]},useMutableSource:W_,useSyncExternalStore:K_,useId:a0,unstable_isNewReconciler:!1},eI={readContext:ln,useCallback:i0,useContext:ln,useEffect:_d,useImperativeHandle:r0,useInsertionEffect:e0,useLayoutEffect:t0,useMemo:o0,useReducer:Hc,useRef:Z_,useState:function(){return Hc(qs)},useDebugValue:Ed,useDeferredValue:function(t){var e=un();return ut===null?e.memoizedState=t:s0(e,ut.memoizedState,t)},useTransition:function(){var t=Hc(qs)[0],e=un().memoizedState;return[t,e]},useMutableSource:W_,useSyncExternalStore:K_,useId:a0,unstable_isNewReconciler:!1};function dn(t,e){if(t&&t.defaultProps){e=Ye({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Hf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ye({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ku={isMounted:function(t){return(t=t._reactInternals)?_i(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=jt(),i=Sr(t),o=zn(r,i);o.payload=e,n!=null&&(o.callback=n),e=Ir(t,o,i),e!==null&&(yn(e,t,i,r),ml(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=jt(),i=Sr(t),o=zn(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Ir(t,o,i),e!==null&&(yn(e,t,i,r),ml(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=jt(),r=Sr(t),i=zn(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ir(t,i,r),e!==null&&(yn(e,t,r,n),ml(e,t,r))}};function mg(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!Ls(n,r)||!Ls(i,o):!0}function f0(t,e,n){var r=!1,i=Dr,o=e.contextType;return typeof o=="object"&&o!==null?o=ln(o):(i=zt(e)?ai:Nt.current,r=e.contextTypes,o=(r=r!=null)?ro(t,i):Dr),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ku,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function gg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ku.enqueueReplaceState(e,e.state,null)}function Wf(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},hd(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=ln(o):(o=zt(e)?ai:Nt.current,i.context=ro(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Hf(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&ku.enqueueReplaceState(i,i.state,null),Wl(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ao(t,e){try{var n="",r=e;do n+=PT(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function Wc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Kf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var tI=typeof WeakMap=="function"?WeakMap:Map;function h0(t,e,n){n=zn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Xl||(Xl=!0,rh=r),Kf(t,e)},n}function d0(t,e,n){n=zn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Kf(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Kf(t,e),typeof r!="function"&&(Ar===null?Ar=new Set([this]):Ar.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function yg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new tI;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=mI.bind(null,t,e,n),e.then(t,t))}function vg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function _g(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=zn(-1,1),e.tag=2,Ir(n,e,1))),n.lanes|=1),t)}var nI=er.ReactCurrentOwner,qt=!1;function Mt(t,e,n,r){e.child=t===null?q_(e,null,n,r):oo(e,t.child,n,r)}function Eg(t,e,n,r,i){n=n.render;var o=e.ref;return Qi(e,i),r=yd(t,e,n,r,o,i),n=vd(),t!==null&&!qt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Qn(t,e,i)):(We&&n&&od(e),e.flags|=1,Mt(t,e,r,i),e.child)}function wg(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!Pd(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,p0(t,e,o,r,i)):(t=wl(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:Ls,n(s,r)&&t.ref===e.ref)return Qn(t,e,i)}return e.flags|=1,t=kr(o,r),t.ref=e.ref,t.return=e,e.child=t}function p0(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(Ls(o,r)&&t.ref===e.ref)if(qt=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(qt=!0);else return e.lanes=t.lanes,Qn(t,e,i)}return Gf(t,e,n,r,i)}function m0(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fe(qi,Qt),Qt|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Fe(qi,Qt),Qt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Fe(qi,Qt),Qt|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,Fe(qi,Qt),Qt|=r;return Mt(t,e,i,n),e.child}function g0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Gf(t,e,n,r,i){var o=zt(n)?ai:Nt.current;return o=ro(e,o),Qi(e,i),n=yd(t,e,n,r,o,i),r=vd(),t!==null&&!qt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Qn(t,e,i)):(We&&r&&od(e),e.flags|=1,Mt(t,e,n,i),e.child)}function Tg(t,e,n,r,i){if(zt(n)){var o=!0;Bl(e)}else o=!1;if(Qi(e,i),e.stateNode===null)vl(t,e),f0(e,n,r),Wf(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,c=n.contextType;typeof c=="object"&&c!==null?c=ln(c):(c=zt(n)?ai:Nt.current,c=ro(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function";h||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||l!==c)&&gg(e,s,r,c),cr=!1;var f=e.memoizedState;s.state=f,Wl(e,r,s,i),l=e.memoizedState,a!==r||f!==l||$t.current||cr?(typeof d=="function"&&(Hf(e,n,d,r),l=e.memoizedState),(a=cr||mg(e,n,a,r,f,l,c))?(h||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),s.props=r,s.state=l,s.context=c,r=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,z_(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:dn(e.type,a),s.props=c,h=e.pendingProps,f=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=ln(l):(l=zt(n)?ai:Nt.current,l=ro(e,l));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==h||f!==l)&&gg(e,s,r,l),cr=!1,f=e.memoizedState,s.state=f,Wl(e,r,s,i);var w=e.memoizedState;a!==h||f!==w||$t.current||cr?(typeof m=="function"&&(Hf(e,n,m,r),w=e.memoizedState),(c=cr||mg(e,n,c,r,f,w,l)||!1)?(d||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,w,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,w,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),s.props=r,s.state=w,s.context=l,r=c):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Qf(t,e,n,r,o,i)}function Qf(t,e,n,r,i,o){g0(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&ag(e,n,!1),Qn(t,e,o);r=e.stateNode,nI.current=e;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=oo(e,t.child,null,o),e.child=oo(e,null,a,o)):Mt(t,e,a,o),e.memoizedState=r.state,i&&ag(e,n,!0),e.child}function y0(t){var e=t.stateNode;e.pendingContext?sg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&sg(t,e.context,!1),dd(t,e.containerInfo)}function bg(t,e,n,r,i){return io(),ad(i),e.flags|=256,Mt(t,e,n,r),e.child}var Yf={dehydrated:null,treeContext:null,retryLane:0};function Xf(t){return{baseLanes:t,cachePool:null,transitions:null}}function v0(t,e,n){var r=e.pendingProps,i=Ge.current,o=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Fe(Ge,i&1),t===null)return $f(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=Ou(s,r,0,null),t=oi(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Xf(n),e.memoizedState=Yf,t):wd(e,s));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return rI(t,e,s,r,a,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=kr(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=kr(a,o):(o=oi(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?Xf(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=Yf,r}return o=t.child,t=o.sibling,r=kr(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function wd(t,e){return e=Ou({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Xa(t,e,n,r){return r!==null&&ad(r),oo(e,t.child,null,n),t=wd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function rI(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=Wc(Error(se(422))),Xa(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=Ou({mode:"visible",children:r.children},i,0,null),o=oi(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&oo(e,t.child,null,s),e.child.memoizedState=Xf(s),e.memoizedState=Yf,o);if(!(e.mode&1))return Xa(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(se(419)),r=Wc(o,r,void 0),Xa(t,e,s,r)}if(a=(s&t.childLanes)!==0,qt||a){if(r=pt,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Gn(t,i),yn(r,t,i,-1))}return kd(),r=Wc(Error(se(421))),Xa(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=gI.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,Xt=br(i.nextSibling),Zt=e,We=!0,mn=null,t!==null&&(rn[on++]=Fn,rn[on++]=Un,rn[on++]=li,Fn=t.id,Un=t.overflow,li=e),e=wd(e,r.children),e.flags|=4096,e)}function Ig(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),zf(t.return,e,n)}function Kc(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function _0(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Mt(t,e,r.children,n),r=Ge.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ig(t,n,e);else if(t.tag===19)Ig(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Fe(Ge,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Kl(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Kc(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Kl(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Kc(e,!0,n,null,o);break;case"together":Kc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function vl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Qn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ci|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(se(153));if(e.child!==null){for(t=e.child,n=kr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=kr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function iI(t,e,n){switch(e.tag){case 3:y0(e),io();break;case 5:H_(e);break;case 1:zt(e.type)&&Bl(e);break;case 4:dd(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Fe(zl,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Fe(Ge,Ge.current&1),e.flags|=128,null):n&e.child.childLanes?v0(t,e,n):(Fe(Ge,Ge.current&1),t=Qn(t,e,n),t!==null?t.sibling:null);Fe(Ge,Ge.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return _0(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Fe(Ge,Ge.current),r)break;return null;case 22:case 23:return e.lanes=0,m0(t,e,n)}return Qn(t,e,n)}var E0,Jf,w0,T0;E0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Jf=function(){};w0=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ni(xn.current);var o=null;switch(n){case"input":i=Ef(t,i),r=Ef(t,r),o=[];break;case"select":i=Ye({},i,{value:void 0}),r=Ye({},r,{value:void 0}),o=[];break;case"textarea":i=bf(t,i),r=bf(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Fl)}Af(n,r);var s;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ps.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ps.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&qe("scroll",t),o||a===l||(o=[])):(o=o||[]).push(c,l))}n&&(o=o||[]).push("style",n);var c=o;(e.updateQueue=c)&&(e.flags|=4)}};T0=function(t,e,n,r){n!==r&&(e.flags|=4)};function Zo(t,e){if(!We)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function kt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function oI(t,e,n){var r=e.pendingProps;switch(sd(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(e),null;case 1:return zt(e.type)&&Ul(),kt(e),null;case 3:return r=e.stateNode,so(),He($t),He(Nt),md(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Qa(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,mn!==null&&(sh(mn),mn=null))),Jf(t,e),kt(e),null;case 5:pd(e);var i=ni(Us.current);if(n=e.type,t!==null&&e.stateNode!=null)w0(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(se(166));return kt(e),null}if(t=ni(xn.current),Qa(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[Sn]=e,r[Vs]=o,t=(e.mode&1)!==0,n){case"dialog":qe("cancel",r),qe("close",r);break;case"iframe":case"object":case"embed":qe("load",r);break;case"video":case"audio":for(i=0;i<as.length;i++)qe(as[i],r);break;case"source":qe("error",r);break;case"img":case"image":case"link":qe("error",r),qe("load",r);break;case"details":qe("toggle",r);break;case"input":Cm(r,o),qe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},qe("invalid",r);break;case"textarea":Lm(r,o),qe("invalid",r)}Af(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&Ga(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&Ga(r.textContent,a,t),i=["children",""+a]):Ps.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&qe("scroll",r)}switch(n){case"input":Ua(r),Dm(r,o,!0);break;case"textarea":Ua(r),Mm(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Fl)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Yv(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[Sn]=e,t[Vs]=r,E0(t,e,!1,!1),e.stateNode=t;e:{switch(s=Sf(n,r),n){case"dialog":qe("cancel",t),qe("close",t),i=r;break;case"iframe":case"object":case"embed":qe("load",t),i=r;break;case"video":case"audio":for(i=0;i<as.length;i++)qe(as[i],t);i=r;break;case"source":qe("error",t),i=r;break;case"img":case"image":case"link":qe("error",t),qe("load",t),i=r;break;case"details":qe("toggle",t),i=r;break;case"input":Cm(t,r),i=Ef(t,r),qe("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ye({},r,{value:void 0}),qe("invalid",t);break;case"textarea":Lm(t,r),i=bf(t,r),qe("invalid",t);break;default:i=r}Af(n,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?Zv(t,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Xv(t,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&xs(t,l):typeof l=="number"&&xs(t,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Ps.hasOwnProperty(o)?l!=null&&o==="onScroll"&&qe("scroll",t):l!=null&&Hh(t,o,l,s))}switch(n){case"input":Ua(t),Dm(t,r,!1);break;case"textarea":Ua(t),Mm(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Cr(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Hi(t,!!r.multiple,o,!1):r.defaultValue!=null&&Hi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Fl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return kt(e),null;case 6:if(t&&e.stateNode!=null)T0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(se(166));if(n=ni(Us.current),ni(xn.current),Qa(e)){if(r=e.stateNode,n=e.memoizedProps,r[Sn]=e,(o=r.nodeValue!==n)&&(t=Zt,t!==null))switch(t.tag){case 3:Ga(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ga(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Sn]=e,e.stateNode=r}return kt(e),null;case 13:if(He(Ge),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(We&&Xt!==null&&e.mode&1&&!(e.flags&128))U_(),io(),e.flags|=98560,o=!1;else if(o=Qa(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(se(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(se(317));o[Sn]=e}else io(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;kt(e),o=!1}else mn!==null&&(sh(mn),mn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ge.current&1?ct===0&&(ct=3):kd())),e.updateQueue!==null&&(e.flags|=4),kt(e),null);case 4:return so(),Jf(t,e),t===null&&Ms(e.stateNode.containerInfo),kt(e),null;case 10:return cd(e.type._context),kt(e),null;case 17:return zt(e.type)&&Ul(),kt(e),null;case 19:if(He(Ge),o=e.memoizedState,o===null)return kt(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)Zo(o,!1);else{if(ct!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=Kl(t),s!==null){for(e.flags|=128,Zo(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Fe(Ge,Ge.current&1|2),e.child}t=t.sibling}o.tail!==null&&it()>lo&&(e.flags|=128,r=!0,Zo(o,!1),e.lanes=4194304)}else{if(!r)if(t=Kl(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Zo(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!We)return kt(e),null}else 2*it()-o.renderingStartTime>lo&&n!==1073741824&&(e.flags|=128,r=!0,Zo(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=it(),e.sibling=null,n=Ge.current,Fe(Ge,r?n&1|2:n&1),e):(kt(e),null);case 22:case 23:return Sd(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Qt&1073741824&&(kt(e),e.subtreeFlags&6&&(e.flags|=8192)):kt(e),null;case 24:return null;case 25:return null}throw Error(se(156,e.tag))}function sI(t,e){switch(sd(e),e.tag){case 1:return zt(e.type)&&Ul(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return so(),He($t),He(Nt),md(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return pd(e),null;case 13:if(He(Ge),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(se(340));io()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return He(Ge),null;case 4:return so(),null;case 10:return cd(e.type._context),null;case 22:case 23:return Sd(),null;case 24:return null;default:return null}}var Ja=!1,Ot=!1,aI=typeof WeakSet=="function"?WeakSet:Set,he=null;function Bi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ze(t,e,r)}else n.current=null}function Zf(t,e,n){try{n()}catch(r){Ze(t,e,r)}}var Ag=!1;function lI(t,e){if(Mf=Ml,t=k_(),id(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,a=-1,l=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var m;h!==n||i!==0&&h.nodeType!==3||(a=s+i),h!==o||r!==0&&h.nodeType!==3||(l=s+r),h.nodeType===3&&(s+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===t)break t;if(f===n&&++c===i&&(a=s),f===o&&++d===r&&(l=s),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(jf={focusedElem:t,selectionRange:n},Ml=!1,he=e;he!==null;)if(e=he,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,he=t;else for(;he!==null;){e=he;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var _=w.memoizedProps,E=w.memoizedState,g=e.stateNode,p=g.getSnapshotBeforeUpdate(e.elementType===e.type?_:dn(e.type,_),E);g.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(se(163))}}catch(y){Ze(e,e.return,y)}if(t=e.sibling,t!==null){t.return=e.return,he=t;break}he=e.return}return w=Ag,Ag=!1,w}function Es(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&Zf(e,n,o)}i=i.next}while(i!==r)}}function Pu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function eh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function b0(t){var e=t.alternate;e!==null&&(t.alternate=null,b0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Sn],delete e[Vs],delete e[Uf],delete e[zb],delete e[Hb])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function I0(t){return t.tag===5||t.tag===3||t.tag===4}function Sg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||I0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function th(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Fl));else if(r!==4&&(t=t.child,t!==null))for(th(t,e,n),t=t.sibling;t!==null;)th(t,e,n),t=t.sibling}function nh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(nh(t,e,n),t=t.sibling;t!==null;)nh(t,e,n),t=t.sibling}var yt=null,pn=!1;function ar(t,e,n){for(n=n.child;n!==null;)A0(t,e,n),n=n.sibling}function A0(t,e,n){if(Pn&&typeof Pn.onCommitFiberUnmount=="function")try{Pn.onCommitFiberUnmount(Eu,n)}catch{}switch(n.tag){case 5:Ot||Bi(n,e);case 6:var r=yt,i=pn;yt=null,ar(t,e,n),yt=r,pn=i,yt!==null&&(pn?(t=yt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):yt.removeChild(n.stateNode));break;case 18:yt!==null&&(pn?(t=yt,n=n.stateNode,t.nodeType===8?Uc(t.parentNode,n):t.nodeType===1&&Uc(t,n),Cs(t)):Uc(yt,n.stateNode));break;case 4:r=yt,i=pn,yt=n.stateNode.containerInfo,pn=!0,ar(t,e,n),yt=r,pn=i;break;case 0:case 11:case 14:case 15:if(!Ot&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&Zf(n,e,s),i=i.next}while(i!==r)}ar(t,e,n);break;case 1:if(!Ot&&(Bi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ze(n,e,a)}ar(t,e,n);break;case 21:ar(t,e,n);break;case 22:n.mode&1?(Ot=(r=Ot)||n.memoizedState!==null,ar(t,e,n),Ot=r):ar(t,e,n);break;default:ar(t,e,n)}}function kg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new aI),e.forEach(function(r){var i=yI.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function fn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:yt=a.stateNode,pn=!1;break e;case 3:yt=a.stateNode.containerInfo,pn=!0;break e;case 4:yt=a.stateNode.containerInfo,pn=!0;break e}a=a.return}if(yt===null)throw Error(se(160));A0(o,s,i),yt=null,pn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Ze(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)S0(e,t),e=e.sibling}function S0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(fn(e,t),bn(t),r&4){try{Es(3,t,t.return),Pu(3,t)}catch(_){Ze(t,t.return,_)}try{Es(5,t,t.return)}catch(_){Ze(t,t.return,_)}}break;case 1:fn(e,t),bn(t),r&512&&n!==null&&Bi(n,n.return);break;case 5:if(fn(e,t),bn(t),r&512&&n!==null&&Bi(n,n.return),t.flags&32){var i=t.stateNode;try{xs(i,"")}catch(_){Ze(t,t.return,_)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&Gv(i,o),Sf(a,s);var c=Sf(a,o);for(s=0;s<l.length;s+=2){var d=l[s],h=l[s+1];d==="style"?Zv(i,h):d==="dangerouslySetInnerHTML"?Xv(i,h):d==="children"?xs(i,h):Hh(i,d,h,c)}switch(a){case"input":wf(i,o);break;case"textarea":Qv(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var m=o.value;m!=null?Hi(i,!!o.multiple,m,!1):f!==!!o.multiple&&(o.defaultValue!=null?Hi(i,!!o.multiple,o.defaultValue,!0):Hi(i,!!o.multiple,o.multiple?[]:"",!1))}i[Vs]=o}catch(_){Ze(t,t.return,_)}}break;case 6:if(fn(e,t),bn(t),r&4){if(t.stateNode===null)throw Error(se(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(_){Ze(t,t.return,_)}}break;case 3:if(fn(e,t),bn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Cs(e.containerInfo)}catch(_){Ze(t,t.return,_)}break;case 4:fn(e,t),bn(t);break;case 13:fn(e,t),bn(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Id=it())),r&4&&kg(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Ot=(c=Ot)||d,fn(e,t),Ot=c):fn(e,t),bn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(he=t,d=t.child;d!==null;){for(h=he=d;he!==null;){switch(f=he,m=f.child,f.tag){case 0:case 11:case 14:case 15:Es(4,f,f.return);break;case 1:Bi(f,f.return);var w=f.stateNode;if(typeof w.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(_){Ze(r,n,_)}}break;case 5:Bi(f,f.return);break;case 22:if(f.memoizedState!==null){xg(h);continue}}m!==null?(m.return=f,he=m):xg(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,c?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=h.stateNode,l=h.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Jv("display",s))}catch(_){Ze(t,t.return,_)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(_){Ze(t,t.return,_)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:fn(e,t),bn(t),r&4&&kg(t);break;case 21:break;default:fn(e,t),bn(t)}}function bn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(I0(n)){var r=n;break e}n=n.return}throw Error(se(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(xs(i,""),r.flags&=-33);var o=Sg(t);nh(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,a=Sg(t);th(t,a,s);break;default:throw Error(se(161))}}catch(l){Ze(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function uI(t,e,n){he=t,k0(t)}function k0(t,e,n){for(var r=(t.mode&1)!==0;he!==null;){var i=he,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||Ja;if(!s){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Ot;a=Ja;var c=Ot;if(Ja=s,(Ot=l)&&!c)for(he=i;he!==null;)s=he,l=s.child,s.tag===22&&s.memoizedState!==null?Og(i):l!==null?(l.return=s,he=l):Og(i);for(;o!==null;)he=o,k0(o),o=o.sibling;he=i,Ja=a,Ot=c}Pg(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,he=o):Pg(t)}}function Pg(t){for(;he!==null;){var e=he;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ot||Pu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ot)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:dn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&hg(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}hg(e,s,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Cs(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(se(163))}Ot||e.flags&512&&eh(e)}catch(f){Ze(e,e.return,f)}}if(e===t){he=null;break}if(n=e.sibling,n!==null){n.return=e.return,he=n;break}he=e.return}}function xg(t){for(;he!==null;){var e=he;if(e===t){he=null;break}var n=e.sibling;if(n!==null){n.return=e.return,he=n;break}he=e.return}}function Og(t){for(;he!==null;){var e=he;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Pu(4,e)}catch(l){Ze(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Ze(e,i,l)}}var o=e.return;try{eh(e)}catch(l){Ze(e,o,l)}break;case 5:var s=e.return;try{eh(e)}catch(l){Ze(e,s,l)}}}catch(l){Ze(e,e.return,l)}if(e===t){he=null;break}var a=e.sibling;if(a!==null){a.return=e.return,he=a;break}he=e.return}}var cI=Math.ceil,Yl=er.ReactCurrentDispatcher,Td=er.ReactCurrentOwner,an=er.ReactCurrentBatchConfig,Oe=0,pt=null,at=null,Et=0,Qt=0,qi=Ur(0),ct=0,zs=null,ci=0,xu=0,bd=0,ws=null,Ut=null,Id=0,lo=1/0,jn=null,Xl=!1,rh=null,Ar=null,Za=!1,vr=null,Jl=0,Ts=0,ih=null,_l=-1,El=0;function jt(){return Oe&6?it():_l!==-1?_l:_l=it()}function Sr(t){return t.mode&1?Oe&2&&Et!==0?Et&-Et:Kb.transition!==null?(El===0&&(El=f_()),El):(t=De,t!==0||(t=window.event,t=t===void 0?16:v_(t.type)),t):1}function yn(t,e,n,r){if(50<Ts)throw Ts=0,ih=null,Error(se(185));ra(t,n,r),(!(Oe&2)||t!==pt)&&(t===pt&&(!(Oe&2)&&(xu|=n),ct===4&&hr(t,Et)),Ht(t,r),n===1&&Oe===0&&!(e.mode&1)&&(lo=it()+500,Au&&Br()))}function Ht(t,e){var n=t.callbackNode;KT(t,e);var r=Ll(t,t===pt?Et:0);if(r===0)n!==null&&Fm(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Fm(n),e===1)t.tag===0?Wb(Rg.bind(null,t)):j_(Rg.bind(null,t)),qb(function(){!(Oe&6)&&Br()}),n=null;else{switch(h_(r)){case 1:n=Yh;break;case 4:n=u_;break;case 16:n=Dl;break;case 536870912:n=c_;break;default:n=Dl}n=L0(n,P0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function P0(t,e){if(_l=-1,El=0,Oe&6)throw Error(se(327));var n=t.callbackNode;if(Yi()&&t.callbackNode!==n)return null;var r=Ll(t,t===pt?Et:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Zl(t,r);else{e=r;var i=Oe;Oe|=2;var o=O0();(pt!==t||Et!==e)&&(jn=null,lo=it()+500,ii(t,e));do try{dI();break}catch(a){x0(t,a)}while(!0);ud(),Yl.current=o,Oe=i,at!==null?e=0:(pt=null,Et=0,e=ct)}if(e!==0){if(e===2&&(i=Rf(t),i!==0&&(r=i,e=oh(t,i))),e===1)throw n=zs,ii(t,0),hr(t,r),Ht(t,it()),n;if(e===6)hr(t,r);else{if(i=t.current.alternate,!(r&30)&&!fI(i)&&(e=Zl(t,r),e===2&&(o=Rf(t),o!==0&&(r=o,e=oh(t,o))),e===1))throw n=zs,ii(t,0),hr(t,r),Ht(t,it()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(se(345));case 2:Xr(t,Ut,jn);break;case 3:if(hr(t,r),(r&130023424)===r&&(e=Id+500-it(),10<e)){if(Ll(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){jt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Ff(Xr.bind(null,t,Ut,jn),e);break}Xr(t,Ut,jn);break;case 4:if(hr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-gn(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=it()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*cI(r/1960))-r,10<r){t.timeoutHandle=Ff(Xr.bind(null,t,Ut,jn),r);break}Xr(t,Ut,jn);break;case 5:Xr(t,Ut,jn);break;default:throw Error(se(329))}}}return Ht(t,it()),t.callbackNode===n?P0.bind(null,t):null}function oh(t,e){var n=ws;return t.current.memoizedState.isDehydrated&&(ii(t,e).flags|=256),t=Zl(t,e),t!==2&&(e=Ut,Ut=n,e!==null&&sh(e)),t}function sh(t){Ut===null?Ut=t:Ut.push.apply(Ut,t)}function fI(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!_n(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function hr(t,e){for(e&=~bd,e&=~xu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-gn(e),r=1<<n;t[n]=-1,e&=~r}}function Rg(t){if(Oe&6)throw Error(se(327));Yi();var e=Ll(t,0);if(!(e&1))return Ht(t,it()),null;var n=Zl(t,e);if(t.tag!==0&&n===2){var r=Rf(t);r!==0&&(e=r,n=oh(t,r))}if(n===1)throw n=zs,ii(t,0),hr(t,e),Ht(t,it()),n;if(n===6)throw Error(se(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Xr(t,Ut,jn),Ht(t,it()),null}function Ad(t,e){var n=Oe;Oe|=1;try{return t(e)}finally{Oe=n,Oe===0&&(lo=it()+500,Au&&Br())}}function fi(t){vr!==null&&vr.tag===0&&!(Oe&6)&&Yi();var e=Oe;Oe|=1;var n=an.transition,r=De;try{if(an.transition=null,De=1,t)return t()}finally{De=r,an.transition=n,Oe=e,!(Oe&6)&&Br()}}function Sd(){Qt=qi.current,He(qi)}function ii(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Bb(n)),at!==null)for(n=at.return;n!==null;){var r=n;switch(sd(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ul();break;case 3:so(),He($t),He(Nt),md();break;case 5:pd(r);break;case 4:so();break;case 13:He(Ge);break;case 19:He(Ge);break;case 10:cd(r.type._context);break;case 22:case 23:Sd()}n=n.return}if(pt=t,at=t=kr(t.current,null),Et=Qt=e,ct=0,zs=null,bd=xu=ci=0,Ut=ws=null,ti!==null){for(e=0;e<ti.length;e++)if(n=ti[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}ti=null}return t}function x0(t,e){do{var n=at;try{if(ud(),gl.current=Ql,Gl){for(var r=Qe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Gl=!1}if(ui=0,dt=ut=Qe=null,_s=!1,Bs=0,Td.current=null,n===null||n.return===null){ct=1,zs=e,at=null;break}e:{var o=t,s=n.return,a=n,l=e;if(e=Et,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=vg(s);if(m!==null){m.flags&=-257,_g(m,s,a,o,e),m.mode&1&&yg(o,c,e),e=m,l=c;var w=e.updateQueue;if(w===null){var _=new Set;_.add(l),e.updateQueue=_}else w.add(l);break e}else{if(!(e&1)){yg(o,c,e),kd();break e}l=Error(se(426))}}else if(We&&a.mode&1){var E=vg(s);if(E!==null){!(E.flags&65536)&&(E.flags|=256),_g(E,s,a,o,e),ad(ao(l,a));break e}}o=l=ao(l,a),ct!==4&&(ct=2),ws===null?ws=[o]:ws.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var g=h0(o,l,e);fg(o,g);break e;case 1:a=l;var p=o.type,v=o.stateNode;if(!(o.flags&128)&&(typeof p.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Ar===null||!Ar.has(v)))){o.flags|=65536,e&=-e,o.lanes|=e;var y=d0(o,a,e);fg(o,y);break e}}o=o.return}while(o!==null)}N0(n)}catch(k){e=k,at===n&&n!==null&&(at=n=n.return);continue}break}while(!0)}function O0(){var t=Yl.current;return Yl.current=Ql,t===null?Ql:t}function kd(){(ct===0||ct===3||ct===2)&&(ct=4),pt===null||!(ci&268435455)&&!(xu&268435455)||hr(pt,Et)}function Zl(t,e){var n=Oe;Oe|=2;var r=O0();(pt!==t||Et!==e)&&(jn=null,ii(t,e));do try{hI();break}catch(i){x0(t,i)}while(!0);if(ud(),Oe=n,Yl.current=r,at!==null)throw Error(se(261));return pt=null,Et=0,ct}function hI(){for(;at!==null;)R0(at)}function dI(){for(;at!==null&&!VT();)R0(at)}function R0(t){var e=D0(t.alternate,t,Qt);t.memoizedProps=t.pendingProps,e===null?N0(t):at=e,Td.current=null}function N0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=sI(n,e),n!==null){n.flags&=32767,at=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ct=6,at=null;return}}else if(n=oI(n,e,Qt),n!==null){at=n;return}if(e=e.sibling,e!==null){at=e;return}at=e=t}while(e!==null);ct===0&&(ct=5)}function Xr(t,e,n){var r=De,i=an.transition;try{an.transition=null,De=1,pI(t,e,n,r)}finally{an.transition=i,De=r}return null}function pI(t,e,n,r){do Yi();while(vr!==null);if(Oe&6)throw Error(se(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(se(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(GT(t,o),t===pt&&(at=pt=null,Et=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Za||(Za=!0,L0(Dl,function(){return Yi(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=an.transition,an.transition=null;var s=De;De=1;var a=Oe;Oe|=4,Td.current=null,lI(t,n),S0(n,t),Db(jf),Ml=!!Mf,jf=Mf=null,t.current=n,uI(n),FT(),Oe=a,De=s,an.transition=o}else t.current=n;if(Za&&(Za=!1,vr=t,Jl=i),o=t.pendingLanes,o===0&&(Ar=null),qT(n.stateNode),Ht(t,it()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Xl)throw Xl=!1,t=rh,rh=null,t;return Jl&1&&t.tag!==0&&Yi(),o=t.pendingLanes,o&1?t===ih?Ts++:(Ts=0,ih=t):Ts=0,Br(),null}function Yi(){if(vr!==null){var t=h_(Jl),e=an.transition,n=De;try{if(an.transition=null,De=16>t?16:t,vr===null)var r=!1;else{if(t=vr,vr=null,Jl=0,Oe&6)throw Error(se(331));var i=Oe;for(Oe|=4,he=t.current;he!==null;){var o=he,s=o.child;if(he.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(he=c;he!==null;){var d=he;switch(d.tag){case 0:case 11:case 15:Es(8,d,o)}var h=d.child;if(h!==null)h.return=d,he=h;else for(;he!==null;){d=he;var f=d.sibling,m=d.return;if(b0(d),d===c){he=null;break}if(f!==null){f.return=m,he=f;break}he=m}}}var w=o.alternate;if(w!==null){var _=w.child;if(_!==null){w.child=null;do{var E=_.sibling;_.sibling=null,_=E}while(_!==null)}}he=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,he=s;else e:for(;he!==null;){if(o=he,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Es(9,o,o.return)}var g=o.sibling;if(g!==null){g.return=o.return,he=g;break e}he=o.return}}var p=t.current;for(he=p;he!==null;){s=he;var v=s.child;if(s.subtreeFlags&2064&&v!==null)v.return=s,he=v;else e:for(s=p;he!==null;){if(a=he,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Pu(9,a)}}catch(k){Ze(a,a.return,k)}if(a===s){he=null;break e}var y=a.sibling;if(y!==null){y.return=a.return,he=y;break e}he=a.return}}if(Oe=i,Br(),Pn&&typeof Pn.onPostCommitFiberRoot=="function")try{Pn.onPostCommitFiberRoot(Eu,t)}catch{}r=!0}return r}finally{De=n,an.transition=e}}return!1}function Ng(t,e,n){e=ao(n,e),e=h0(t,e,1),t=Ir(t,e,1),e=jt(),t!==null&&(ra(t,1,e),Ht(t,e))}function Ze(t,e,n){if(t.tag===3)Ng(t,t,n);else for(;e!==null;){if(e.tag===3){Ng(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ar===null||!Ar.has(r))){t=ao(n,t),t=d0(e,t,1),e=Ir(e,t,1),t=jt(),e!==null&&(ra(e,1,t),Ht(e,t));break}}e=e.return}}function mI(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=jt(),t.pingedLanes|=t.suspendedLanes&n,pt===t&&(Et&n)===n&&(ct===4||ct===3&&(Et&130023424)===Et&&500>it()-Id?ii(t,0):bd|=n),Ht(t,e)}function C0(t,e){e===0&&(t.mode&1?(e=$a,$a<<=1,!($a&130023424)&&($a=4194304)):e=1);var n=jt();t=Gn(t,e),t!==null&&(ra(t,e,n),Ht(t,n))}function gI(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),C0(t,n)}function yI(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(se(314))}r!==null&&r.delete(e),C0(t,n)}var D0;D0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||$t.current)qt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return qt=!1,iI(t,e,n);qt=!!(t.flags&131072)}else qt=!1,We&&e.flags&1048576&&V_(e,$l,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;vl(t,e),t=e.pendingProps;var i=ro(e,Nt.current);Qi(e,n),i=yd(null,e,r,t,i,n);var o=vd();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,zt(r)?(o=!0,Bl(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,hd(e),i.updater=ku,e.stateNode=i,i._reactInternals=e,Wf(e,r,t,n),e=Qf(null,e,r,!0,o,n)):(e.tag=0,We&&o&&od(e),Mt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(vl(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=_I(r),t=dn(r,t),i){case 0:e=Gf(null,e,r,t,n);break e;case 1:e=Tg(null,e,r,t,n);break e;case 11:e=Eg(null,e,r,t,n);break e;case 14:e=wg(null,e,r,dn(r.type,t),n);break e}throw Error(se(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:dn(r,i),Gf(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:dn(r,i),Tg(t,e,r,i,n);case 3:e:{if(y0(e),t===null)throw Error(se(387));r=e.pendingProps,o=e.memoizedState,i=o.element,z_(t,e),Wl(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=ao(Error(se(423)),e),e=bg(t,e,r,n,i);break e}else if(r!==i){i=ao(Error(se(424)),e),e=bg(t,e,r,n,i);break e}else for(Xt=br(e.stateNode.containerInfo.firstChild),Zt=e,We=!0,mn=null,n=q_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(io(),r===i){e=Qn(t,e,n);break e}Mt(t,e,r,n)}e=e.child}return e;case 5:return H_(e),t===null&&$f(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,Vf(r,i)?s=null:o!==null&&Vf(r,o)&&(e.flags|=32),g0(t,e),Mt(t,e,s,n),e.child;case 6:return t===null&&$f(e),null;case 13:return v0(t,e,n);case 4:return dd(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=oo(e,null,r,n):Mt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:dn(r,i),Eg(t,e,r,i,n);case 7:return Mt(t,e,e.pendingProps,n),e.child;case 8:return Mt(t,e,e.pendingProps.children,n),e.child;case 12:return Mt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,Fe(zl,r._currentValue),r._currentValue=s,o!==null)if(_n(o.value,s)){if(o.children===i.children&&!$t.current){e=Qn(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=zn(-1,n&-n),l.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),zf(o.return,n,e),a.lanes|=n;break}l=l.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(se(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),zf(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Mt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Qi(e,n),i=ln(i),r=r(i),e.flags|=1,Mt(t,e,r,n),e.child;case 14:return r=e.type,i=dn(r,e.pendingProps),i=dn(r.type,i),wg(t,e,r,i,n);case 15:return p0(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:dn(r,i),vl(t,e),e.tag=1,zt(r)?(t=!0,Bl(e)):t=!1,Qi(e,n),f0(e,r,i),Wf(e,r,i,n),Qf(null,e,r,!0,t,n);case 19:return _0(t,e,n);case 22:return m0(t,e,n)}throw Error(se(156,e.tag))};function L0(t,e){return l_(t,e)}function vI(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sn(t,e,n,r){return new vI(t,e,n,r)}function Pd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function _I(t){if(typeof t=="function")return Pd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Kh)return 11;if(t===Gh)return 14}return 2}function kr(t,e){var n=t.alternate;return n===null?(n=sn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function wl(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")Pd(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case Ni:return oi(n.children,i,o,e);case Wh:s=8,i|=8;break;case gf:return t=sn(12,n,e,i|2),t.elementType=gf,t.lanes=o,t;case yf:return t=sn(13,n,e,i),t.elementType=yf,t.lanes=o,t;case vf:return t=sn(19,n,e,i),t.elementType=vf,t.lanes=o,t;case Hv:return Ou(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case $v:s=10;break e;case zv:s=9;break e;case Kh:s=11;break e;case Gh:s=14;break e;case ur:s=16,r=null;break e}throw Error(se(130,t==null?t:typeof t,""))}return e=sn(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function oi(t,e,n,r){return t=sn(7,t,r,e),t.lanes=n,t}function Ou(t,e,n,r){return t=sn(22,t,r,e),t.elementType=Hv,t.lanes=n,t.stateNode={isHidden:!1},t}function Gc(t,e,n){return t=sn(6,t,null,e),t.lanes=n,t}function Qc(t,e,n){return e=sn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function EI(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xc(0),this.expirationTimes=xc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xc(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function xd(t,e,n,r,i,o,s,a,l){return t=new EI(t,e,n,a,l),e===1?(e=1,o===!0&&(e|=8)):e=0,o=sn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},hd(o),t}function wI(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ri,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function M0(t){if(!t)return Dr;t=t._reactInternals;e:{if(_i(t)!==t||t.tag!==1)throw Error(se(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(zt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(se(171))}if(t.tag===1){var n=t.type;if(zt(n))return M_(t,n,e)}return e}function j0(t,e,n,r,i,o,s,a,l){return t=xd(n,r,!0,t,i,o,s,a,l),t.context=M0(null),n=t.current,r=jt(),i=Sr(n),o=zn(r,i),o.callback=e??null,Ir(n,o,i),t.current.lanes=i,ra(t,i,r),Ht(t,r),t}function Ru(t,e,n,r){var i=e.current,o=jt(),s=Sr(i);return n=M0(n),e.context===null?e.context=n:e.pendingContext=n,e=zn(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ir(i,e,s),t!==null&&(yn(t,i,s,o),ml(t,i,s)),s}function eu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Cg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Od(t,e){Cg(t,e),(t=t.alternate)&&Cg(t,e)}function TI(){return null}var V0=typeof reportError=="function"?reportError:function(t){console.error(t)};function Rd(t){this._internalRoot=t}Nu.prototype.render=Rd.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(se(409));Ru(t,e,null,null)};Nu.prototype.unmount=Rd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;fi(function(){Ru(null,t,null,null)}),e[Kn]=null}};function Nu(t){this._internalRoot=t}Nu.prototype.unstable_scheduleHydration=function(t){if(t){var e=m_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<fr.length&&e!==0&&e<fr[n].priority;n++);fr.splice(n,0,t),n===0&&y_(t)}};function Nd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Cu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Dg(){}function bI(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var c=eu(s);o.call(c)}}var s=j0(e,r,t,0,null,!1,!1,"",Dg);return t._reactRootContainer=s,t[Kn]=s.current,Ms(t.nodeType===8?t.parentNode:t),fi(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=eu(l);a.call(c)}}var l=xd(t,0,!1,null,null,!1,!1,"",Dg);return t._reactRootContainer=l,t[Kn]=l.current,Ms(t.nodeType===8?t.parentNode:t),fi(function(){Ru(e,l,n,r)}),l}function Du(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var l=eu(s);a.call(l)}}Ru(e,s,t,i)}else s=bI(n,e,t,i,r);return eu(s)}d_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ss(e.pendingLanes);n!==0&&(Xh(e,n|1),Ht(e,it()),!(Oe&6)&&(lo=it()+500,Br()))}break;case 13:fi(function(){var r=Gn(t,1);if(r!==null){var i=jt();yn(r,t,1,i)}}),Od(t,1)}};Jh=function(t){if(t.tag===13){var e=Gn(t,134217728);if(e!==null){var n=jt();yn(e,t,134217728,n)}Od(t,134217728)}};p_=function(t){if(t.tag===13){var e=Sr(t),n=Gn(t,e);if(n!==null){var r=jt();yn(n,t,e,r)}Od(t,e)}};m_=function(){return De};g_=function(t,e){var n=De;try{return De=t,e()}finally{De=n}};Pf=function(t,e,n){switch(e){case"input":if(wf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Iu(r);if(!i)throw Error(se(90));Kv(r),wf(r,i)}}}break;case"textarea":Qv(t,n);break;case"select":e=n.value,e!=null&&Hi(t,!!n.multiple,e,!1)}};n_=Ad;r_=fi;var II={usingClientEntryPoint:!1,Events:[oa,Mi,Iu,e_,t_,Ad]},es={findFiberByHostInstance:ei,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},AI={bundleType:es.bundleType,version:es.version,rendererPackageName:es.rendererPackageName,rendererConfig:es.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:er.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=s_(t),t===null?null:t.stateNode},findFiberByHostInstance:es.findFiberByHostInstance||TI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var el=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!el.isDisabled&&el.supportsFiber)try{Eu=el.inject(AI),Pn=el}catch{}}tn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=II;tn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Nd(e))throw Error(se(200));return wI(t,e,null,n)};tn.createRoot=function(t,e){if(!Nd(t))throw Error(se(299));var n=!1,r="",i=V0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=xd(t,1,!1,null,null,n,!1,r,i),t[Kn]=e.current,Ms(t.nodeType===8?t.parentNode:t),new Rd(e)};tn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(se(188)):(t=Object.keys(t).join(","),Error(se(268,t)));return t=s_(e),t=t===null?null:t.stateNode,t};tn.flushSync=function(t){return fi(t)};tn.hydrate=function(t,e,n){if(!Cu(e))throw Error(se(200));return Du(null,t,e,!0,n)};tn.hydrateRoot=function(t,e,n){if(!Nd(t))throw Error(se(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=V0;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=j0(e,null,t,1,n??null,i,!1,o,s),t[Kn]=e.current,Ms(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Nu(e)};tn.render=function(t,e,n){if(!Cu(e))throw Error(se(200));return Du(null,t,e,!1,n)};tn.unmountComponentAtNode=function(t){if(!Cu(t))throw Error(se(40));return t._reactRootContainer?(fi(function(){Du(null,null,t,!1,function(){t._reactRootContainer=null,t[Kn]=null})}),!0):!1};tn.unstable_batchedUpdates=Ad;tn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Cu(n))throw Error(se(200));if(t==null||t._reactInternals===void 0)throw Error(se(38));return Du(t,e,n,!1,r)};tn.version="18.3.1-next-f1338f8080-20240426";function F0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(F0)}catch(t){console.error(t)}}F0(),Fv.exports=tn;var U0=Fv.exports,B0,Lg=U0;B0=Lg.createRoot,Lg.hydrateRoot;var Mg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},SI=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],s=t[n++],a=t[n++],l=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},$0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],s=i+1<t.length,a=s?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,d=o>>2,h=(o&3)<<4|a>>4;let f=(a&15)<<2|c>>6,m=c&63;l||(m=64,s||(f=64)),r.push(n[d],n[h],n[f],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(q0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):SI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||c==null||h==null)throw new kI;const f=o<<2|a>>4;if(r.push(f),c!==64){const m=a<<4&240|c>>2;if(r.push(m),h!==64){const w=c<<6&192|h;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class kI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const PI=function(t){const e=q0(t);return $0.encodeByteArray(e,!0)},tu=function(t){return PI(t).replace(/\./g,"")},z0=function(t){try{return $0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OI=()=>xI().__FIREBASE_DEFAULTS__,RI=()=>{if(typeof process>"u"||typeof Mg>"u")return;const t=Mg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},NI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&z0(t[1]);return e&&JSON.parse(e)},Lu=()=>{try{return OI()||RI()||NI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},H0=t=>{var e,n;return(n=(e=Lu())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},CI=t=>{const e=H0(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},W0=()=>{var t;return(t=Lu())===null||t===void 0?void 0:t.config},K0=t=>{var e;return(e=Lu())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[tu(JSON.stringify(n)),tu(JSON.stringify(s)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function MI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ct())}function jI(){var t;const e=(t=Lu())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function VI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function FI(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function UI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function BI(){const t=Ct();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function qI(){return!jI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $I(){try{return typeof indexedDB=="object"}catch{return!1}}function zI(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HI="FirebaseError";class tr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=HI,Object.setPrototypeOf(this,tr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,aa.prototype.create)}}class aa{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?WI(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new tr(i,a,r)}}function WI(t,e){return t.replace(KI,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const KI=/\{\$([^}]+)}/g;function GI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function nu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],s=e[i];if(jg(o)&&jg(s)){if(!nu(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function jg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function la(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ls(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function us(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function QI(t,e){const n=new YI(t,e);return n.subscribe.bind(n)}class YI{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");XI(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Yc),i.error===void 0&&(i.error=Yc),i.complete===void 0&&(i.complete=Yc);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function XI(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Yc(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tt(t){return t&&t._delegate?t._delegate:t}class hi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new DI;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(eA(e))try{this.getOrInitializeService({instanceIdentifier:Jr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Jr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Jr){return this.instances.has(e)}getOptions(e=Jr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:ZI(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Jr){return this.component?this.component.multipleInstances?e:Jr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ZI(t){return t===Jr?void 0:t}function eA(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new JI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Pe||(Pe={}));const nA={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},rA=Pe.INFO,iA={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},oA=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=iA[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Cd{constructor(e){this.name=e,this._logLevel=rA,this._logHandler=oA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?nA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...e),this._logHandler(this,Pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...e),this._logHandler(this,Pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...e),this._logHandler(this,Pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...e),this._logHandler(this,Pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...e),this._logHandler(this,Pe.ERROR,...e)}}const sA=(t,e)=>e.some(n=>t instanceof n);let Vg,Fg;function aA(){return Vg||(Vg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lA(){return Fg||(Fg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const G0=new WeakMap,ah=new WeakMap,Q0=new WeakMap,Xc=new WeakMap,Dd=new WeakMap;function uA(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Pr(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&G0.set(n,t)}).catch(()=>{}),Dd.set(e,t),e}function cA(t){if(ah.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});ah.set(t,e)}let lh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ah.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Q0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Pr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function fA(t){lh=t(lh)}function hA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Jc(this),e,...n);return Q0.set(r,e.sort?e.sort():[e]),Pr(r)}:lA().includes(t)?function(...e){return t.apply(Jc(this),e),Pr(G0.get(this))}:function(...e){return Pr(t.apply(Jc(this),e))}}function dA(t){return typeof t=="function"?hA(t):(t instanceof IDBTransaction&&cA(t),sA(t,aA())?new Proxy(t,lh):t)}function Pr(t){if(t instanceof IDBRequest)return uA(t);if(Xc.has(t))return Xc.get(t);const e=dA(t);return e!==t&&(Xc.set(t,e),Dd.set(e,t)),e}const Jc=t=>Dd.get(t);function pA(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),a=Pr(s);return r&&s.addEventListener("upgradeneeded",l=>{r(Pr(s.result),l.oldVersion,l.newVersion,Pr(s.transaction),l)}),n&&s.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{o&&l.addEventListener("close",()=>o()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const mA=["get","getKey","getAll","getAllKeys","count"],gA=["put","add","delete","clear"],Zc=new Map;function Ug(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Zc.get(e))return Zc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=gA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||mA.includes(n)))return;const o=async function(s,...a){const l=this.transaction(s,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return Zc.set(e,o),o}fA(t=>({...t,get:(e,n,r)=>Ug(e,n)||t.get(e,n,r),has:(e,n)=>!!Ug(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(vA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function vA(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const uh="@firebase/app",Bg="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yn=new Cd("@firebase/app"),_A="@firebase/app-compat",EA="@firebase/analytics-compat",wA="@firebase/analytics",TA="@firebase/app-check-compat",bA="@firebase/app-check",IA="@firebase/auth",AA="@firebase/auth-compat",SA="@firebase/database",kA="@firebase/data-connect",PA="@firebase/database-compat",xA="@firebase/functions",OA="@firebase/functions-compat",RA="@firebase/installations",NA="@firebase/installations-compat",CA="@firebase/messaging",DA="@firebase/messaging-compat",LA="@firebase/performance",MA="@firebase/performance-compat",jA="@firebase/remote-config",VA="@firebase/remote-config-compat",FA="@firebase/storage",UA="@firebase/storage-compat",BA="@firebase/firestore",qA="@firebase/vertexai-preview",$A="@firebase/firestore-compat",zA="firebase",HA="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ch="[DEFAULT]",WA={[uh]:"fire-core",[_A]:"fire-core-compat",[wA]:"fire-analytics",[EA]:"fire-analytics-compat",[bA]:"fire-app-check",[TA]:"fire-app-check-compat",[IA]:"fire-auth",[AA]:"fire-auth-compat",[SA]:"fire-rtdb",[kA]:"fire-data-connect",[PA]:"fire-rtdb-compat",[xA]:"fire-fn",[OA]:"fire-fn-compat",[RA]:"fire-iid",[NA]:"fire-iid-compat",[CA]:"fire-fcm",[DA]:"fire-fcm-compat",[LA]:"fire-perf",[MA]:"fire-perf-compat",[jA]:"fire-rc",[VA]:"fire-rc-compat",[FA]:"fire-gcs",[UA]:"fire-gcs-compat",[BA]:"fire-fst",[$A]:"fire-fst-compat",[qA]:"fire-vertex","fire-js":"fire-js",[zA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ru=new Map,KA=new Map,fh=new Map;function qg(t,e){try{t.container.addComponent(e)}catch(n){Yn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function uo(t){const e=t.name;if(fh.has(e))return Yn.debug(`There were multiple attempts to register component ${e}.`),!1;fh.set(e,t);for(const n of ru.values())qg(n,t);for(const n of KA.values())qg(n,t);return!0}function Ld(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function kn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xr=new aa("app","Firebase",GA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new hi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const To=HA;function Y0(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:ch,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw xr.create("bad-app-name",{appName:String(i)});if(n||(n=W0()),!n)throw xr.create("no-options");const o=ru.get(i);if(o){if(nu(n,o.options)&&nu(r,o.config))return o;throw xr.create("duplicate-app",{appName:i})}const s=new tA(i);for(const l of fh.values())s.addComponent(l);const a=new QA(n,r,s);return ru.set(i,a),a}function X0(t=ch){const e=ru.get(t);if(!e&&t===ch&&W0())return Y0();if(!e)throw xr.create("no-app",{appName:t});return e}function Or(t,e,n){var r;let i=(r=WA[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Yn.warn(a.join(" "));return}uo(new hi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA="firebase-heartbeat-database",XA=1,Hs="firebase-heartbeat-store";let ef=null;function J0(){return ef||(ef=pA(YA,XA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Hs)}catch(n){console.warn(n)}}}}).catch(t=>{throw xr.create("idb-open",{originalErrorMessage:t.message})})),ef}async function JA(t){try{const n=(await J0()).transaction(Hs),r=await n.objectStore(Hs).get(Z0(t));return await n.done,r}catch(e){if(e instanceof tr)Yn.warn(e.message);else{const n=xr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Yn.warn(n.message)}}}async function $g(t,e){try{const r=(await J0()).transaction(Hs,"readwrite");await r.objectStore(Hs).put(e,Z0(t)),await r.done}catch(n){if(n instanceof tr)Yn.warn(n.message);else{const r=xr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Yn.warn(r.message)}}}function Z0(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA=1024,eS=30*24*60*60*1e3;class tS{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new rS(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=zg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const a=new Date(s.date).valueOf();return Date.now()-a<=eS}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Yn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=zg(),{heartbeatsToSend:r,unsentEntries:i}=nS(this._heartbeatsCache.heartbeats),o=tu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Yn.warn(n),""}}}function zg(){return new Date().toISOString().substring(0,10)}function nS(t,e=ZA){const n=[];let r=t.slice();for(const i of t){const o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),Hg(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Hg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class rS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $I()?zI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await JA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return $g(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return $g(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Hg(t){return tu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iS(t){uo(new hi("platform-logger",e=>new yA(e),"PRIVATE")),uo(new hi("heartbeat",e=>new tS(e),"PRIVATE")),Or(uh,Bg,t),Or(uh,Bg,"esm2017"),Or("fire-js","")}iS("");var oS="firebase",sS="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Or(oS,sS,"app");function Md(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function e1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const aS=e1,t1=new aa("auth","Firebase",e1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iu=new Cd("@firebase/auth");function lS(t,...e){iu.logLevel<=Pe.WARN&&iu.warn(`Auth (${To}): ${t}`,...e)}function Tl(t,...e){iu.logLevel<=Pe.ERROR&&iu.error(`Auth (${To}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function En(t,...e){throw jd(t,...e)}function On(t,...e){return jd(t,...e)}function n1(t,e,n){const r=Object.assign(Object.assign({},aS()),{[e]:n});return new aa("auth","Firebase",r).create(e,{appName:t.name})}function Hn(t){return n1(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function jd(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return t1.create(t,...e)}function ye(t,e,...n){if(!t)throw jd(e,...n)}function Bn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Tl(e),new Error(e)}function Xn(t,e){t||Bn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function uS(){return Wg()==="http:"||Wg()==="https:"}function Wg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(uS()||FI()||"connection"in navigator)?navigator.onLine:!0}function fS(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e,n){this.shortDelay=e,this.longDelay=n,Xn(n>e,"Short delay should be less than long delay!"),this.isMobile=MI()||UI()}get(){return cS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vd(t,e){Xn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Bn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Bn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Bn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS=new ua(3e4,6e4);function qr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function nr(t,e,n,r,i={}){return i1(t,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});const a=la(Object.assign({key:t.config.apiKey},s)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},o);return VI()||(c.referrerPolicy="no-referrer"),r1.fetch()(o1(t,t.config.apiHost,n,a),c)})}async function i1(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},hS),e);try{const i=new mS(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=await o.json();if("needConfirmation"in s)throw tl(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const a=o.ok?s.errorMessage:s.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw tl(t,"credential-already-in-use",s);if(l==="EMAIL_EXISTS")throw tl(t,"email-already-in-use",s);if(l==="USER_DISABLED")throw tl(t,"user-disabled",s);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw n1(t,d,c);En(t,d)}}catch(i){if(i instanceof tr)throw i;En(t,"network-request-failed",{message:String(i)})}}async function ca(t,e,n,r,i={}){const o=await nr(t,e,n,r,i);return"mfaPendingCredential"in o&&En(t,"multi-factor-auth-required",{_serverResponse:o}),o}function o1(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Vd(t.config,i):`${t.config.apiScheme}://${i}`}function pS(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class mS{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(On(this.auth,"network-request-failed")),dS.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function tl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=On(t,e,r);return i.customData._tokenResponse=n,i}function Kg(t){return t!==void 0&&t.enterprise!==void 0}class gS{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return pS(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function yS(t,e){return nr(t,"GET","/v2/recaptchaConfig",qr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vS(t,e){return nr(t,"POST","/v1/accounts:delete",e)}async function s1(t,e){return nr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bs(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function _S(t,e=!1){const n=tt(t),r=await n.getIdToken(e),i=Fd(r);ye(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,s=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:bs(tf(i.auth_time)),issuedAtTime:bs(tf(i.iat)),expirationTime:bs(tf(i.exp)),signInProvider:s||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function tf(t){return Number(t)*1e3}function Fd(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Tl("JWT malformed, contained fewer than 3 sections"),null;try{const i=z0(n);return i?JSON.parse(i):(Tl("Failed to decode base64 JWT payload"),null)}catch(i){return Tl("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Gg(t){const e=Fd(t);return ye(e,"internal-error"),ye(typeof e.exp<"u","internal-error"),ye(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function co(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof tr&&ES(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function ES({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=bs(this.lastLoginAt),this.creationTime=bs(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ou(t){var e;const n=t.auth,r=await t.getIdToken(),i=await co(t,s1(n,{idToken:r}));ye(i==null?void 0:i.users.length,n,"internal-error");const o=i.users[0];t._notifyReloadListener(o);const s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?a1(o.providerUserInfo):[],a=bS(t.providerData,s),l=t.isAnonymous,c=!(t.email&&o.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new dh(o.createdAt,o.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function TS(t){const e=tt(t);await ou(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function bS(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function a1(t){return t.map(e=>{var{providerId:n}=e,r=Md(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IS(t,e){const n=await i1(t,{},async()=>{const r=la({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=o1(t,i,"/v1/token",`key=${o}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",r1.fetch()(s,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function AS(t,e){return nr(t,"POST","/v2/accounts:revokeToken",qr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ye(e.idToken,"internal-error"),ye(typeof e.idToken<"u","internal-error"),ye(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Gg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ye(e.length!==0,"internal-error");const n=Gg(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ye(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:o}=await IS(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new Xi;return r&&(ye(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(ye(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(ye(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Xi,this.toJSON())}_performRefresh(){return Bn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lr(t,e){ye(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class qn{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=Md(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new wS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new dh(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await co(this,this.stsTokenManager.getToken(this.auth,e));return ye(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return _S(this,e)}reload(){return TS(this)}_assign(e){this!==e&&(ye(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new qn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await ou(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(kn(this.auth.app))return Promise.reject(Hn(this.auth));const e=await this.getIdToken();return await co(this,vS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,l,c,d;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,m=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,w=(s=n.photoURL)!==null&&s!==void 0?s:void 0,_=(a=n.tenantId)!==null&&a!==void 0?a:void 0,E=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,g=(c=n.createdAt)!==null&&c!==void 0?c:void 0,p=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:v,emailVerified:y,isAnonymous:k,providerData:N,stsTokenManager:S}=n;ye(v&&S,e,"internal-error");const T=Xi.fromJSON(this.name,S);ye(typeof v=="string",e,"internal-error"),lr(h,e.name),lr(f,e.name),ye(typeof y=="boolean",e,"internal-error"),ye(typeof k=="boolean",e,"internal-error"),lr(m,e.name),lr(w,e.name),lr(_,e.name),lr(E,e.name),lr(g,e.name),lr(p,e.name);const P=new qn({uid:v,auth:e,email:f,emailVerified:y,displayName:h,isAnonymous:k,photoURL:w,phoneNumber:m,tenantId:_,stsTokenManager:T,createdAt:g,lastLoginAt:p});return N&&Array.isArray(N)&&(P.providerData=N.map(b=>Object.assign({},b))),E&&(P._redirectEventId=E),P}static async _fromIdTokenResponse(e,n,r=!1){const i=new Xi;i.updateFromServerResponse(n);const o=new qn({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await ou(o),o}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];ye(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?a1(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),a=new Xi;a.updateFromIdToken(r);const l=new qn({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new dh(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qg=new Map;function $n(t){Xn(t instanceof Function,"Expected a class definition");let e=Qg.get(t);return e?(Xn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Qg.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}l1.type="NONE";const Yg=l1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bl(t,e,n){return`firebase:${t}:${e}:${n}`}class Ji{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=bl(this.userKey,i.apiKey,o),this.fullPersistenceKey=bl("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?qn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ji($n(Yg),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let o=i[0]||$n(Yg);const s=bl(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(s);if(d){const h=qn._fromJSON(e,d);c!==o&&(a=h),o=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!o._shouldAllowMigration||!l.length?new Ji(o,e,r):(o=l[0],a&&await o._set(s,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==o)try{await c._remove(s)}catch{}})),new Ji(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xg(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(h1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(u1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(p1(e))return"Blackberry";if(m1(e))return"Webos";if(c1(e))return"Safari";if((e.includes("chrome/")||f1(e))&&!e.includes("edge/"))return"Chrome";if(d1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function u1(t=Ct()){return/firefox\//i.test(t)}function c1(t=Ct()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function f1(t=Ct()){return/crios\//i.test(t)}function h1(t=Ct()){return/iemobile/i.test(t)}function d1(t=Ct()){return/android/i.test(t)}function p1(t=Ct()){return/blackberry/i.test(t)}function m1(t=Ct()){return/webos/i.test(t)}function Ud(t=Ct()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function SS(t=Ct()){var e;return Ud(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function kS(){return BI()&&document.documentMode===10}function g1(t=Ct()){return Ud(t)||d1(t)||m1(t)||p1(t)||/windows phone/i.test(t)||h1(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1(t,e=[]){let n;switch(t){case"Browser":n=Xg(Ct());break;case"Worker":n=`${Xg(Ct())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${To}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((s,a)=>{try{const l=e(o);s(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xS(t,e={}){return nr(t,"GET","/v2/passwordPolicy",qr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OS=6;class RS{constructor(e){var n,r,i,o;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:OS,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsUppercaseLetter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(s=l.containsNumericCharacter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Jg(this),this.idTokenSubscription=new Jg(this),this.beforeStateQueue=new PS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=t1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=$n(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Ji.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await s1(this,{idToken:e}),r=await qn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(kn(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!s||s===a)&&(l!=null&&l.user)&&(i=l.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ye(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ou(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=fS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(kn(this.app))return Promise.reject(Hn(this));const n=e?tt(e):null;return n&&ye(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ye(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return kn(this.app)?Promise.reject(Hn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return kn(this.app)?Promise.reject(Hn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence($n(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await xS(this),n=new RS(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new aa("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await AS(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&$n(e)||this._popupRedirectResolver;ye(n,this,"argument-error"),this.redirectPersistenceManager=await Ji.create(this,[$n(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ye(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{s=!0,l()}}else{const l=e.addObserver(n);return()=>{s=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=y1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&lS(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ei(t){return tt(t)}class Jg{constructor(e){this.auth=e,this.observer=null,this.addObserver=QI(n=>this.observer=n)}get next(){return ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function CS(t){Mu=t}function v1(t){return Mu.loadJS(t)}function DS(){return Mu.recaptchaEnterpriseScript}function LS(){return Mu.gapiScript}function MS(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const jS="recaptcha-enterprise",VS="NO_RECAPTCHA";class FS{constructor(e){this.type=jS,this.auth=Ei(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(s,a)=>{yS(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new gS(l);return o.tenantId==null?o._agentRecaptchaConfig=c:o._tenantRecaptchaConfigs[o.tenantId]=c,s(c.siteKey)}}).catch(l=>{a(l)})})}function i(o,s,a){const l=window.grecaptcha;Kg(l)?l.enterprise.ready(()=>{l.enterprise.execute(o,{action:e}).then(c=>{s(c)}).catch(()=>{s(VS)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,s)=>{r(this.auth).then(a=>{if(!n&&Kg(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let l=DS();l.length!==0&&(l+=a),v1(l).then(()=>{i(a,o,s)}).catch(c=>{s(c)})}}).catch(a=>{s(a)})})}}async function Zg(t,e,n,r=!1){const i=new FS(t);let o;try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const s=Object.assign({},e);return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s}async function ph(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Zg(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const s=await Zg(t,e,n,n==="getOobCode");return r(t,s)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function US(t,e){const n=Ld(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),o=n.getOptions();if(nu(o,e??{}))return i;En(i,"already-initialized")}return n.initialize({options:e})}function BS(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map($n);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function qS(t,e,n){const r=Ei(t);ye(r._canInitEmulator,r,"emulator-config-failed"),ye(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=_1(e),{host:s,port:a}=$S(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${o}//${s}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),zS()}function _1(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function $S(t){const e=_1(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:ey(r.substr(o.length+1))}}else{const[o,s]=r.split(":");return{host:o,port:ey(s)}}}function ey(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function zS(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Bn("not implemented")}_getIdTokenResponse(e){return Bn("not implemented")}_linkToIdToken(e,n){return Bn("not implemented")}_getReauthenticationResolver(e){return Bn("not implemented")}}async function HS(t,e){return nr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WS(t,e){return ca(t,"POST","/v1/accounts:signInWithPassword",qr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KS(t,e){return ca(t,"POST","/v1/accounts:signInWithEmailLink",qr(t,e))}async function GS(t,e){return ca(t,"POST","/v1/accounts:signInWithEmailLink",qr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws extends Bd{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Ws(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Ws(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ph(e,n,"signInWithPassword",WS);case"emailLink":return KS(e,{email:this._email,oobCode:this._password});default:En(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ph(e,r,"signUpPassword",HS);case"emailLink":return GS(e,{idToken:n,email:this._email,oobCode:this._password});default:En(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zi(t,e){return ca(t,"POST","/v1/accounts:signInWithIdp",qr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS="http://localhost";class di extends Bd{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new di(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):En("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,o=Md(n,["providerId","signInMethod"]);if(!r||!i)return null;const s=new di(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){const n=this.buildRequest();return Zi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Zi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Zi(e,n)}buildRequest(){const e={requestUri:QS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=la(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YS(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function XS(t){const e=ls(us(t)).link,n=e?ls(us(e)).deep_link_id:null,r=ls(us(t)).deep_link_id;return(r?ls(us(r)).link:null)||r||n||e||t}class qd{constructor(e){var n,r,i,o,s,a;const l=ls(us(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,d=(r=l.oobCode)!==null&&r!==void 0?r:null,h=YS((i=l.mode)!==null&&i!==void 0?i:null);ye(c&&d&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=d,this.continueUrl=(o=l.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=l.languageCode)!==null&&s!==void 0?s:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=XS(e);try{return new qd(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(){this.providerId=bo.PROVIDER_ID}static credential(e,n){return Ws._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=qd.parseLink(n);return ye(r,"argument-error"),Ws._fromEmailAndCode(e,r.code,r.tenantId)}}bo.PROVIDER_ID="password";bo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";bo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa extends E1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr extends fa{constructor(){super("facebook.com")}static credential(e){return di._fromParams({providerId:dr.PROVIDER_ID,signInMethod:dr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return dr.credentialFromTaggedObject(e)}static credentialFromError(e){return dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return dr.credential(e.oauthAccessToken)}catch{return null}}}dr.FACEBOOK_SIGN_IN_METHOD="facebook.com";dr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr extends fa{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return di._fromParams({providerId:pr.PROVIDER_ID,signInMethod:pr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return pr.credentialFromTaggedObject(e)}static credentialFromError(e){return pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return pr.credential(n,r)}catch{return null}}}pr.GOOGLE_SIGN_IN_METHOD="google.com";pr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr extends fa{constructor(){super("github.com")}static credential(e){return di._fromParams({providerId:mr.PROVIDER_ID,signInMethod:mr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mr.credentialFromTaggedObject(e)}static credentialFromError(e){return mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return mr.credential(e.oauthAccessToken)}catch{return null}}}mr.GITHUB_SIGN_IN_METHOD="github.com";mr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr extends fa{constructor(){super("twitter.com")}static credential(e,n){return di._fromParams({providerId:gr.PROVIDER_ID,signInMethod:gr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return gr.credentialFromTaggedObject(e)}static credentialFromError(e){return gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return gr.credential(n,r)}catch{return null}}}gr.TWITTER_SIGN_IN_METHOD="twitter.com";gr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JS(t,e){return ca(t,"POST","/v1/accounts:signUp",qr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const o=await qn._fromIdTokenResponse(e,r,i),s=ty(r);return new pi({user:o,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=ty(r);return new pi({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function ty(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su extends tr{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,su.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new su(e,n,r,i)}}function w1(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?su._fromErrorAndOperation(t,o,e,r):o})}async function ZS(t,e,n=!1){const r=await co(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return pi._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ek(t,e,n=!1){const{auth:r}=t;if(kn(r.app))return Promise.reject(Hn(r));const i="reauthenticate";try{const o=await co(t,w1(r,i,e,t),n);ye(o.idToken,r,"internal-error");const s=Fd(o.idToken);ye(s,r,"internal-error");const{sub:a}=s;return ye(t.uid===a,r,"user-mismatch"),pi._forOperation(t,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&En(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T1(t,e,n=!1){if(kn(t.app))return Promise.reject(Hn(t));const r="signIn",i=await w1(t,r,e),o=await pi._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}async function tk(t,e){return T1(Ei(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b1(t){const e=Ei(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function nk(t,e,n){if(kn(t.app))return Promise.reject(Hn(t));const r=Ei(t),s=await ph(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",JS).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&b1(t),l}),a=await pi._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(a.user),a}function rk(t,e,n){return kn(t.app)?Promise.reject(Hn(t)):tk(tt(t),bo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&b1(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ik(t,e){return nr(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ok(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=tt(t),o={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},s=await co(r,ik(r.auth,o));r.displayName=s.displayName||null,r.photoURL=s.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(s)}function sk(t,e,n,r){return tt(t).onIdTokenChanged(e,n,r)}function ak(t,e,n){return tt(t).beforeAuthStateChanged(e,n)}function lk(t,e,n,r){return tt(t).onAuthStateChanged(e,n,r)}function uk(t){return tt(t).signOut()}const au="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(au,"1"),this.storage.removeItem(au),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ck=1e3,fk=10;class A1 extends I1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=g1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((s,a,l)=>{this.notifyListeners(s,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!n&&this.localCache[r]===s||this.notifyListeners(r,s)},o=this.storage.getItem(r);kS()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,fk):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},ck)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}A1.type="LOCAL";const hk=A1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1 extends I1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}S1.type="SESSION";const k1=S1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dk(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new ju(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:o}=n.data,s=this.handlersMap[i];if(!(s!=null&&s.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(s).map(async c=>c(n.origin,o)),l=await dk(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ju.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $d(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,l)=>{const c=$d("",20);i.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(h){const f=h;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(d),o=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(f.data.response);break;default:clearTimeout(d),clearTimeout(o),l(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rn(){return window}function mk(t){Rn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P1(){return typeof Rn().WorkerGlobalScope<"u"&&typeof Rn().importScripts=="function"}async function gk(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function yk(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function vk(){return P1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x1="firebaseLocalStorageDb",_k=1,lu="firebaseLocalStorage",O1="fbase_key";class ha{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Vu(t,e){return t.transaction([lu],e?"readwrite":"readonly").objectStore(lu)}function Ek(){const t=indexedDB.deleteDatabase(x1);return new ha(t).toPromise()}function mh(){const t=indexedDB.open(x1,_k);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(lu,{keyPath:O1})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(lu)?e(r):(r.close(),await Ek(),e(await mh()))})})}async function ny(t,e,n){const r=Vu(t,!0).put({[O1]:e,value:n});return new ha(r).toPromise()}async function wk(t,e){const n=Vu(t,!1).get(e),r=await new ha(n).toPromise();return r===void 0?null:r.value}function ry(t,e){const n=Vu(t,!0).delete(e);return new ha(n).toPromise()}const Tk=800,bk=3;class R1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await mh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>bk)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return P1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ju._getInstance(vk()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await gk(),!this.activeServiceWorker)return;this.sender=new pk(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||yk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await mh();return await ny(e,au,"1"),await ry(e,au),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>ny(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>wk(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>ry(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=Vu(i,!1).getAll();return new ha(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Tk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}R1.type="LOCAL";const Ik=R1;new ua(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ak(t,e){return e?$n(e):(ye(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd extends Bd{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Zi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Zi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Zi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Sk(t){return T1(t.auth,new zd(t),t.bypassAuthState)}function kk(t){const{auth:e,user:n}=t;return ye(n,e,"internal-error"),ek(n,new zd(t),t.bypassAuthState)}async function Pk(t){const{auth:e,user:n}=t;return ye(n,e,"internal-error"),ZS(n,new zd(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Sk;case"linkViaPopup":case"linkViaRedirect":return Pk;case"reauthViaPopup":case"reauthViaRedirect":return kk;default:En(this.auth,"internal-error")}}resolve(e){Xn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Xn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xk=new ua(2e3,1e4);class $i extends N1{constructor(e,n,r,i,o){super(e,n,i,o),this.provider=r,this.authWindow=null,this.pollId=null,$i.currentPopupAction&&$i.currentPopupAction.cancel(),$i.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ye(e,this.auth,"internal-error"),e}async onExecution(){Xn(this.filter.length===1,"Popup operations only handle one event");const e=$d();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(On(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(On(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,$i.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(On(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,xk.get())};e()}}$i.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ok="pendingRedirect",Il=new Map;class Rk extends N1{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Il.get(this.auth._key());if(!e){try{const r=await Nk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Il.set(this.auth._key(),e)}return this.bypassAuthState||Il.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Nk(t,e){const n=Lk(e),r=Dk(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function Ck(t,e){Il.set(t._key(),e)}function Dk(t){return $n(t._redirectPersistence)}function Lk(t){return bl(Ok,t.config.apiKey,t.name)}async function Mk(t,e,n=!1){if(kn(t.app))return Promise.reject(Hn(t));const r=Ei(t),i=Ak(r,e),s=await new Rk(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jk=10*60*1e3;class Vk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Fk(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!C1(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(On(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=jk&&this.cachedEventUids.clear(),this.cachedEventUids.has(iy(e))}saveEventToCache(e){this.cachedEventUids.add(iy(e)),this.lastProcessedEventTime=Date.now()}}function iy(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function C1({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Fk(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return C1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uk(t,e={}){return nr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,qk=/^https?/;async function $k(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Uk(t);for(const n of e)try{if(zk(n))return}catch{}En(t,"unauthorized-domain")}function zk(t){const e=hh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!qk.test(n))return!1;if(Bk.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hk=new ua(3e4,6e4);function oy(){const t=Rn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Wk(t){return new Promise((e,n)=>{var r,i,o;function s(){oy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{oy(),n(On(t,"network-request-failed"))},timeout:Hk.get()})}if(!((i=(r=Rn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Rn().gapi)===null||o===void 0)&&o.load)s();else{const a=MS("iframefcb");return Rn()[a]=()=>{gapi.load?s():n(On(t,"network-request-failed"))},v1(`${LS()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Al=null,e})}let Al=null;function Kk(t){return Al=Al||Wk(t),Al}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gk=new ua(5e3,15e3),Qk="__/auth/iframe",Yk="emulator/auth/iframe",Xk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Jk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Zk(t){const e=t.config;ye(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Vd(e,Yk):`https://${t.config.authDomain}/${Qk}`,r={apiKey:e.apiKey,appName:t.name,v:To},i=Jk.get(t.config.apiHost);i&&(r.eid=i);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${la(r).slice(1)}`}async function e2(t){const e=await Kk(t),n=Rn().gapi;return ye(n,t,"internal-error"),e.open({where:document.body,url:Zk(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Xk,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const s=On(t,"network-request-failed"),a=Rn().setTimeout(()=>{o(s)},Gk.get());function l(){Rn().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{o(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},n2=500,r2=600,i2="_blank",o2="http://localhost";class sy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function s2(t,e,n,r=n2,i=r2){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},t2),{width:r.toString(),height:i.toString(),top:o,left:s}),c=Ct().toLowerCase();n&&(a=f1(c)?i2:n),u1(c)&&(e=e||o2,l.scrollbars="yes");const d=Object.entries(l).reduce((f,[m,w])=>`${f}${m}=${w},`,"");if(SS(c)&&a!=="_self")return a2(e||"",a),new sy(null);const h=window.open(e||"",a,d);ye(h,t,"popup-blocked");try{h.focus()}catch{}return new sy(h)}function a2(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2="__/auth/handler",u2="emulator/auth/handler",c2=encodeURIComponent("fac");async function ay(t,e,n,r,i,o){ye(t.config.authDomain,t,"auth-domain-config-required"),ye(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:To,eventId:i};if(e instanceof E1){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",GI(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))s[d]=h}if(e instanceof fa){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(s.scopes=d.join(","))}t.tenantId&&(s.tid=t.tenantId);const a=s;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),c=l?`#${c2}=${encodeURIComponent(l)}`:"";return`${f2(t)}?${la(a).slice(1)}${c}`}function f2({config:t}){return t.emulator?Vd(t,u2):`https://${t.authDomain}/${l2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nf="webStorageSupport";class h2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=k1,this._completeRedirectFn=Mk,this._overrideRedirectResult=Ck}async _openPopup(e,n,r,i){var o;Xn((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await ay(e,n,r,hh(),i);return s2(e,s,$d())}async _openRedirect(e,n,r,i){await this._originValidation(e);const o=await ay(e,n,r,hh(),i);return mk(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Xn(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await e2(e),r=new Vk(e);return n.register("authEvent",i=>(ye(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(nf,{type:nf},i=>{var o;const s=(o=i==null?void 0:i[0])===null||o===void 0?void 0:o[nf];s!==void 0&&n(!!s),En(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=$k(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return g1()||c1()||Ud()}}const d2=h2;var ly="@firebase/auth",uy="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m2(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function g2(t){uo(new hi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;ye(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:y1(t)},c=new NS(r,i,o,l);return BS(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),uo(new hi("auth-internal",e=>{const n=Ei(e.getProvider("auth").getImmediate());return(r=>new p2(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Or(ly,uy,m2(t)),Or(ly,uy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y2=5*60,v2=K0("authIdTokenMaxAge")||y2;let cy=null;const _2=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>v2)return;const i=n==null?void 0:n.token;cy!==i&&(cy=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function E2(t=X0()){const e=Ld(t,"auth");if(e.isInitialized())return e.getImmediate();const n=US(t,{popupRedirectResolver:d2,persistence:[Ik,hk,k1]}),r=K0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const s=_2(o.toString());ak(n,s,()=>s(n.currentUser)),sk(n,a=>s(a))}}const i=H0("auth");return i&&qS(n,`http://${i}`),n}function w2(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}CS({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const o=On("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",w2().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});g2("Browser");var fy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var si,D1;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,T){function P(){}P.prototype=T.prototype,S.D=T.prototype,S.prototype=new P,S.prototype.constructor=S,S.C=function(b,I,x){for(var O=Array(arguments.length-2),L=2;L<arguments.length;L++)O[L-2]=arguments[L];return T.prototype[I].apply(b,O)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,T,P){P||(P=0);var b=Array(16);if(typeof T=="string")for(var I=0;16>I;++I)b[I]=T.charCodeAt(P++)|T.charCodeAt(P++)<<8|T.charCodeAt(P++)<<16|T.charCodeAt(P++)<<24;else for(I=0;16>I;++I)b[I]=T[P++]|T[P++]<<8|T[P++]<<16|T[P++]<<24;T=S.g[0],P=S.g[1],I=S.g[2];var x=S.g[3],O=T+(x^P&(I^x))+b[0]+3614090360&4294967295;T=P+(O<<7&4294967295|O>>>25),O=x+(I^T&(P^I))+b[1]+3905402710&4294967295,x=T+(O<<12&4294967295|O>>>20),O=I+(P^x&(T^P))+b[2]+606105819&4294967295,I=x+(O<<17&4294967295|O>>>15),O=P+(T^I&(x^T))+b[3]+3250441966&4294967295,P=I+(O<<22&4294967295|O>>>10),O=T+(x^P&(I^x))+b[4]+4118548399&4294967295,T=P+(O<<7&4294967295|O>>>25),O=x+(I^T&(P^I))+b[5]+1200080426&4294967295,x=T+(O<<12&4294967295|O>>>20),O=I+(P^x&(T^P))+b[6]+2821735955&4294967295,I=x+(O<<17&4294967295|O>>>15),O=P+(T^I&(x^T))+b[7]+4249261313&4294967295,P=I+(O<<22&4294967295|O>>>10),O=T+(x^P&(I^x))+b[8]+1770035416&4294967295,T=P+(O<<7&4294967295|O>>>25),O=x+(I^T&(P^I))+b[9]+2336552879&4294967295,x=T+(O<<12&4294967295|O>>>20),O=I+(P^x&(T^P))+b[10]+4294925233&4294967295,I=x+(O<<17&4294967295|O>>>15),O=P+(T^I&(x^T))+b[11]+2304563134&4294967295,P=I+(O<<22&4294967295|O>>>10),O=T+(x^P&(I^x))+b[12]+1804603682&4294967295,T=P+(O<<7&4294967295|O>>>25),O=x+(I^T&(P^I))+b[13]+4254626195&4294967295,x=T+(O<<12&4294967295|O>>>20),O=I+(P^x&(T^P))+b[14]+2792965006&4294967295,I=x+(O<<17&4294967295|O>>>15),O=P+(T^I&(x^T))+b[15]+1236535329&4294967295,P=I+(O<<22&4294967295|O>>>10),O=T+(I^x&(P^I))+b[1]+4129170786&4294967295,T=P+(O<<5&4294967295|O>>>27),O=x+(P^I&(T^P))+b[6]+3225465664&4294967295,x=T+(O<<9&4294967295|O>>>23),O=I+(T^P&(x^T))+b[11]+643717713&4294967295,I=x+(O<<14&4294967295|O>>>18),O=P+(x^T&(I^x))+b[0]+3921069994&4294967295,P=I+(O<<20&4294967295|O>>>12),O=T+(I^x&(P^I))+b[5]+3593408605&4294967295,T=P+(O<<5&4294967295|O>>>27),O=x+(P^I&(T^P))+b[10]+38016083&4294967295,x=T+(O<<9&4294967295|O>>>23),O=I+(T^P&(x^T))+b[15]+3634488961&4294967295,I=x+(O<<14&4294967295|O>>>18),O=P+(x^T&(I^x))+b[4]+3889429448&4294967295,P=I+(O<<20&4294967295|O>>>12),O=T+(I^x&(P^I))+b[9]+568446438&4294967295,T=P+(O<<5&4294967295|O>>>27),O=x+(P^I&(T^P))+b[14]+3275163606&4294967295,x=T+(O<<9&4294967295|O>>>23),O=I+(T^P&(x^T))+b[3]+4107603335&4294967295,I=x+(O<<14&4294967295|O>>>18),O=P+(x^T&(I^x))+b[8]+1163531501&4294967295,P=I+(O<<20&4294967295|O>>>12),O=T+(I^x&(P^I))+b[13]+2850285829&4294967295,T=P+(O<<5&4294967295|O>>>27),O=x+(P^I&(T^P))+b[2]+4243563512&4294967295,x=T+(O<<9&4294967295|O>>>23),O=I+(T^P&(x^T))+b[7]+1735328473&4294967295,I=x+(O<<14&4294967295|O>>>18),O=P+(x^T&(I^x))+b[12]+2368359562&4294967295,P=I+(O<<20&4294967295|O>>>12),O=T+(P^I^x)+b[5]+4294588738&4294967295,T=P+(O<<4&4294967295|O>>>28),O=x+(T^P^I)+b[8]+2272392833&4294967295,x=T+(O<<11&4294967295|O>>>21),O=I+(x^T^P)+b[11]+1839030562&4294967295,I=x+(O<<16&4294967295|O>>>16),O=P+(I^x^T)+b[14]+4259657740&4294967295,P=I+(O<<23&4294967295|O>>>9),O=T+(P^I^x)+b[1]+2763975236&4294967295,T=P+(O<<4&4294967295|O>>>28),O=x+(T^P^I)+b[4]+1272893353&4294967295,x=T+(O<<11&4294967295|O>>>21),O=I+(x^T^P)+b[7]+4139469664&4294967295,I=x+(O<<16&4294967295|O>>>16),O=P+(I^x^T)+b[10]+3200236656&4294967295,P=I+(O<<23&4294967295|O>>>9),O=T+(P^I^x)+b[13]+681279174&4294967295,T=P+(O<<4&4294967295|O>>>28),O=x+(T^P^I)+b[0]+3936430074&4294967295,x=T+(O<<11&4294967295|O>>>21),O=I+(x^T^P)+b[3]+3572445317&4294967295,I=x+(O<<16&4294967295|O>>>16),O=P+(I^x^T)+b[6]+76029189&4294967295,P=I+(O<<23&4294967295|O>>>9),O=T+(P^I^x)+b[9]+3654602809&4294967295,T=P+(O<<4&4294967295|O>>>28),O=x+(T^P^I)+b[12]+3873151461&4294967295,x=T+(O<<11&4294967295|O>>>21),O=I+(x^T^P)+b[15]+530742520&4294967295,I=x+(O<<16&4294967295|O>>>16),O=P+(I^x^T)+b[2]+3299628645&4294967295,P=I+(O<<23&4294967295|O>>>9),O=T+(I^(P|~x))+b[0]+4096336452&4294967295,T=P+(O<<6&4294967295|O>>>26),O=x+(P^(T|~I))+b[7]+1126891415&4294967295,x=T+(O<<10&4294967295|O>>>22),O=I+(T^(x|~P))+b[14]+2878612391&4294967295,I=x+(O<<15&4294967295|O>>>17),O=P+(x^(I|~T))+b[5]+4237533241&4294967295,P=I+(O<<21&4294967295|O>>>11),O=T+(I^(P|~x))+b[12]+1700485571&4294967295,T=P+(O<<6&4294967295|O>>>26),O=x+(P^(T|~I))+b[3]+2399980690&4294967295,x=T+(O<<10&4294967295|O>>>22),O=I+(T^(x|~P))+b[10]+4293915773&4294967295,I=x+(O<<15&4294967295|O>>>17),O=P+(x^(I|~T))+b[1]+2240044497&4294967295,P=I+(O<<21&4294967295|O>>>11),O=T+(I^(P|~x))+b[8]+1873313359&4294967295,T=P+(O<<6&4294967295|O>>>26),O=x+(P^(T|~I))+b[15]+4264355552&4294967295,x=T+(O<<10&4294967295|O>>>22),O=I+(T^(x|~P))+b[6]+2734768916&4294967295,I=x+(O<<15&4294967295|O>>>17),O=P+(x^(I|~T))+b[13]+1309151649&4294967295,P=I+(O<<21&4294967295|O>>>11),O=T+(I^(P|~x))+b[4]+4149444226&4294967295,T=P+(O<<6&4294967295|O>>>26),O=x+(P^(T|~I))+b[11]+3174756917&4294967295,x=T+(O<<10&4294967295|O>>>22),O=I+(T^(x|~P))+b[2]+718787259&4294967295,I=x+(O<<15&4294967295|O>>>17),O=P+(x^(I|~T))+b[9]+3951481745&4294967295,S.g[0]=S.g[0]+T&4294967295,S.g[1]=S.g[1]+(I+(O<<21&4294967295|O>>>11))&4294967295,S.g[2]=S.g[2]+I&4294967295,S.g[3]=S.g[3]+x&4294967295}r.prototype.u=function(S,T){T===void 0&&(T=S.length);for(var P=T-this.blockSize,b=this.B,I=this.h,x=0;x<T;){if(I==0)for(;x<=P;)i(this,S,x),x+=this.blockSize;if(typeof S=="string"){for(;x<T;)if(b[I++]=S.charCodeAt(x++),I==this.blockSize){i(this,b),I=0;break}}else for(;x<T;)if(b[I++]=S[x++],I==this.blockSize){i(this,b),I=0;break}}this.h=I,this.o+=T},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var T=1;T<S.length-8;++T)S[T]=0;var P=8*this.o;for(T=S.length-8;T<S.length;++T)S[T]=P&255,P/=256;for(this.u(S),S=Array(16),T=P=0;4>T;++T)for(var b=0;32>b;b+=8)S[P++]=this.g[T]>>>b&255;return S};function o(S,T){var P=a;return Object.prototype.hasOwnProperty.call(P,S)?P[S]:P[S]=T(S)}function s(S,T){this.h=T;for(var P=[],b=!0,I=S.length-1;0<=I;I--){var x=S[I]|0;b&&x==T||(P[I]=x,b=!1)}this.g=P}var a={};function l(S){return-128<=S&&128>S?o(S,function(T){return new s([T|0],0>T?-1:0)}):new s([S|0],0>S?-1:0)}function c(S){if(isNaN(S)||!isFinite(S))return h;if(0>S)return E(c(-S));for(var T=[],P=1,b=0;S>=P;b++)T[b]=S/P|0,P*=4294967296;return new s(T,0)}function d(S,T){if(S.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(S.charAt(0)=="-")return E(d(S.substring(1),T));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=c(Math.pow(T,8)),b=h,I=0;I<S.length;I+=8){var x=Math.min(8,S.length-I),O=parseInt(S.substring(I,I+x),T);8>x?(x=c(Math.pow(T,x)),b=b.j(x).add(c(O))):(b=b.j(P),b=b.add(c(O)))}return b}var h=l(0),f=l(1),m=l(16777216);t=s.prototype,t.m=function(){if(_(this))return-E(this).m();for(var S=0,T=1,P=0;P<this.g.length;P++){var b=this.i(P);S+=(0<=b?b:4294967296+b)*T,T*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(w(this))return"0";if(_(this))return"-"+E(this).toString(S);for(var T=c(Math.pow(S,6)),P=this,b="";;){var I=y(P,T).g;P=g(P,I.j(T));var x=((0<P.g.length?P.g[0]:P.h)>>>0).toString(S);if(P=I,w(P))return x+b;for(;6>x.length;)x="0"+x;b=x+b}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function w(S){if(S.h!=0)return!1;for(var T=0;T<S.g.length;T++)if(S.g[T]!=0)return!1;return!0}function _(S){return S.h==-1}t.l=function(S){return S=g(this,S),_(S)?-1:w(S)?0:1};function E(S){for(var T=S.g.length,P=[],b=0;b<T;b++)P[b]=~S.g[b];return new s(P,~S.h).add(f)}t.abs=function(){return _(this)?E(this):this},t.add=function(S){for(var T=Math.max(this.g.length,S.g.length),P=[],b=0,I=0;I<=T;I++){var x=b+(this.i(I)&65535)+(S.i(I)&65535),O=(x>>>16)+(this.i(I)>>>16)+(S.i(I)>>>16);b=O>>>16,x&=65535,O&=65535,P[I]=O<<16|x}return new s(P,P[P.length-1]&-2147483648?-1:0)};function g(S,T){return S.add(E(T))}t.j=function(S){if(w(this)||w(S))return h;if(_(this))return _(S)?E(this).j(E(S)):E(E(this).j(S));if(_(S))return E(this.j(E(S)));if(0>this.l(m)&&0>S.l(m))return c(this.m()*S.m());for(var T=this.g.length+S.g.length,P=[],b=0;b<2*T;b++)P[b]=0;for(b=0;b<this.g.length;b++)for(var I=0;I<S.g.length;I++){var x=this.i(b)>>>16,O=this.i(b)&65535,L=S.i(I)>>>16,B=S.i(I)&65535;P[2*b+2*I]+=O*B,p(P,2*b+2*I),P[2*b+2*I+1]+=x*B,p(P,2*b+2*I+1),P[2*b+2*I+1]+=O*L,p(P,2*b+2*I+1),P[2*b+2*I+2]+=x*L,p(P,2*b+2*I+2)}for(b=0;b<T;b++)P[b]=P[2*b+1]<<16|P[2*b];for(b=T;b<2*T;b++)P[b]=0;return new s(P,0)};function p(S,T){for(;(S[T]&65535)!=S[T];)S[T+1]+=S[T]>>>16,S[T]&=65535,T++}function v(S,T){this.g=S,this.h=T}function y(S,T){if(w(T))throw Error("division by zero");if(w(S))return new v(h,h);if(_(S))return T=y(E(S),T),new v(E(T.g),E(T.h));if(_(T))return T=y(S,E(T)),new v(E(T.g),T.h);if(30<S.g.length){if(_(S)||_(T))throw Error("slowDivide_ only works with positive integers.");for(var P=f,b=T;0>=b.l(S);)P=k(P),b=k(b);var I=N(P,1),x=N(b,1);for(b=N(b,2),P=N(P,2);!w(b);){var O=x.add(b);0>=O.l(S)&&(I=I.add(P),x=O),b=N(b,1),P=N(P,1)}return T=g(S,I.j(T)),new v(I,T)}for(I=h;0<=S.l(T);){for(P=Math.max(1,Math.floor(S.m()/T.m())),b=Math.ceil(Math.log(P)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),x=c(P),O=x.j(T);_(O)||0<O.l(S);)P-=b,x=c(P),O=x.j(T);w(x)&&(x=f),I=I.add(x),S=g(S,O)}return new v(I,S)}t.A=function(S){return y(this,S).h},t.and=function(S){for(var T=Math.max(this.g.length,S.g.length),P=[],b=0;b<T;b++)P[b]=this.i(b)&S.i(b);return new s(P,this.h&S.h)},t.or=function(S){for(var T=Math.max(this.g.length,S.g.length),P=[],b=0;b<T;b++)P[b]=this.i(b)|S.i(b);return new s(P,this.h|S.h)},t.xor=function(S){for(var T=Math.max(this.g.length,S.g.length),P=[],b=0;b<T;b++)P[b]=this.i(b)^S.i(b);return new s(P,this.h^S.h)};function k(S){for(var T=S.g.length+1,P=[],b=0;b<T;b++)P[b]=S.i(b)<<1|S.i(b-1)>>>31;return new s(P,S.h)}function N(S,T){var P=T>>5;T%=32;for(var b=S.g.length-P,I=[],x=0;x<b;x++)I[x]=0<T?S.i(x+P)>>>T|S.i(x+P+1)<<32-T:S.i(x+P);return new s(I,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,D1=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=c,s.fromString=d,si=s}).apply(typeof fy<"u"?fy:typeof self<"u"?self:typeof window<"u"?window:{});var nl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var L1,cs,M1,Sl,gh,j1,V1,F1;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,A,R){return u==Array.prototype||u==Object.prototype||(u[A]=R.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof nl=="object"&&nl];for(var A=0;A<u.length;++A){var R=u[A];if(R&&R.Math==Math)return R}throw Error("Cannot find global object")}var r=n(this);function i(u,A){if(A)e:{var R=r;u=u.split(".");for(var D=0;D<u.length-1;D++){var Q=u[D];if(!(Q in R))break e;R=R[Q]}u=u[u.length-1],D=R[u],A=A(D),A!=D&&A!=null&&e(R,u,{configurable:!0,writable:!0,value:A})}}function o(u,A){u instanceof String&&(u+="");var R=0,D=!1,Q={next:function(){if(!D&&R<u.length){var J=R++;return{value:A(J,u[J]),done:!1}}return D=!0,{done:!0,value:void 0}}};return Q[Symbol.iterator]=function(){return Q},Q}i("Array.prototype.values",function(u){return u||function(){return o(this,function(A,R){return R})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},a=this||self;function l(u){var A=typeof u;return A=A!="object"?A:u?Array.isArray(u)?"array":A:"null",A=="array"||A=="object"&&typeof u.length=="number"}function c(u){var A=typeof u;return A=="object"&&u!=null||A=="function"}function d(u,A,R){return u.call.apply(u.bind,arguments)}function h(u,A,R){if(!u)throw Error();if(2<arguments.length){var D=Array.prototype.slice.call(arguments,2);return function(){var Q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Q,D),u.apply(A,Q)}}return function(){return u.apply(A,arguments)}}function f(u,A,R){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,f.apply(null,arguments)}function m(u,A){var R=Array.prototype.slice.call(arguments,1);return function(){var D=R.slice();return D.push.apply(D,arguments),u.apply(this,D)}}function w(u,A){function R(){}R.prototype=A.prototype,u.aa=A.prototype,u.prototype=new R,u.prototype.constructor=u,u.Qb=function(D,Q,J){for(var ae=Array(arguments.length-2),je=2;je<arguments.length;je++)ae[je-2]=arguments[je];return A.prototype[Q].apply(D,ae)}}function _(u){const A=u.length;if(0<A){const R=Array(A);for(let D=0;D<A;D++)R[D]=u[D];return R}return[]}function E(u,A){for(let R=1;R<arguments.length;R++){const D=arguments[R];if(l(D)){const Q=u.length||0,J=D.length||0;u.length=Q+J;for(let ae=0;ae<J;ae++)u[Q+ae]=D[ae]}else u.push(D)}}class g{constructor(A,R){this.i=A,this.j=R,this.h=0,this.g=null}get(){let A;return 0<this.h?(this.h--,A=this.g,this.g=A.next,A.next=null):A=this.i(),A}}function p(u){return/^[\s\xa0]*$/.test(u)}function v(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function y(u){return y[" "](u),u}y[" "]=function(){};var k=v().indexOf("Gecko")!=-1&&!(v().toLowerCase().indexOf("webkit")!=-1&&v().indexOf("Edge")==-1)&&!(v().indexOf("Trident")!=-1||v().indexOf("MSIE")!=-1)&&v().indexOf("Edge")==-1;function N(u,A,R){for(const D in u)A.call(R,u[D],D,u)}function S(u,A){for(const R in u)A.call(void 0,u[R],R,u)}function T(u){const A={};for(const R in u)A[R]=u[R];return A}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(u,A){let R,D;for(let Q=1;Q<arguments.length;Q++){D=arguments[Q];for(R in D)u[R]=D[R];for(let J=0;J<P.length;J++)R=P[J],Object.prototype.hasOwnProperty.call(D,R)&&(u[R]=D[R])}}function I(u){var A=1;u=u.split(":");const R=[];for(;0<A&&u.length;)R.push(u.shift()),A--;return u.length&&R.push(u.join(":")),R}function x(u){a.setTimeout(()=>{throw u},0)}function O(){var u=q;let A=null;return u.g&&(A=u.g,u.g=u.g.next,u.g||(u.h=null),A.next=null),A}class L{constructor(){this.h=this.g=null}add(A,R){const D=B.get();D.set(A,R),this.h?this.h.next=D:this.g=D,this.h=D}}var B=new g(()=>new H,u=>u.reset());class H{constructor(){this.next=this.g=this.h=null}set(A,R){this.h=A,this.g=R,this.next=null}reset(){this.next=this.g=this.h=null}}let W,G=!1,q=new L,V=()=>{const u=a.Promise.resolve(void 0);W=()=>{u.then(C)}};var C=()=>{for(var u;u=O();){try{u.h.call(u.g)}catch(R){x(R)}var A=B;A.j(u),100>A.h&&(A.h++,u.next=A.g,A.g=u)}G=!1};function M(){this.s=this.s,this.C=this.C}M.prototype.s=!1,M.prototype.ma=function(){this.s||(this.s=!0,this.N())},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function U(u,A){this.type=u,this.g=this.target=A,this.defaultPrevented=!1}U.prototype.h=function(){this.defaultPrevented=!0};var K=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,A=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const R=()=>{};a.addEventListener("test",R,A),a.removeEventListener("test",R,A)}catch{}return u}();function z(u,A){if(U.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var R=this.type=u.type,D=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=A,A=u.relatedTarget){if(k){e:{try{y(A.nodeName);var Q=!0;break e}catch{}Q=!1}Q||(A=null)}}else R=="mouseover"?A=u.fromElement:R=="mouseout"&&(A=u.toElement);this.relatedTarget=A,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:j[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&z.aa.h.call(this)}}w(z,U);var j={2:"touch",3:"pen",4:"mouse"};z.prototype.h=function(){z.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var $="closure_listenable_"+(1e6*Math.random()|0),Y=0;function X(u,A,R,D,Q){this.listener=u,this.proxy=null,this.src=A,this.type=R,this.capture=!!D,this.ha=Q,this.key=++Y,this.da=this.fa=!1}function ne(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Z(u){this.src=u,this.g={},this.h=0}Z.prototype.add=function(u,A,R,D,Q){var J=u.toString();u=this.g[J],u||(u=this.g[J]=[],this.h++);var ae=me(u,A,D,Q);return-1<ae?(A=u[ae],R||(A.fa=!1)):(A=new X(A,this.src,J,!!D,Q),A.fa=R,u.push(A)),A};function ue(u,A){var R=A.type;if(R in u.g){var D=u.g[R],Q=Array.prototype.indexOf.call(D,A,void 0),J;(J=0<=Q)&&Array.prototype.splice.call(D,Q,1),J&&(ne(A),u.g[R].length==0&&(delete u.g[R],u.h--))}}function me(u,A,R,D){for(var Q=0;Q<u.length;++Q){var J=u[Q];if(!J.da&&J.listener==A&&J.capture==!!R&&J.ha==D)return Q}return-1}var we="closure_lm_"+(1e6*Math.random()|0),Se={};function mt(u,A,R,D,Q){if(Array.isArray(A)){for(var J=0;J<A.length;J++)mt(u,A[J],R,D,Q);return null}return R=Ie(R),u&&u[$]?u.K(A,R,c(D)?!!D.capture:!1,Q):nt(u,A,R,!1,D,Q)}function nt(u,A,R,D,Q,J){if(!A)throw Error("Invalid event type");var ae=c(Q)?!!Q.capture:!!Q,je=Te(u);if(je||(u[we]=je=new Z(u)),R=je.add(A,R,D,ae,J),R.proxy)return R;if(D=ee(),R.proxy=D,D.src=u,D.listener=R,u.addEventListener)K||(Q=ae),Q===void 0&&(Q=!1),u.addEventListener(A.toString(),D,Q);else if(u.attachEvent)u.attachEvent(ce(A.toString()),D);else if(u.addListener&&u.removeListener)u.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return R}function ee(){function u(R){return A.call(u.src,u.listener,R)}const A=ie;return u}function te(u,A,R,D,Q){if(Array.isArray(A))for(var J=0;J<A.length;J++)te(u,A[J],R,D,Q);else D=c(D)?!!D.capture:!!D,R=Ie(R),u&&u[$]?(u=u.i,A=String(A).toString(),A in u.g&&(J=u.g[A],R=me(J,R,D,Q),-1<R&&(ne(J[R]),Array.prototype.splice.call(J,R,1),J.length==0&&(delete u.g[A],u.h--)))):u&&(u=Te(u))&&(A=u.g[A.toString()],u=-1,A&&(u=me(A,R,D,Q)),(R=-1<u?A[u]:null)&&le(R))}function le(u){if(typeof u!="number"&&u&&!u.da){var A=u.src;if(A&&A[$])ue(A.i,u);else{var R=u.type,D=u.proxy;A.removeEventListener?A.removeEventListener(R,D,u.capture):A.detachEvent?A.detachEvent(ce(R),D):A.addListener&&A.removeListener&&A.removeListener(D),(R=Te(A))?(ue(R,u),R.h==0&&(R.src=null,A[we]=null)):ne(u)}}}function ce(u){return u in Se?Se[u]:Se[u]="on"+u}function ie(u,A){if(u.da)u=!0;else{A=new z(A,this);var R=u.listener,D=u.ha||u.src;u.fa&&le(u),u=R.call(D,A)}return u}function Te(u){return u=u[we],u instanceof Z?u:null}var be="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ie(u){return typeof u=="function"?u:(u[be]||(u[be]=function(A){return u.handleEvent(A)}),u[be])}function Ce(){M.call(this),this.i=new Z(this),this.M=this,this.F=null}w(Ce,M),Ce.prototype[$]=!0,Ce.prototype.removeEventListener=function(u,A,R,D){te(this,u,A,R,D)};function Ue(u,A){var R,D=u.F;if(D)for(R=[];D;D=D.F)R.push(D);if(u=u.M,D=A.type||A,typeof A=="string")A=new U(A,u);else if(A instanceof U)A.target=A.target||u;else{var Q=A;A=new U(D,u),b(A,Q)}if(Q=!0,R)for(var J=R.length-1;0<=J;J--){var ae=A.g=R[J];Q=Me(ae,D,!0,A)&&Q}if(ae=A.g=u,Q=Me(ae,D,!0,A)&&Q,Q=Me(ae,D,!1,A)&&Q,R)for(J=0;J<R.length;J++)ae=A.g=R[J],Q=Me(ae,D,!1,A)&&Q}Ce.prototype.N=function(){if(Ce.aa.N.call(this),this.i){var u=this.i,A;for(A in u.g){for(var R=u.g[A],D=0;D<R.length;D++)ne(R[D]);delete u.g[A],u.h--}}this.F=null},Ce.prototype.K=function(u,A,R,D){return this.i.add(String(u),A,!1,R,D)},Ce.prototype.L=function(u,A,R,D){return this.i.add(String(u),A,!0,R,D)};function Me(u,A,R,D){if(A=u.i.g[String(A)],!A)return!0;A=A.concat();for(var Q=!0,J=0;J<A.length;++J){var ae=A[J];if(ae&&!ae.da&&ae.capture==R){var je=ae.listener,gt=ae.ha||ae.src;ae.fa&&ue(u.i,ae),Q=je.call(gt,D)!==!1&&Q}}return Q&&!D.defaultPrevented}function Ta(u,A,R){if(typeof u=="function")R&&(u=f(u,R));else if(u&&typeof u.handleEvent=="function")u=f(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(A)?-1:a.setTimeout(u,A||0)}function Ke(u){u.g=Ta(()=>{u.g=null,u.i&&(u.i=!1,Ke(u))},u.l);const A=u.h;u.h=null,u.m.apply(null,A)}class Tn extends M{constructor(A,R){super(),this.m=A,this.l=R,this.h=null,this.i=!1,this.g=null}j(A){this.h=arguments,this.g?this.i=!0:Ke(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Do(u){M.call(this),this.h=u,this.g={}}w(Do,M);var Dp=[];function Lp(u){N(u.g,function(A,R){this.g.hasOwnProperty(R)&&le(A)},u),u.g={}}Do.prototype.N=function(){Do.aa.N.call(this),Lp(this)},Do.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var lc=a.JSON.stringify,xw=a.JSON.parse,Ow=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function uc(){}uc.prototype.h=null;function Mp(u){return u.h||(u.h=u.i())}function jp(){}var Lo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function cc(){U.call(this,"d")}w(cc,U);function fc(){U.call(this,"c")}w(fc,U);var Hr={},Vp=null;function ba(){return Vp=Vp||new Ce}Hr.La="serverreachability";function Fp(u){U.call(this,Hr.La,u)}w(Fp,U);function Mo(u){const A=ba();Ue(A,new Fp(A))}Hr.STAT_EVENT="statevent";function Up(u,A){U.call(this,Hr.STAT_EVENT,u),this.stat=A}w(Up,U);function Dt(u){const A=ba();Ue(A,new Up(A,u))}Hr.Ma="timingevent";function Bp(u,A){U.call(this,Hr.Ma,u),this.size=A}w(Bp,U);function jo(u,A){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},A)}function Vo(){this.g=!0}Vo.prototype.xa=function(){this.g=!1};function Rw(u,A,R,D,Q,J){u.info(function(){if(u.g)if(J)for(var ae="",je=J.split("&"),gt=0;gt<je.length;gt++){var Re=je[gt].split("=");if(1<Re.length){var It=Re[0];Re=Re[1];var At=It.split("_");ae=2<=At.length&&At[1]=="type"?ae+(It+"="+Re+"&"):ae+(It+"=redacted&")}}else ae=null;else ae=J;return"XMLHTTP REQ ("+D+") [attempt "+Q+"]: "+A+`
`+R+`
`+ae})}function Nw(u,A,R,D,Q,J,ae){u.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+Q+"]: "+A+`
`+R+`
`+J+" "+ae})}function bi(u,A,R,D){u.info(function(){return"XMLHTTP TEXT ("+A+"): "+Dw(u,R)+(D?" "+D:"")})}function Cw(u,A){u.info(function(){return"TIMEOUT: "+A})}Vo.prototype.info=function(){};function Dw(u,A){if(!u.g)return A;if(!A)return null;try{var R=JSON.parse(A);if(R){for(u=0;u<R.length;u++)if(Array.isArray(R[u])){var D=R[u];if(!(2>D.length)){var Q=D[1];if(Array.isArray(Q)&&!(1>Q.length)){var J=Q[0];if(J!="noop"&&J!="stop"&&J!="close")for(var ae=1;ae<Q.length;ae++)Q[ae]=""}}}}return lc(R)}catch{return A}}var Ia={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},qp={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},hc;function Aa(){}w(Aa,uc),Aa.prototype.g=function(){return new XMLHttpRequest},Aa.prototype.i=function(){return{}},hc=new Aa;function ir(u,A,R,D){this.j=u,this.i=A,this.l=R,this.R=D||1,this.U=new Do(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new $p}function $p(){this.i=null,this.g="",this.h=!1}var zp={},dc={};function pc(u,A,R){u.L=1,u.v=xa(Ln(A)),u.m=R,u.P=!0,Hp(u,null)}function Hp(u,A){u.F=Date.now(),Sa(u),u.A=Ln(u.v);var R=u.A,D=u.R;Array.isArray(D)||(D=[String(D)]),om(R.i,"t",D),u.C=0,R=u.j.J,u.h=new $p,u.g=bm(u.j,R?A:null,!u.m),0<u.O&&(u.M=new Tn(f(u.Y,u,u.g),u.O)),A=u.U,R=u.g,D=u.ca;var Q="readystatechange";Array.isArray(Q)||(Q&&(Dp[0]=Q.toString()),Q=Dp);for(var J=0;J<Q.length;J++){var ae=mt(R,Q[J],D||A.handleEvent,!1,A.h||A);if(!ae)break;A.g[ae.key]=ae}A=u.H?T(u.H):{},u.m?(u.u||(u.u="POST"),A["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,A)):(u.u="GET",u.g.ea(u.A,u.u,null,A)),Mo(),Rw(u.i,u.u,u.A,u.l,u.R,u.m)}ir.prototype.ca=function(u){u=u.target;const A=this.M;A&&Mn(u)==3?A.j():this.Y(u)},ir.prototype.Y=function(u){try{if(u==this.g)e:{const At=Mn(this.g);var A=this.g.Ba();const Si=this.g.Z();if(!(3>At)&&(At!=3||this.g&&(this.h.h||this.g.oa()||hm(this.g)))){this.J||At!=4||A==7||(A==8||0>=Si?Mo(3):Mo(2)),mc(this);var R=this.g.Z();this.X=R;t:if(Wp(this)){var D=hm(this.g);u="";var Q=D.length,J=Mn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Wr(this),Fo(this);var ae="";break t}this.h.i=new a.TextDecoder}for(A=0;A<Q;A++)this.h.h=!0,u+=this.h.i.decode(D[A],{stream:!(J&&A==Q-1)});D.length=0,this.h.g+=u,this.C=0,ae=this.h.g}else ae=this.g.oa();if(this.o=R==200,Nw(this.i,this.u,this.A,this.l,this.R,At,R),this.o){if(this.T&&!this.K){t:{if(this.g){var je,gt=this.g;if((je=gt.g?gt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(je)){var Re=je;break t}}Re=null}if(R=Re)bi(this.i,this.l,R,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,gc(this,R);else{this.o=!1,this.s=3,Dt(12),Wr(this),Fo(this);break e}}if(this.P){R=!0;let cn;for(;!this.J&&this.C<ae.length;)if(cn=Lw(this,ae),cn==dc){At==4&&(this.s=4,Dt(14),R=!1),bi(this.i,this.l,null,"[Incomplete Response]");break}else if(cn==zp){this.s=4,Dt(15),bi(this.i,this.l,ae,"[Invalid Chunk]"),R=!1;break}else bi(this.i,this.l,cn,null),gc(this,cn);if(Wp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),At!=4||ae.length!=0||this.h.h||(this.s=1,Dt(16),R=!1),this.o=this.o&&R,!R)bi(this.i,this.l,ae,"[Invalid Chunked Response]"),Wr(this),Fo(this);else if(0<ae.length&&!this.W){this.W=!0;var It=this.j;It.g==this&&It.ba&&!It.M&&(It.j.info("Great, no buffering proxy detected. Bytes received: "+ae.length),Tc(It),It.M=!0,Dt(11))}}else bi(this.i,this.l,ae,null),gc(this,ae);At==4&&Wr(this),this.o&&!this.J&&(At==4?_m(this.j,this):(this.o=!1,Sa(this)))}else Jw(this.g),R==400&&0<ae.indexOf("Unknown SID")?(this.s=3,Dt(12)):(this.s=0,Dt(13)),Wr(this),Fo(this)}}}catch{}finally{}};function Wp(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Lw(u,A){var R=u.C,D=A.indexOf(`
`,R);return D==-1?dc:(R=Number(A.substring(R,D)),isNaN(R)?zp:(D+=1,D+R>A.length?dc:(A=A.slice(D,D+R),u.C=D+R,A)))}ir.prototype.cancel=function(){this.J=!0,Wr(this)};function Sa(u){u.S=Date.now()+u.I,Kp(u,u.I)}function Kp(u,A){if(u.B!=null)throw Error("WatchDog timer not null");u.B=jo(f(u.ba,u),A)}function mc(u){u.B&&(a.clearTimeout(u.B),u.B=null)}ir.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Cw(this.i,this.A),this.L!=2&&(Mo(),Dt(17)),Wr(this),this.s=2,Fo(this)):Kp(this,this.S-u)};function Fo(u){u.j.G==0||u.J||_m(u.j,u)}function Wr(u){mc(u);var A=u.M;A&&typeof A.ma=="function"&&A.ma(),u.M=null,Lp(u.U),u.g&&(A=u.g,u.g=null,A.abort(),A.ma())}function gc(u,A){try{var R=u.j;if(R.G!=0&&(R.g==u||yc(R.h,u))){if(!u.K&&yc(R.h,u)&&R.G==3){try{var D=R.Da.g.parse(A)}catch{D=null}if(Array.isArray(D)&&D.length==3){var Q=D;if(Q[0]==0){e:if(!R.u){if(R.g)if(R.g.F+3e3<u.F)La(R),Ca(R);else break e;wc(R),Dt(18)}}else R.za=Q[1],0<R.za-R.T&&37500>Q[2]&&R.F&&R.v==0&&!R.C&&(R.C=jo(f(R.Za,R),6e3));if(1>=Yp(R.h)&&R.ca){try{R.ca()}catch{}R.ca=void 0}}else Gr(R,11)}else if((u.K||R.g==u)&&La(R),!p(A))for(Q=R.Da.g.parse(A),A=0;A<Q.length;A++){let Re=Q[A];if(R.T=Re[0],Re=Re[1],R.G==2)if(Re[0]=="c"){R.K=Re[1],R.ia=Re[2];const It=Re[3];It!=null&&(R.la=It,R.j.info("VER="+R.la));const At=Re[4];At!=null&&(R.Aa=At,R.j.info("SVER="+R.Aa));const Si=Re[5];Si!=null&&typeof Si=="number"&&0<Si&&(D=1.5*Si,R.L=D,R.j.info("backChannelRequestTimeoutMs_="+D)),D=R;const cn=u.g;if(cn){const ja=cn.g?cn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ja){var J=D.h;J.g||ja.indexOf("spdy")==-1&&ja.indexOf("quic")==-1&&ja.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(vc(J,J.h),J.h=null))}if(D.D){const bc=cn.g?cn.g.getResponseHeader("X-HTTP-Session-Id"):null;bc&&(D.ya=bc,Be(D.I,D.D,bc))}}R.G=3,R.l&&R.l.ua(),R.ba&&(R.R=Date.now()-u.F,R.j.info("Handshake RTT: "+R.R+"ms")),D=R;var ae=u;if(D.qa=Tm(D,D.J?D.ia:null,D.W),ae.K){Xp(D.h,ae);var je=ae,gt=D.L;gt&&(je.I=gt),je.B&&(mc(je),Sa(je)),D.g=ae}else ym(D);0<R.i.length&&Da(R)}else Re[0]!="stop"&&Re[0]!="close"||Gr(R,7);else R.G==3&&(Re[0]=="stop"||Re[0]=="close"?Re[0]=="stop"?Gr(R,7):Ec(R):Re[0]!="noop"&&R.l&&R.l.ta(Re),R.v=0)}}Mo(4)}catch{}}var Mw=class{constructor(u,A){this.g=u,this.map=A}};function Gp(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Qp(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Yp(u){return u.h?1:u.g?u.g.size:0}function yc(u,A){return u.h?u.h==A:u.g?u.g.has(A):!1}function vc(u,A){u.g?u.g.add(A):u.h=A}function Xp(u,A){u.h&&u.h==A?u.h=null:u.g&&u.g.has(A)&&u.g.delete(A)}Gp.prototype.cancel=function(){if(this.i=Jp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Jp(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let A=u.i;for(const R of u.g.values())A=A.concat(R.D);return A}return _(u.i)}function jw(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var A=[],R=u.length,D=0;D<R;D++)A.push(u[D]);return A}A=[],R=0;for(D in u)A[R++]=u[D];return A}function Vw(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var A=[];u=u.length;for(var R=0;R<u;R++)A.push(R);return A}A=[],R=0;for(const D in u)A[R++]=D;return A}}}function Zp(u,A){if(u.forEach&&typeof u.forEach=="function")u.forEach(A,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,A,void 0);else for(var R=Vw(u),D=jw(u),Q=D.length,J=0;J<Q;J++)A.call(void 0,D[J],R&&R[J],u)}var em=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Fw(u,A){if(u){u=u.split("&");for(var R=0;R<u.length;R++){var D=u[R].indexOf("="),Q=null;if(0<=D){var J=u[R].substring(0,D);Q=u[R].substring(D+1)}else J=u[R];A(J,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function Kr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Kr){this.h=u.h,ka(this,u.j),this.o=u.o,this.g=u.g,Pa(this,u.s),this.l=u.l;var A=u.i,R=new qo;R.i=A.i,A.g&&(R.g=new Map(A.g),R.h=A.h),tm(this,R),this.m=u.m}else u&&(A=String(u).match(em))?(this.h=!1,ka(this,A[1]||"",!0),this.o=Uo(A[2]||""),this.g=Uo(A[3]||"",!0),Pa(this,A[4]),this.l=Uo(A[5]||"",!0),tm(this,A[6]||"",!0),this.m=Uo(A[7]||"")):(this.h=!1,this.i=new qo(null,this.h))}Kr.prototype.toString=function(){var u=[],A=this.j;A&&u.push(Bo(A,nm,!0),":");var R=this.g;return(R||A=="file")&&(u.push("//"),(A=this.o)&&u.push(Bo(A,nm,!0),"@"),u.push(encodeURIComponent(String(R)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),R=this.s,R!=null&&u.push(":",String(R))),(R=this.l)&&(this.g&&R.charAt(0)!="/"&&u.push("/"),u.push(Bo(R,R.charAt(0)=="/"?qw:Bw,!0))),(R=this.i.toString())&&u.push("?",R),(R=this.m)&&u.push("#",Bo(R,zw)),u.join("")};function Ln(u){return new Kr(u)}function ka(u,A,R){u.j=R?Uo(A,!0):A,u.j&&(u.j=u.j.replace(/:$/,""))}function Pa(u,A){if(A){if(A=Number(A),isNaN(A)||0>A)throw Error("Bad port number "+A);u.s=A}else u.s=null}function tm(u,A,R){A instanceof qo?(u.i=A,Hw(u.i,u.h)):(R||(A=Bo(A,$w)),u.i=new qo(A,u.h))}function Be(u,A,R){u.i.set(A,R)}function xa(u){return Be(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Uo(u,A){return u?A?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Bo(u,A,R){return typeof u=="string"?(u=encodeURI(u).replace(A,Uw),R&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Uw(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var nm=/[#\/\?@]/g,Bw=/[#\?:]/g,qw=/[#\?]/g,$w=/[#\?@]/g,zw=/#/g;function qo(u,A){this.h=this.g=null,this.i=u||null,this.j=!!A}function or(u){u.g||(u.g=new Map,u.h=0,u.i&&Fw(u.i,function(A,R){u.add(decodeURIComponent(A.replace(/\+/g," ")),R)}))}t=qo.prototype,t.add=function(u,A){or(this),this.i=null,u=Ii(this,u);var R=this.g.get(u);return R||this.g.set(u,R=[]),R.push(A),this.h+=1,this};function rm(u,A){or(u),A=Ii(u,A),u.g.has(A)&&(u.i=null,u.h-=u.g.get(A).length,u.g.delete(A))}function im(u,A){return or(u),A=Ii(u,A),u.g.has(A)}t.forEach=function(u,A){or(this),this.g.forEach(function(R,D){R.forEach(function(Q){u.call(A,Q,D,this)},this)},this)},t.na=function(){or(this);const u=Array.from(this.g.values()),A=Array.from(this.g.keys()),R=[];for(let D=0;D<A.length;D++){const Q=u[D];for(let J=0;J<Q.length;J++)R.push(A[D])}return R},t.V=function(u){or(this);let A=[];if(typeof u=="string")im(this,u)&&(A=A.concat(this.g.get(Ii(this,u))));else{u=Array.from(this.g.values());for(let R=0;R<u.length;R++)A=A.concat(u[R])}return A},t.set=function(u,A){return or(this),this.i=null,u=Ii(this,u),im(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[A]),this.h+=1,this},t.get=function(u,A){return u?(u=this.V(u),0<u.length?String(u[0]):A):A};function om(u,A,R){rm(u,A),0<R.length&&(u.i=null,u.g.set(Ii(u,A),_(R)),u.h+=R.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],A=Array.from(this.g.keys());for(var R=0;R<A.length;R++){var D=A[R];const J=encodeURIComponent(String(D)),ae=this.V(D);for(D=0;D<ae.length;D++){var Q=J;ae[D]!==""&&(Q+="="+encodeURIComponent(String(ae[D]))),u.push(Q)}}return this.i=u.join("&")};function Ii(u,A){return A=String(A),u.j&&(A=A.toLowerCase()),A}function Hw(u,A){A&&!u.j&&(or(u),u.i=null,u.g.forEach(function(R,D){var Q=D.toLowerCase();D!=Q&&(rm(this,D),om(this,Q,R))},u)),u.j=A}function Ww(u,A){const R=new Vo;if(a.Image){const D=new Image;D.onload=m(sr,R,"TestLoadImage: loaded",!0,A,D),D.onerror=m(sr,R,"TestLoadImage: error",!1,A,D),D.onabort=m(sr,R,"TestLoadImage: abort",!1,A,D),D.ontimeout=m(sr,R,"TestLoadImage: timeout",!1,A,D),a.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=u}else A(!1)}function Kw(u,A){const R=new Vo,D=new AbortController,Q=setTimeout(()=>{D.abort(),sr(R,"TestPingServer: timeout",!1,A)},1e4);fetch(u,{signal:D.signal}).then(J=>{clearTimeout(Q),J.ok?sr(R,"TestPingServer: ok",!0,A):sr(R,"TestPingServer: server error",!1,A)}).catch(()=>{clearTimeout(Q),sr(R,"TestPingServer: error",!1,A)})}function sr(u,A,R,D,Q){try{Q&&(Q.onload=null,Q.onerror=null,Q.onabort=null,Q.ontimeout=null),D(R)}catch{}}function Gw(){this.g=new Ow}function Qw(u,A,R){const D=R||"";try{Zp(u,function(Q,J){let ae=Q;c(Q)&&(ae=lc(Q)),A.push(D+J+"="+encodeURIComponent(ae))})}catch(Q){throw A.push(D+"type="+encodeURIComponent("_badmap")),Q}}function Oa(u){this.l=u.Ub||null,this.j=u.eb||!1}w(Oa,uc),Oa.prototype.g=function(){return new Ra(this.l,this.j)},Oa.prototype.i=function(u){return function(){return u}}({});function Ra(u,A){Ce.call(this),this.D=u,this.o=A,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Ra,Ce),t=Ra.prototype,t.open=function(u,A){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=A,this.readyState=1,zo(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const A={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(A.body=u),(this.D||a).fetch(new Request(this.A,A)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,$o(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,zo(this)),this.g&&(this.readyState=3,zo(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;sm(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function sm(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var A=u.value?u.value:new Uint8Array(0);(A=this.v.decode(A,{stream:!u.done}))&&(this.response=this.responseText+=A)}u.done?$o(this):zo(this),this.readyState==3&&sm(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,$o(this))},t.Qa=function(u){this.g&&(this.response=u,$o(this))},t.ga=function(){this.g&&$o(this)};function $o(u){u.readyState=4,u.l=null,u.j=null,u.v=null,zo(u)}t.setRequestHeader=function(u,A){this.u.append(u,A)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],A=this.h.entries();for(var R=A.next();!R.done;)R=R.value,u.push(R[0]+": "+R[1]),R=A.next();return u.join(`\r
`)};function zo(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ra.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function am(u){let A="";return N(u,function(R,D){A+=D,A+=":",A+=R,A+=`\r
`}),A}function _c(u,A,R){e:{for(D in R){var D=!1;break e}D=!0}D||(R=am(R),typeof u=="string"?R!=null&&encodeURIComponent(String(R)):Be(u,A,R))}function Je(u){Ce.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(Je,Ce);var Yw=/^https?$/i,Xw=["POST","PUT"];t=Je.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,A,R,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);A=A?A.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():hc.g(),this.v=this.o?Mp(this.o):Mp(hc),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(A,String(u),!0),this.B=!1}catch(J){lm(this,J);return}if(u=R||"",R=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var Q in D)R.set(Q,D[Q]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const J of D.keys())R.set(J,D.get(J));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(R.keys()).find(J=>J.toLowerCase()=="content-type"),Q=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Xw,A,void 0))||D||Q||R.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,ae]of R)this.g.setRequestHeader(J,ae);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{fm(this),this.u=!0,this.g.send(u),this.u=!1}catch(J){lm(this,J)}};function lm(u,A){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=A,u.m=5,um(u),Na(u)}function um(u){u.A||(u.A=!0,Ue(u,"complete"),Ue(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Ue(this,"complete"),Ue(this,"abort"),Na(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Na(this,!0)),Je.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?cm(this):this.bb())},t.bb=function(){cm(this)};function cm(u){if(u.h&&typeof s<"u"&&(!u.v[1]||Mn(u)!=4||u.Z()!=2)){if(u.u&&Mn(u)==4)Ta(u.Ea,0,u);else if(Ue(u,"readystatechange"),Mn(u)==4){u.h=!1;try{const ae=u.Z();e:switch(ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var A=!0;break e;default:A=!1}var R;if(!(R=A)){var D;if(D=ae===0){var Q=String(u.D).match(em)[1]||null;!Q&&a.self&&a.self.location&&(Q=a.self.location.protocol.slice(0,-1)),D=!Yw.test(Q?Q.toLowerCase():"")}R=D}if(R)Ue(u,"complete"),Ue(u,"success");else{u.m=6;try{var J=2<Mn(u)?u.g.statusText:""}catch{J=""}u.l=J+" ["+u.Z()+"]",um(u)}}finally{Na(u)}}}}function Na(u,A){if(u.g){fm(u);const R=u.g,D=u.v[0]?()=>{}:null;u.g=null,u.v=null,A||Ue(u,"ready");try{R.onreadystatechange=D}catch{}}}function fm(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Mn(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Mn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var A=this.g.responseText;return u&&A.indexOf(u)==0&&(A=A.substring(u.length)),xw(A)}};function hm(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Jw(u){const A={};u=(u.g&&2<=Mn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<u.length;D++){if(p(u[D]))continue;var R=I(u[D]);const Q=R[0];if(R=R[1],typeof R!="string")continue;R=R.trim();const J=A[Q]||[];A[Q]=J,J.push(R)}S(A,function(D){return D.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ho(u,A,R){return R&&R.internalChannelParams&&R.internalChannelParams[u]||A}function dm(u){this.Aa=0,this.i=[],this.j=new Vo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ho("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ho("baseRetryDelayMs",5e3,u),this.cb=Ho("retryDelaySeedMs",1e4,u),this.Wa=Ho("forwardChannelMaxRetries",2,u),this.wa=Ho("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Gp(u&&u.concurrentRequestLimit),this.Da=new Gw,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=dm.prototype,t.la=8,t.G=1,t.connect=function(u,A,R,D){Dt(0),this.W=u,this.H=A||{},R&&D!==void 0&&(this.H.OSID=R,this.H.OAID=D),this.F=this.X,this.I=Tm(this,null,this.W),Da(this)};function Ec(u){if(pm(u),u.G==3){var A=u.U++,R=Ln(u.I);if(Be(R,"SID",u.K),Be(R,"RID",A),Be(R,"TYPE","terminate"),Wo(u,R),A=new ir(u,u.j,A),A.L=2,A.v=xa(Ln(R)),R=!1,a.navigator&&a.navigator.sendBeacon)try{R=a.navigator.sendBeacon(A.v.toString(),"")}catch{}!R&&a.Image&&(new Image().src=A.v,R=!0),R||(A.g=bm(A.j,null),A.g.ea(A.v)),A.F=Date.now(),Sa(A)}wm(u)}function Ca(u){u.g&&(Tc(u),u.g.cancel(),u.g=null)}function pm(u){Ca(u),u.u&&(a.clearTimeout(u.u),u.u=null),La(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Da(u){if(!Qp(u.h)&&!u.s){u.s=!0;var A=u.Ga;W||V(),G||(W(),G=!0),q.add(A,u),u.B=0}}function Zw(u,A){return Yp(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=A.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=jo(f(u.Ga,u,A),Em(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const Q=new ir(this,this.j,u);let J=this.o;if(this.S&&(J?(J=T(J),b(J,this.S)):J=this.S),this.m!==null||this.O||(Q.H=J,J=null),this.P)e:{for(var A=0,R=0;R<this.i.length;R++){t:{var D=this.i[R];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(A+=D,4096<A){A=R;break e}if(A===4096||R===this.i.length-1){A=R+1;break e}}A=1e3}else A=1e3;A=gm(this,Q,A),R=Ln(this.I),Be(R,"RID",u),Be(R,"CVER",22),this.D&&Be(R,"X-HTTP-Session-Id",this.D),Wo(this,R),J&&(this.O?A="headers="+encodeURIComponent(String(am(J)))+"&"+A:this.m&&_c(R,this.m,J)),vc(this.h,Q),this.Ua&&Be(R,"TYPE","init"),this.P?(Be(R,"$req",A),Be(R,"SID","null"),Q.T=!0,pc(Q,R,null)):pc(Q,R,A),this.G=2}}else this.G==3&&(u?mm(this,u):this.i.length==0||Qp(this.h)||mm(this))};function mm(u,A){var R;A?R=A.l:R=u.U++;const D=Ln(u.I);Be(D,"SID",u.K),Be(D,"RID",R),Be(D,"AID",u.T),Wo(u,D),u.m&&u.o&&_c(D,u.m,u.o),R=new ir(u,u.j,R,u.B+1),u.m===null&&(R.H=u.o),A&&(u.i=A.D.concat(u.i)),A=gm(u,R,1e3),R.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),vc(u.h,R),pc(R,D,A)}function Wo(u,A){u.H&&N(u.H,function(R,D){Be(A,D,R)}),u.l&&Zp({},function(R,D){Be(A,D,R)})}function gm(u,A,R){R=Math.min(u.i.length,R);var D=u.l?f(u.l.Na,u.l,u):null;e:{var Q=u.i;let J=-1;for(;;){const ae=["count="+R];J==-1?0<R?(J=Q[0].g,ae.push("ofs="+J)):J=0:ae.push("ofs="+J);let je=!0;for(let gt=0;gt<R;gt++){let Re=Q[gt].g;const It=Q[gt].map;if(Re-=J,0>Re)J=Math.max(0,Q[gt].g-100),je=!1;else try{Qw(It,ae,"req"+Re+"_")}catch{D&&D(It)}}if(je){D=ae.join("&");break e}}}return u=u.i.splice(0,R),A.D=u,D}function ym(u){if(!u.g&&!u.u){u.Y=1;var A=u.Fa;W||V(),G||(W(),G=!0),q.add(A,u),u.v=0}}function wc(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=jo(f(u.Fa,u),Em(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,vm(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=jo(f(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Dt(10),Ca(this),vm(this))};function Tc(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function vm(u){u.g=new ir(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var A=Ln(u.qa);Be(A,"RID","rpc"),Be(A,"SID",u.K),Be(A,"AID",u.T),Be(A,"CI",u.F?"0":"1"),!u.F&&u.ja&&Be(A,"TO",u.ja),Be(A,"TYPE","xmlhttp"),Wo(u,A),u.m&&u.o&&_c(A,u.m,u.o),u.L&&(u.g.I=u.L);var R=u.g;u=u.ia,R.L=1,R.v=xa(Ln(A)),R.m=null,R.P=!0,Hp(R,u)}t.Za=function(){this.C!=null&&(this.C=null,Ca(this),wc(this),Dt(19))};function La(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function _m(u,A){var R=null;if(u.g==A){La(u),Tc(u),u.g=null;var D=2}else if(yc(u.h,A))R=A.D,Xp(u.h,A),D=1;else return;if(u.G!=0){if(A.o)if(D==1){R=A.m?A.m.length:0,A=Date.now()-A.F;var Q=u.B;D=ba(),Ue(D,new Bp(D,R)),Da(u)}else ym(u);else if(Q=A.s,Q==3||Q==0&&0<A.X||!(D==1&&Zw(u,A)||D==2&&wc(u)))switch(R&&0<R.length&&(A=u.h,A.i=A.i.concat(R)),Q){case 1:Gr(u,5);break;case 4:Gr(u,10);break;case 3:Gr(u,6);break;default:Gr(u,2)}}}function Em(u,A){let R=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(R*=2),R*A}function Gr(u,A){if(u.j.info("Error code "+A),A==2){var R=f(u.fb,u),D=u.Xa;const Q=!D;D=new Kr(D||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ka(D,"https"),xa(D),Q?Ww(D.toString(),R):Kw(D.toString(),R)}else Dt(2);u.G=0,u.l&&u.l.sa(A),wm(u),pm(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Dt(2)):(this.j.info("Failed to ping google.com"),Dt(1))};function wm(u){if(u.G=0,u.ka=[],u.l){const A=Jp(u.h);(A.length!=0||u.i.length!=0)&&(E(u.ka,A),E(u.ka,u.i),u.h.i.length=0,_(u.i),u.i.length=0),u.l.ra()}}function Tm(u,A,R){var D=R instanceof Kr?Ln(R):new Kr(R);if(D.g!="")A&&(D.g=A+"."+D.g),Pa(D,D.s);else{var Q=a.location;D=Q.protocol,A=A?A+"."+Q.hostname:Q.hostname,Q=+Q.port;var J=new Kr(null);D&&ka(J,D),A&&(J.g=A),Q&&Pa(J,Q),R&&(J.l=R),D=J}return R=u.D,A=u.ya,R&&A&&Be(D,R,A),Be(D,"VER",u.la),Wo(u,D),D}function bm(u,A,R){if(A&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return A=u.Ca&&!u.pa?new Je(new Oa({eb:R})):new Je(u.pa),A.Ha(u.J),A}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Im(){}t=Im.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ma(){}Ma.prototype.g=function(u,A){return new Gt(u,A)};function Gt(u,A){Ce.call(this),this.g=new dm(A),this.l=u,this.h=A&&A.messageUrlParams||null,u=A&&A.messageHeaders||null,A&&A.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=A&&A.initMessageHeaders||null,A&&A.messageContentType&&(u?u["X-WebChannel-Content-Type"]=A.messageContentType:u={"X-WebChannel-Content-Type":A.messageContentType}),A&&A.va&&(u?u["X-WebChannel-Client-Profile"]=A.va:u={"X-WebChannel-Client-Profile":A.va}),this.g.S=u,(u=A&&A.Sb)&&!p(u)&&(this.g.m=u),this.v=A&&A.supportsCrossDomainXhr||!1,this.u=A&&A.sendRawJson||!1,(A=A&&A.httpSessionIdParam)&&!p(A)&&(this.g.D=A,u=this.h,u!==null&&A in u&&(u=this.h,A in u&&delete u[A])),this.j=new Ai(this)}w(Gt,Ce),Gt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Gt.prototype.close=function(){Ec(this.g)},Gt.prototype.o=function(u){var A=this.g;if(typeof u=="string"){var R={};R.__data__=u,u=R}else this.u&&(R={},R.__data__=lc(u),u=R);A.i.push(new Mw(A.Ya++,u)),A.G==3&&Da(A)},Gt.prototype.N=function(){this.g.l=null,delete this.j,Ec(this.g),delete this.g,Gt.aa.N.call(this)};function Am(u){cc.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var A=u.__sm__;if(A){e:{for(const R in A){u=R;break e}u=void 0}(this.i=u)&&(u=this.i,A=A!==null&&u in A?A[u]:void 0),this.data=A}else this.data=u}w(Am,cc);function Sm(){fc.call(this),this.status=1}w(Sm,fc);function Ai(u){this.g=u}w(Ai,Im),Ai.prototype.ua=function(){Ue(this.g,"a")},Ai.prototype.ta=function(u){Ue(this.g,new Am(u))},Ai.prototype.sa=function(u){Ue(this.g,new Sm)},Ai.prototype.ra=function(){Ue(this.g,"b")},Ma.prototype.createWebChannel=Ma.prototype.g,Gt.prototype.send=Gt.prototype.o,Gt.prototype.open=Gt.prototype.m,Gt.prototype.close=Gt.prototype.close,F1=function(){return new Ma},V1=function(){return ba()},j1=Hr,gh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ia.NO_ERROR=0,Ia.TIMEOUT=8,Ia.HTTP_ERROR=6,Sl=Ia,qp.COMPLETE="complete",M1=qp,jp.EventType=Lo,Lo.OPEN="a",Lo.CLOSE="b",Lo.ERROR="c",Lo.MESSAGE="d",Ce.prototype.listen=Ce.prototype.K,cs=jp,Je.prototype.listenOnce=Je.prototype.L,Je.prototype.getLastError=Je.prototype.Ka,Je.prototype.getLastErrorCode=Je.prototype.Ba,Je.prototype.getStatus=Je.prototype.Z,Je.prototype.getResponseJson=Je.prototype.Oa,Je.prototype.getResponseText=Je.prototype.oa,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Ha,L1=Je}).apply(typeof nl<"u"?nl:typeof self<"u"?self:typeof window<"u"?window:{});const hy="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};xt.UNAUTHENTICATED=new xt(null),xt.GOOGLE_CREDENTIALS=new xt("google-credentials-uid"),xt.FIRST_PARTY=new xt("first-party-uid"),xt.MOCK_USER=new xt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Io="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mi=new Cd("@firebase/firestore");function ts(){return mi.logLevel}function pe(t,...e){if(mi.logLevel<=Pe.DEBUG){const n=e.map(Hd);mi.debug(`Firestore (${Io}): ${t}`,...n)}}function Jn(t,...e){if(mi.logLevel<=Pe.ERROR){const n=e.map(Hd);mi.error(`Firestore (${Io}): ${t}`,...n)}}function fo(t,...e){if(mi.logLevel<=Pe.WARN){const n=e.map(Hd);mi.warn(`Firestore (${Io}): ${t}`,...n)}}function Hd(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ve(t="Unexpected state"){const e=`FIRESTORE (${Io}) INTERNAL ASSERTION FAILED: `+t;throw Jn(e),new Error(e)}function Le(t,e){t||ve()}function Ee(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends tr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class T2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(xt.UNAUTHENTICATED))}shutdown(){}}class b2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class I2{constructor(e){this.t=e,this.currentUser=xt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Le(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let o=new Rr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Rr,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const l=o;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Rr)}},0),s()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Le(typeof r.accessToken=="string"),new U1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Le(e===null||typeof e=="string"),new xt(e)}}class A2{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=xt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class S2{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new A2(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(xt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class k2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class P2{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Le(this.o===void 0);const r=o=>{o.error!=null&&pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,pe("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Le(typeof n.token=="string"),this.R=n.token,new k2(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x2(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=x2(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}}function Ne(t,e){return t<e?-1:t>e?1:0}function ho(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new fe(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new fe(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new fe(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ft.fromMillis(Date.now())}static fromDate(e){return ft.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new ft(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ne(this.nanoseconds,e.nanoseconds):Ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.timestamp=e}static fromTimestamp(e){return new _e(e)}static min(){return new _e(new ft(0,0))}static max(){return new _e(new ft(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e,n,r){n===void 0?n=0:n>e.length&&ve(),r===void 0?r=e.length-n:r>e.length-n&&ve(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ks.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ks?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ze extends Ks{construct(e,n,r){return new ze(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new fe(re.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ze(n)}static emptyPath(){return new ze([])}}const O2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class _t extends Ks{construct(e,n,r){return new _t(e,n,r)}static isValidIdentifier(e){return O2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),_t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new _t(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new fe(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new fe(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new fe(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new fe(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new _t(n)}static emptyPath(){return new _t([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.path=e}static fromPath(e){return new ge(ze.fromString(e))}static fromName(e){return new ge(ze.fromString(e).popFirst(5))}static empty(){return new ge(ze.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ze.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ze.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ge(new ze(e.slice()))}}function R2(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=_e.fromTimestamp(r===1e9?new ft(n+1,0):new ft(n,r));return new Lr(i,ge.empty(),e)}function N2(t){return new Lr(t.readTime,t.key,-1)}class Lr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Lr(_e.min(),ge.empty(),-1)}static max(){return new Lr(_e.max(),ge.empty(),-1)}}function C2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ge.comparator(t.documentKey,e.documentKey),n!==0?n:Ne(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class L2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function da(t){if(t.code!==re.FAILED_PRECONDITION||t.message!==D2)throw t;pe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ve(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new oe((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof oe?n:oe.resolve(n)}catch(n){return oe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):oe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):oe.reject(n)}static resolve(e){return new oe((n,r)=>{n(e)})}static reject(e){return new oe((n,r)=>{r(e)})}static waitFor(e){return new oe((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},l=>r(l))}),s=!0,o===i&&n()})}static or(e){let n=oe.resolve(!1);for(const r of e)n=n.next(i=>i?oe.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new oe((r,i)=>{const o=e.length,s=new Array(o);let a=0;for(let l=0;l<o;l++){const c=l;n(e[c]).next(d=>{s[c]=d,++a,a===o&&r(s)},d=>i(d))}})}static doWhile(e,n){return new oe((r,i)=>{const o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}}function M2(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function pa(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Wd.oe=-1;function Fu(t){return t==null}function uu(t){return t===0&&1/t==-1/0}function j2(t){return typeof t=="number"&&Number.isInteger(t)&&!uu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dy(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function wi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function q1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e,n){this.comparator=e,this.root=n||vt.EMPTY}insert(e,n){return new Xe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,vt.BLACK,null,null))}remove(e){return new Xe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,vt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new rl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new rl(this.root,e,this.comparator,!1)}getReverseIterator(){return new rl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new rl(this.root,e,this.comparator,!0)}}class rl{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class vt{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??vt.RED,this.left=i??vt.EMPTY,this.right=o??vt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new vt(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return vt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return vt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,vt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,vt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ve();const e=this.left.check();if(e!==this.right.check())throw ve();return e+(this.isRed()?0:1)}}vt.EMPTY=null,vt.RED=!0,vt.BLACK=!1;vt.EMPTY=new class{constructor(){this.size=0}get key(){throw ve()}get value(){throw ve()}get color(){throw ve()}get left(){throw ve()}get right(){throw ve()}copy(e,n,r,i,o){return this}insert(e,n,r){return new vt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this.comparator=e,this.data=new Xe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new py(this.data.getIterator())}getIteratorFrom(e){return new py(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof wt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new wt(this.comparator);return n.data=e,n}}class py{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.fields=e,e.sort(_t.comparator)}static empty(){return new Jt([])}unionWith(e){let n=new wt(_t.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Jt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ho(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new $1("Invalid base64 string: "+o):o}}(e);return new bt(n)}static fromUint8Array(e){const n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new bt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bt.EMPTY_BYTE_STRING=new bt("");const V2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Mr(t){if(Le(!!t),typeof t=="string"){let e=0;const n=V2.exec(t);if(Le(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:rt(t.seconds),nanos:rt(t.nanos)}}function rt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function gi(t){return typeof t=="string"?bt.fromBase64String(t):bt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kd(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Gd(t){const e=t.mapValue.fields.__previous_value__;return Kd(e)?Gd(e):e}function Gs(t){const e=Mr(t.mapValue.fields.__local_write_time__.timestampValue);return new ft(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(e,n,r,i,o,s,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Qs{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Qs("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Qs&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const il={mapValue:{}};function yi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Kd(t)?4:B2(t)?9007199254740991:U2(t)?10:11:ve()}function Dn(t,e){if(t===e)return!0;const n=yi(t);if(n!==yi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Gs(t).isEqual(Gs(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=Mr(i.timestampValue),a=Mr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return gi(i.bytesValue).isEqual(gi(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return rt(i.geoPointValue.latitude)===rt(o.geoPointValue.latitude)&&rt(i.geoPointValue.longitude)===rt(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return rt(i.integerValue)===rt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=rt(i.doubleValue),a=rt(o.doubleValue);return s===a?uu(s)===uu(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return ho(t.arrayValue.values||[],e.arrayValue.values||[],Dn);case 10:case 11:return function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(dy(s)!==dy(a))return!1;for(const l in s)if(s.hasOwnProperty(l)&&(a[l]===void 0||!Dn(s[l],a[l])))return!1;return!0}(t,e);default:return ve()}}function Ys(t,e){return(t.values||[]).find(n=>Dn(n,e))!==void 0}function po(t,e){if(t===e)return 0;const n=yi(t),r=yi(e);if(n!==r)return Ne(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ne(t.booleanValue,e.booleanValue);case 2:return function(o,s){const a=rt(o.integerValue||o.doubleValue),l=rt(s.integerValue||s.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return my(t.timestampValue,e.timestampValue);case 4:return my(Gs(t),Gs(e));case 5:return Ne(t.stringValue,e.stringValue);case 6:return function(o,s){const a=gi(o),l=gi(s);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){const a=o.split("/"),l=s.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=Ne(a[c],l[c]);if(d!==0)return d}return Ne(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){const a=Ne(rt(o.latitude),rt(s.latitude));return a!==0?a:Ne(rt(o.longitude),rt(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return gy(t.arrayValue,e.arrayValue);case 10:return function(o,s){var a,l,c,d;const h=o.fields||{},f=s.fields||{},m=(a=h.value)===null||a===void 0?void 0:a.arrayValue,w=(l=f.value)===null||l===void 0?void 0:l.arrayValue,_=Ne(((c=m==null?void 0:m.values)===null||c===void 0?void 0:c.length)||0,((d=w==null?void 0:w.values)===null||d===void 0?void 0:d.length)||0);return _!==0?_:gy(m,w)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===il.mapValue&&s===il.mapValue)return 0;if(o===il.mapValue)return 1;if(s===il.mapValue)return-1;const a=o.fields||{},l=Object.keys(a),c=s.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const f=Ne(l[h],d[h]);if(f!==0)return f;const m=po(a[l[h]],c[d[h]]);if(m!==0)return m}return Ne(l.length,d.length)}(t.mapValue,e.mapValue);default:throw ve()}}function my(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ne(t,e);const n=Mr(t),r=Mr(e),i=Ne(n.seconds,r.seconds);return i!==0?i:Ne(n.nanos,r.nanos)}function gy(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=po(n[i],r[i]);if(o)return o}return Ne(n.length,r.length)}function mo(t){return yh(t)}function yh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Mr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return gi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ge.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=yh(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${yh(n.fields[s])}`;return i+"}"}(t.mapValue):ve()}function yy(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function vh(t){return!!t&&"integerValue"in t}function Qd(t){return!!t&&"arrayValue"in t}function vy(t){return!!t&&"nullValue"in t}function _y(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function kl(t){return!!t&&"mapValue"in t}function U2(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Is(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return wi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Is(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Is(t.arrayValue.values[n]);return e}return Object.assign({},t)}function B2(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.value=e}static empty(){return new Bt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!kl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Is(n)}setAll(e){let n=_t.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=Is(s):i.push(a.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());kl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Dn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];kl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){wi(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new Bt(Is(this.value))}}function z1(t){const e=[];return wi(t.fields,(n,r)=>{const i=new _t([n]);if(kl(r)){const o=z1(r.mapValue).fields;if(o.length===0)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new Jt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new Rt(e,0,_e.min(),_e.min(),_e.min(),Bt.empty(),0)}static newFoundDocument(e,n,r,i){return new Rt(e,1,n,_e.min(),r,i,0)}static newNoDocument(e,n){return new Rt(e,2,n,_e.min(),_e.min(),Bt.empty(),0)}static newUnknownDocument(e,n){return new Rt(e,3,n,_e.min(),_e.min(),Bt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(_e.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=_e.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Rt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Rt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(e,n){this.position=e,this.inclusive=n}}function Ey(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(o.field.isKeyField()?r=ge.comparator(ge.fromName(s.referenceValue),n.key):r=po(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function wy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Dn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e,n="asc"){this.field=e,this.dir=n}}function q2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let H1=class{};class lt extends H1{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new z2(e,n,r):n==="array-contains"?new K2(e,r):n==="in"?new G2(e,r):n==="not-in"?new Q2(e,r):n==="array-contains-any"?new Y2(e,r):new lt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new H2(e,r):new W2(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(po(n,this.value)):n!==null&&yi(this.value)===yi(n)&&this.matchesComparison(po(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ve()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class wn extends H1{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new wn(e,n)}matches(e){return W1(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function W1(t){return t.op==="and"}function K1(t){return $2(t)&&W1(t)}function $2(t){for(const e of t.filters)if(e instanceof wn)return!1;return!0}function _h(t){if(t instanceof lt)return t.field.canonicalString()+t.op.toString()+mo(t.value);if(K1(t))return t.filters.map(e=>_h(e)).join(",");{const e=t.filters.map(n=>_h(n)).join(",");return`${t.op}(${e})`}}function G1(t,e){return t instanceof lt?function(r,i){return i instanceof lt&&r.op===i.op&&r.field.isEqual(i.field)&&Dn(r.value,i.value)}(t,e):t instanceof wn?function(r,i){return i instanceof wn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&G1(s,i.filters[a]),!0):!1}(t,e):void ve()}function Q1(t){return t instanceof lt?function(n){return`${n.field.canonicalString()} ${n.op} ${mo(n.value)}`}(t):t instanceof wn?function(n){return n.op.toString()+" {"+n.getFilters().map(Q1).join(" ,")+"}"}(t):"Filter"}class z2 extends lt{constructor(e,n,r){super(e,n,r),this.key=ge.fromName(r.referenceValue)}matches(e){const n=ge.comparator(e.key,this.key);return this.matchesComparison(n)}}class H2 extends lt{constructor(e,n){super(e,"in",n),this.keys=Y1("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class W2 extends lt{constructor(e,n){super(e,"not-in",n),this.keys=Y1("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Y1(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ge.fromName(r.referenceValue))}class K2 extends lt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Qd(n)&&Ys(n.arrayValue,this.value)}}class G2 extends lt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ys(this.value.arrayValue,n)}}class Q2 extends lt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ys(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ys(this.value.arrayValue,n)}}class Y2 extends lt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Qd(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ys(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}}function Ty(t,e=null,n=[],r=[],i=null,o=null,s=null){return new X2(t,e,n,r,i,o,s)}function Yd(t){const e=Ee(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>_h(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Fu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>mo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>mo(r)).join(",")),e.ue=n}return e.ue}function Xd(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!q2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!G1(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!wy(t.startAt,e.startAt)&&wy(t.endAt,e.endAt)}function Eh(t){return ge.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function J2(t,e,n,r,i,o,s,a){return new Ao(t,e,n,r,i,o,s,a)}function Jd(t){return new Ao(t)}function by(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function X1(t){return t.collectionGroup!==null}function As(t){const e=Ee(t);if(e.ce===null){e.ce=[];const n=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new wt(_t.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Xs(o,r))}),n.has(_t.keyField().canonicalString())||e.ce.push(new Xs(_t.keyField(),r))}return e.ce}function Nn(t){const e=Ee(t);return e.le||(e.le=Z2(e,As(t))),e.le}function Z2(t,e){if(t.limitType==="F")return Ty(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new Xs(i.field,o)});const n=t.endAt?new cu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new cu(t.startAt.position,t.startAt.inclusive):null;return Ty(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function wh(t,e){const n=t.filters.concat([e]);return new Ao(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Th(t,e,n){return new Ao(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Uu(t,e){return Xd(Nn(t),Nn(e))&&t.limitType===e.limitType}function J1(t){return`${Yd(Nn(t))}|lt:${t.limitType}`}function Pi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Q1(i)).join(", ")}]`),Fu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>mo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>mo(i)).join(",")),`Target(${r})`}(Nn(t))}; limitType=${t.limitType})`}function Bu(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ge.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of As(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,a,l){const c=Ey(s,a,l);return s.inclusive?c<=0:c<0}(r.startAt,As(r),i)||r.endAt&&!function(s,a,l){const c=Ey(s,a,l);return s.inclusive?c>=0:c>0}(r.endAt,As(r),i))}(t,e)}function eP(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Z1(t){return(e,n)=>{let r=!1;for(const i of As(t)){const o=tP(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function tP(t,e,n){const r=t.field.isKeyField()?ge.comparator(e.key,n.key):function(o,s,a){const l=s.data.field(o),c=a.data.field(o);return l!==null&&c!==null?po(l,c):ve()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){wi(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return q1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nP=new Xe(ge.comparator);function Zn(){return nP}const eE=new Xe(ge.comparator);function fs(...t){let e=eE;for(const n of t)e=e.insert(n.key,n);return e}function tE(t){let e=eE;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ri(){return Ss()}function nE(){return Ss()}function Ss(){return new So(t=>t.toString(),(t,e)=>t.isEqual(e))}const rP=new Xe(ge.comparator),iP=new wt(ge.comparator);function ke(...t){let e=iP;for(const n of t)e=e.add(n);return e}const oP=new wt(Ne);function sP(){return oP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zd(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:uu(e)?"-0":e}}function rE(t){return{integerValue:""+t}}function iE(t,e){return j2(e)?rE(e):Zd(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(){this._=void 0}}function aP(t,e,n){return t instanceof Js?function(i,o){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Kd(o)&&(o=Gd(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof Zs?sE(t,e):t instanceof ea?aE(t,e):function(i,o){const s=oE(i,o),a=Iy(s)+Iy(i.Pe);return vh(s)&&vh(i.Pe)?rE(a):Zd(i.serializer,a)}(t,e)}function lP(t,e,n){return t instanceof Zs?sE(t,e):t instanceof ea?aE(t,e):n}function oE(t,e){return t instanceof ta?function(r){return vh(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class Js extends qu{}class Zs extends qu{constructor(e){super(),this.elements=e}}function sE(t,e){const n=lE(e);for(const r of t.elements)n.some(i=>Dn(i,r))||n.push(r);return{arrayValue:{values:n}}}class ea extends qu{constructor(e){super(),this.elements=e}}function aE(t,e){let n=lE(e);for(const r of t.elements)n=n.filter(i=>!Dn(i,r));return{arrayValue:{values:n}}}class ta extends qu{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Iy(t){return rt(t.integerValue||t.doubleValue)}function lE(t){return Qd(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(e,n){this.field=e,this.transform=n}}function uP(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Zs&&i instanceof Zs||r instanceof ea&&i instanceof ea?ho(r.elements,i.elements,Dn):r instanceof ta&&i instanceof ta?Dn(r.Pe,i.Pe):r instanceof Js&&i instanceof Js}(t.transform,e.transform)}class cP{constructor(e,n){this.version=e,this.transformResults=n}}class Wt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Wt}static exists(e){return new Wt(void 0,e)}static updateTime(e){return new Wt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Pl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class $u{}function cE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new zu(t.key,Wt.none()):new ma(t.key,t.data,Wt.none());{const n=t.data,r=Bt.empty();let i=new wt(_t.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new $r(t.key,r,new Jt(i.toArray()),Wt.none())}}function fP(t,e,n){t instanceof ma?function(i,o,s){const a=i.value.clone(),l=Sy(i.fieldTransforms,o,s.transformResults);a.setAll(l),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof $r?function(i,o,s){if(!Pl(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=Sy(i.fieldTransforms,o,s.transformResults),l=o.data;l.setAll(fE(i)),l.setAll(a),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function ks(t,e,n,r){return t instanceof ma?function(o,s,a,l){if(!Pl(o.precondition,s))return a;const c=o.value.clone(),d=ky(o.fieldTransforms,l,s);return c.setAll(d),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof $r?function(o,s,a,l){if(!Pl(o.precondition,s))return a;const c=ky(o.fieldTransforms,l,s),d=s.data;return d.setAll(fE(o)),d.setAll(c),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(o,s,a){return Pl(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function hP(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=oE(r.transform,i||null);o!=null&&(n===null&&(n=Bt.empty()),n.set(r.field,o))}return n||null}function Ay(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ho(r,i,(o,s)=>uP(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ma extends $u{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class $r extends $u{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function fE(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Sy(t,e,n){const r=new Map;Le(t.length===n.length);for(let i=0;i<n.length;i++){const o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,lP(s,a,n[i]))}return r}function ky(t,e,n){const r=new Map;for(const i of t){const o=i.transform,s=n.data.field(i.field);r.set(i.field,aP(o,s,e))}return r}class zu extends $u{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class dP extends $u{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&fP(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ks(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ks(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=nE();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;const l=cE(s,a);l!==null&&r.set(i.key,l),s.isValidDocument()||s.convertToNoDocument(_e.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ke())}isEqual(e){return this.batchId===e.batchId&&ho(this.mutations,e.mutations,(n,r)=>Ay(n,r))&&ho(this.baseMutations,e.baseMutations,(n,r)=>Ay(n,r))}}class ep{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Le(e.mutations.length===r.length);let i=function(){return rP}();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new ep(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var st,xe;function yP(t){switch(t){default:return ve();case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0}}function hE(t){if(t===void 0)return Jn("GRPC error has no .code"),re.UNKNOWN;switch(t){case st.OK:return re.OK;case st.CANCELLED:return re.CANCELLED;case st.UNKNOWN:return re.UNKNOWN;case st.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case st.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case st.INTERNAL:return re.INTERNAL;case st.UNAVAILABLE:return re.UNAVAILABLE;case st.UNAUTHENTICATED:return re.UNAUTHENTICATED;case st.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case st.NOT_FOUND:return re.NOT_FOUND;case st.ALREADY_EXISTS:return re.ALREADY_EXISTS;case st.PERMISSION_DENIED:return re.PERMISSION_DENIED;case st.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case st.ABORTED:return re.ABORTED;case st.OUT_OF_RANGE:return re.OUT_OF_RANGE;case st.UNIMPLEMENTED:return re.UNIMPLEMENTED;case st.DATA_LOSS:return re.DATA_LOSS;default:return ve()}}(xe=st||(st={}))[xe.OK=0]="OK",xe[xe.CANCELLED=1]="CANCELLED",xe[xe.UNKNOWN=2]="UNKNOWN",xe[xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xe[xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xe[xe.NOT_FOUND=5]="NOT_FOUND",xe[xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",xe[xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",xe[xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",xe[xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xe[xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xe[xe.ABORTED=10]="ABORTED",xe[xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",xe[xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",xe[xe.INTERNAL=13]="INTERNAL",xe[xe.UNAVAILABLE=14]="UNAVAILABLE",xe[xe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _P=new si([4294967295,4294967295],0);function Py(t){const e=vP().encode(t),n=new D1;return n.update(e),new Uint8Array(n.digest())}function xy(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new si([n,r],0),new si([i,o],0)]}class tp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new hs(`Invalid padding: ${n}`);if(r<0)throw new hs(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new hs(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new hs(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=si.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(si.fromNumber(r)));return i.compare(_P)===1&&(i=new si([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Py(e),[r,i]=xy(n);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new tp(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;const n=Py(e),[r,i]=xy(n);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class hs extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,ga.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Hu(_e.min(),i,new Xe(Ne),Zn(),ke())}}class ga{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ga(r,n,ke(),ke(),ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class dE{constructor(e,n){this.targetId=e,this.me=n}}class pE{constructor(e,n,r=bt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Oy{constructor(){this.fe=0,this.ge=Ny(),this.pe=bt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ke(),n=ke(),r=ke();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ve()}}),new ga(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Ny()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Le(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class EP{constructor(e){this.Le=e,this.Be=new Map,this.ke=Zn(),this.qe=Ry(),this.Qe=new Xe(Ne)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ve()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const o=i.target;if(Eh(o))if(r===0){const s=new ge(o.path);this.Ue(n,s,Rt.newNoDocument(s,_e.min()))}else Le(r===1);else{const s=this.Ye(n);if(s!==r){const a=this.Ze(e),l=a?this.Xe(a,e,s):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let s,a;try{s=gi(r).toUint8Array()}catch(l){if(l instanceof $1)return fo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new tp(s,i,o)}catch(l){return fo(l instanceof hs?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,o,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((o,s)=>{const a=this.Je(s);if(a){if(o.current&&Eh(a.target)){const l=new ge(a.target.path);this.ke.get(l)!==null||this.it(s,l)||this.Ue(s,l,Rt.newNoDocument(l,e))}o.be&&(n.set(s,o.ve()),o.Ce())}});let r=ke();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));const i=new Hu(e,n,this.Qe,this.ke,r);return this.ke=Zn(),this.qe=Ry(),this.Qe=new Xe(Ne),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Oy,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new wt(Ne),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||pe("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Oy),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Ry(){return new Xe(ge.comparator)}function Ny(){return new Xe(ge.comparator)}const wP={asc:"ASCENDING",desc:"DESCENDING"},TP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bP={and:"AND",or:"OR"};class IP{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function bh(t,e){return t.useProto3Json||Fu(e)?e:{value:e}}function fu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function mE(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function AP(t,e){return fu(t,e.toTimestamp())}function Cn(t){return Le(!!t),_e.fromTimestamp(function(n){const r=Mr(n);return new ft(r.seconds,r.nanos)}(t))}function np(t,e){return Ih(t,e).canonicalString()}function Ih(t,e){const n=function(i){return new ze(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function gE(t){const e=ze.fromString(t);return Le(wE(e)),e}function Ah(t,e){return np(t.databaseId,e.path)}function rf(t,e){const n=gE(e);if(n.get(1)!==t.databaseId.projectId)throw new fe(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new fe(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ge(vE(n))}function yE(t,e){return np(t.databaseId,e)}function SP(t){const e=gE(t);return e.length===4?ze.emptyPath():vE(e)}function Sh(t){return new ze(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function vE(t){return Le(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Cy(t,e,n){return{name:Ah(t,e),fields:n.value.mapValue.fields}}function kP(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ve()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(c,d){return c.useProto3Json?(Le(d===void 0||typeof d=="string"),bt.fromBase64String(d||"")):(Le(d===void 0||d instanceof Buffer||d instanceof Uint8Array),bt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(c){const d=c.code===void 0?re.UNKNOWN:hE(c.code);return new fe(d,c.message||"")}(s);n=new pE(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=rf(t,r.document.name),o=Cn(r.document.updateTime),s=r.document.createTime?Cn(r.document.createTime):_e.min(),a=new Bt({mapValue:{fields:r.document.fields}}),l=Rt.newFoundDocument(i,o,s,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new xl(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=rf(t,r.document),o=r.readTime?Cn(r.readTime):_e.min(),s=Rt.newNoDocument(i,o),a=r.removedTargetIds||[];n=new xl([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=rf(t,r.document),o=r.removedTargetIds||[];n=new xl([],o,i,null)}else{if(!("filter"in e))return ve();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,s=new gP(i,o),a=r.targetId;n=new dE(a,s)}}return n}function PP(t,e){let n;if(e instanceof ma)n={update:Cy(t,e.key,e.value)};else if(e instanceof zu)n={delete:Ah(t,e.key)};else if(e instanceof $r)n={update:Cy(t,e.key,e.data),updateMask:jP(e.fieldMask)};else{if(!(e instanceof dP))return ve();n={verify:Ah(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const a=s.transform;if(a instanceof Js)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Zs)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ea)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ta)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw ve()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:AP(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ve()}(t,e.precondition)),n}function xP(t,e){return t&&t.length>0?(Le(e!==void 0),t.map(n=>function(i,o){let s=i.updateTime?Cn(i.updateTime):Cn(o);return s.isEqual(_e.min())&&(s=Cn(o)),new cP(s,i.transformResults||[])}(n,e))):[]}function OP(t,e){return{documents:[yE(t,e.path)]}}function RP(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=yE(t,i);const o=function(c){if(c.length!==0)return EE(wn.create(c,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const s=function(c){if(c.length!==0)return c.map(d=>function(f){return{field:xi(f.field),direction:DP(f.dir)}}(d))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const a=bh(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function NP(t){let e=SP(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Le(r===1);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let o=[];n.where&&(o=function(h){const f=_E(h);return f instanceof wn&&K1(f)?f.getFilters():[f]}(n.where));let s=[];n.orderBy&&(s=function(h){return h.map(f=>function(w){return new Xs(Oi(w.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,Fu(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(h){const f=!!h.before,m=h.values||[];return new cu(m,f)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const f=!h.before,m=h.values||[];return new cu(m,f)}(n.endAt)),J2(e,i,s,o,a,"F",l,c)}function CP(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ve()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function _E(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Oi(n.unaryFilter.field);return lt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Oi(n.unaryFilter.field);return lt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Oi(n.unaryFilter.field);return lt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Oi(n.unaryFilter.field);return lt.create(s,"!=",{nullValue:"NULL_VALUE"});default:return ve()}}(t):t.fieldFilter!==void 0?function(n){return lt.create(Oi(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ve()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return wn.create(n.compositeFilter.filters.map(r=>_E(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ve()}}(n.compositeFilter.op))}(t):ve()}function DP(t){return wP[t]}function LP(t){return TP[t]}function MP(t){return bP[t]}function xi(t){return{fieldPath:t.canonicalString()}}function Oi(t){return _t.fromServerFormat(t.fieldPath)}function EE(t){return t instanceof lt?function(n){if(n.op==="=="){if(_y(n.value))return{unaryFilter:{field:xi(n.field),op:"IS_NAN"}};if(vy(n.value))return{unaryFilter:{field:xi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(_y(n.value))return{unaryFilter:{field:xi(n.field),op:"IS_NOT_NAN"}};if(vy(n.value))return{unaryFilter:{field:xi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xi(n.field),op:LP(n.op),value:n.value}}}(t):t instanceof wn?function(n){const r=n.getFilters().map(i=>EE(i));return r.length===1?r[0]:{compositeFilter:{op:MP(n.op),filters:r}}}(t):ve()}function jP(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function wE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e,n,r,i,o=_e.min(),s=_e.min(),a=bt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new _r(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new _r(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _r(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _r(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(e){this.ct=e}}function FP(t){const e=NP({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Th(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{constructor(){this.un=new BP}addToCollectionParentIndex(e,n){return this.un.add(n),oe.resolve()}getCollectionParents(e,n){return oe.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return oe.resolve()}deleteFieldIndex(e,n){return oe.resolve()}deleteAllFieldIndexes(e){return oe.resolve()}createTargetIndexes(e,n){return oe.resolve()}getDocumentsMatchingTarget(e,n){return oe.resolve(null)}getIndexType(e,n){return oe.resolve(0)}getFieldIndexes(e,n){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,n){return oe.resolve(Lr.min())}getMinOffsetFromCollectionGroup(e,n){return oe.resolve(Lr.min())}updateCollectionGroup(e,n,r){return oe.resolve()}updateIndexEntries(e,n){return oe.resolve()}}class BP{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new wt(ze.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new wt(ze.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new go(0)}static kn(){return new go(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(){this.changes=new So(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Rt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?oe.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&ks(r.mutation,i,Jt.empty(),ft.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ke()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ke()){const i=ri();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=fs();return o.forEach((a,l)=>{s=s.insert(a,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const r=ri();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ke()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=Zn();const s=Ss(),a=function(){return Ss()}();return n.forEach((l,c)=>{const d=r.get(c.key);i.has(c.key)&&(d===void 0||d.mutation instanceof $r)?o=o.insert(c.key,c):d!==void 0?(s.set(c.key,d.mutation.getFieldMask()),ks(d.mutation,c,d.mutation.getFieldMask(),ft.now())):s.set(c.key,Jt.empty())}),this.recalculateAndSaveOverlays(e,o).next(l=>(l.forEach((c,d)=>s.set(c,d)),n.forEach((c,d)=>{var h;return a.set(c,new $P(d,(h=s.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Ss();let i=new Xe((s,a)=>s-a),o=ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const a of s)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||Jt.empty();d=a.applyToLocalView(c,d),r.set(l,d);const h=(i.get(a.batchId)||ke()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,h=nE();d.forEach(f=>{if(!o.has(f)){const m=cE(n.get(f),r.get(f));m!==null&&h.set(f,m),o=o.add(f)}}),s.push(this.documentOverlayCache.saveOverlays(e,c,h))}return oe.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return ge.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):X1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):oe.resolve(ri());let a=-1,l=o;return s.next(c=>oe.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),o.get(d)?oe.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{l=l.insert(d,f)}))).next(()=>this.populateOverlays(e,c,o)).next(()=>this.computeViews(e,l,c,ke())).next(d=>({batchId:a,changes:tE(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ge(n)).next(r=>{let i=fs();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let s=fs();return this.indexManager.getCollectionParents(e,o).next(a=>oe.forEach(a,l=>{const c=function(h,f){return new Ao(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(o));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(d=>{d.forEach((h,f)=>{s=s.insert(h,f)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((l,c)=>{const d=c.getKey();s.get(d)===null&&(s=s.insert(d,Rt.newInvalidDocument(d)))});let a=fs();return s.forEach((l,c)=>{const d=o.get(l);d!==void 0&&ks(d.mutation,c,Jt.empty(),ft.now()),Bu(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return oe.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Cn(i.createTime)}}(n)),oe.resolve()}getNamedQuery(e,n){return oe.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:FP(i.bundledQuery),readTime:Cn(i.readTime)}}(n)),oe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(){this.overlays=new Xe(ge.comparator),this.Ir=new Map}getOverlay(e,n){return oe.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ri();return oe.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.ht(e,n,o)}),oe.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),oe.resolve()}getOverlaysForCollection(e,n,r){const i=ri(),o=n.length+1,s=new ge(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===o&&l.largestBatchId>r&&i.set(l.getKey(),l)}return oe.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Xe((c,d)=>c-d);const s=this.overlays.getIterator();for(;s.hasNext();){const c=s.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=o.get(c.largestBatchId);d===null&&(d=ri(),o=o.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=ri(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=i)););return oe.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new mP(n,r));let o=this.Ir.get(n);o===void 0&&(o=ke(),this.Ir.set(n,o)),this.Ir.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(){this.sessionToken=bt.EMPTY_BYTE_STRING}getSessionToken(e){return oe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,oe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(){this.Tr=new wt(ht.Er),this.dr=new wt(ht.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new ht(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new ht(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ge(new ze([])),r=new ht(n,e),i=new ht(n,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ge(new ze([])),r=new ht(n,e),i=new ht(n,e+1);let o=ke();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const n=new ht(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ht{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ge.comparator(e.key,n.key)||Ne(e.wr,n.wr)}static Ar(e,n){return Ne(e.wr,n.wr)||ge.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new wt(ht.Er)}checkEmpty(e){return oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new pP(o,n,r,i);this.mutationQueue.push(s);for(const a of i)this.br=this.br.add(new ht(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return oe.resolve(s)}lookupMutationBatch(e,n){return oe.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),o=i<0?0:i;return oe.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ht(n,0),i=new ht(n,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{const a=this.Dr(s.wr);o.push(a)}),oe.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new wt(Ne);return n.forEach(i=>{const o=new ht(i,0),s=new ht(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),oe.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;ge.isDocumentKey(o)||(o=o.child(""));const s=new ht(new ge(o),0);let a=new wt(Ne);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.wr)),!0)},s),oe.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Le(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return oe.forEach(n.mutations,i=>{const o=new ht(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new ht(n,0),i=this.br.firstAfterOrEqual(r);return oe.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,oe.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(e){this.Mr=e,this.docs=function(){return new Xe(ge.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return oe.resolve(r?r.document.mutableCopy():Rt.newInvalidDocument(n))}getEntries(e,n){let r=Zn();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Rt.newInvalidDocument(i))}),oe.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Zn();const s=n.path,a=new ge(s.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!s.isPrefixOf(c.path))break;c.path.length>s.length+1||C2(N2(d),r)<=0||(i.has(d.key)||Bu(n,d))&&(o=o.insert(d.key,d.mutableCopy()))}return oe.resolve(o)}getAllFromCollectionGroup(e,n,r,i){ve()}Or(e,n){return oe.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new YP(this)}getSize(e){return oe.resolve(this.size)}}class YP extends qP{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),oe.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{constructor(e){this.persistence=e,this.Nr=new So(n=>Yd(n),Xd),this.lastRemoteSnapshotVersion=_e.min(),this.highestTargetId=0,this.Lr=0,this.Br=new rp,this.targetCount=0,this.kr=go.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),oe.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new go(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,oe.resolve()}updateTargetData(e,n){return this.Kn(n),oe.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),oe.waitFor(o).next(()=>i)}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return oe.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),oe.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),oe.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),oe.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return oe.resolve(r)}containsKey(e,n){return oe.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Wd(0),this.Kr=!1,this.Kr=!0,this.$r=new KP,this.referenceDelegate=e(this),this.Ur=new XP(this),this.indexManager=new UP,this.remoteDocumentCache=function(i){return new QP(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new VP(n),this.Gr=new HP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new WP,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new GP(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){pe("MemoryPersistence","Starting transaction:",e);const i=new ZP(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,n){return oe.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class ZP extends L2{constructor(e){super(),this.currentSequenceNumber=e}}class ip{constructor(e){this.persistence=e,this.Jr=new rp,this.Yr=null}static Zr(e){return new ip(e)}get Xr(){if(this.Yr)return this.Yr;throw ve()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),oe.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),oe.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),oe.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.Xr,r=>{const i=ge.fromPath(r);return this.ei(e,i).next(o=>{o||n.removeEntry(i,_e.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return oe.or([()=>oe.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=ke(),i=ke();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new op(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return qI()?8:M2(Ct())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.Yi(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new ex;return this.Xi(e,n,s).next(a=>{if(o.result=a,this.zi)return this.es(e,n,s,a.size)})}).next(()=>o.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(ts()<=Pe.DEBUG&&pe("QueryEngine","SDK will not create cache indexes for query:",Pi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),oe.resolve()):(ts()<=Pe.DEBUG&&pe("QueryEngine","Query:",Pi(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(ts()<=Pe.DEBUG&&pe("QueryEngine","The SDK decides to create cache indexes for query:",Pi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Nn(n))):oe.resolve())}Yi(e,n){if(by(n))return oe.resolve(null);let r=Nn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Th(n,null,"F"),r=Nn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=ke(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,s,l.readTime)?this.Yi(e,Th(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,i){return by(n)||i.isEqual(_e.min())?oe.resolve(null):this.Ji.getDocuments(e,r).next(o=>{const s=this.ts(n,o);return this.ns(n,s,r,i)?oe.resolve(null):(ts()<=Pe.DEBUG&&pe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Pi(n)),this.rs(e,s,n,R2(i,-1)).next(a=>a))})}ts(e,n){let r=new wt(Z1(e));return n.forEach((i,o)=>{Bu(e,o)&&(r=r.add(o))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,n,r){return ts()<=Pe.DEBUG&&pe("QueryEngine","Using full collection scan to execute query:",Pi(n)),this.Ji.getDocumentsMatchingQuery(e,n,Lr.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Xe(Ne),this._s=new So(o=>Yd(o),Xd),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new zP(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function rx(t,e,n,r){return new nx(t,e,n,r)}async function TE(t,e){const n=Ee(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],a=[];let l=ke();for(const c of i){s.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of o){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:s,addedBatchIds:a}))})})}function ix(t,e){const n=Ee(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const h=c.batch,f=h.keys();let m=oe.resolve();return f.forEach(w=>{m=m.next(()=>d.getEntry(l,w)).next(_=>{const E=c.docVersions.get(w);Le(E!==null),_.version.compareTo(E)<0&&(h.applyToRemoteDocument(_,c),_.isValidDocument()&&(_.setReadTime(c.commitVersion),d.addEntry(_)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=ke();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function bE(t){const e=Ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function ox(t,e){const n=Ee(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((d,h)=>{const f=i.get(h);if(!f)return;a.push(n.Ur.removeMatchingKeys(o,d.removedDocuments,h).next(()=>n.Ur.addMatchingKeys(o,d.addedDocuments,h)));let m=f.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(bt.EMPTY_BYTE_STRING,_e.min()).withLastLimboFreeSnapshotVersion(_e.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),i=i.insert(h,m),function(_,E,g){return _.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=3e8?!0:g.addedDocuments.size+g.modifiedDocuments.size+g.removedDocuments.size>0}(f,m,d)&&a.push(n.Ur.updateTargetData(o,m))});let l=Zn(),c=ke();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(sx(o,s,e.documentUpdates).next(d=>{l=d.Ps,c=d.Is})),!r.isEqual(_e.min())){const d=n.Ur.getLastRemoteSnapshotVersion(o).next(h=>n.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(d)}return oe.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,l,c)).next(()=>l)}).then(o=>(n.os=i,o))}function sx(t,e,n){let r=ke(),i=ke();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=Zn();return n.forEach((a,l)=>{const c=o.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(_e.min())?(e.removeEntry(a,l.readTime),s=s.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),s=s.insert(a,l)):pe("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:s,Is:i}})}function ax(t,e){const n=Ee(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function lx(t,e){const n=Ee(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(o=>o?(i=o,oe.resolve(i)):n.Ur.allocateTargetId(r).next(s=>(i=new _r(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function kh(t,e,n){const r=Ee(t),i=r.os.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!pa(s))throw s;pe("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function Dy(t,e,n){const r=Ee(t);let i=_e.min(),o=ke();return r.persistence.runTransaction("Execute query","readwrite",s=>function(l,c,d){const h=Ee(l),f=h._s.get(d);return f!==void 0?oe.resolve(h.os.get(f)):h.Ur.getTargetData(c,d)}(r,s,Nn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(l=>{o=l})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,n?i:_e.min(),n?o:ke())).next(a=>(ux(r,eP(e),a),{documents:a,Ts:o})))}function ux(t,e,n){let r=t.us.get(e)||_e.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.us.set(e,r)}class Ly{constructor(){this.activeTargetIds=sP()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class cx{constructor(){this.so=new Ly,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Ly,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){pe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){pe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ol=null;function of(){return ol===null?ol=function(){return 268435456+Math.round(2147483648*Math.random())}():ol++,"0x"+ol.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pt="WebChannelConnection";class px extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(n,r,i,o,s){const a=of(),l=this.xo(n,r.toUriEncodedString());pe("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,o,s),this.No(n,l,c,i).then(d=>(pe("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw fo("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",l,"request:",i),d})}Lo(n,r,i,o,s,a){return this.Mo(n,r,i,o,s)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Io}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}xo(n,r){const i=hx[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const o=of();return new Promise((s,a)=>{const l=new L1;l.setWithCredentials(!0),l.listenOnce(M1.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Sl.NO_ERROR:const d=l.getResponseJson();pe(Pt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),s(d);break;case Sl.TIMEOUT:pe(Pt,`RPC '${e}' ${o} timed out`),a(new fe(re.DEADLINE_EXCEEDED,"Request time out"));break;case Sl.HTTP_ERROR:const h=l.getStatus();if(pe(Pt,`RPC '${e}' ${o} failed with status:`,h,"response text:",l.getResponseText()),h>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const m=f==null?void 0:f.error;if(m&&m.status&&m.message){const w=function(E){const g=E.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(g)>=0?g:re.UNKNOWN}(m.status);a(new fe(w,m.message))}else a(new fe(re.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new fe(re.UNAVAILABLE,"Connection failed."));break;default:ve()}}finally{pe(Pt,`RPC '${e}' ${o} completed.`)}});const c=JSON.stringify(i);pe(Pt,`RPC '${e}' ${o} sending request:`,i),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=of(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=F1(),a=V1(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=o.join("");pe(Pt,`Creating RPC '${e}' stream ${i}: ${d}`,l);const h=s.createWebChannel(d,l);let f=!1,m=!1;const w=new dx({Io:E=>{m?pe(Pt,`Not sending because RPC '${e}' stream ${i} is closed:`,E):(f||(pe(Pt,`Opening RPC '${e}' stream ${i} transport.`),h.open(),f=!0),pe(Pt,`RPC '${e}' stream ${i} sending:`,E),h.send(E))},To:()=>h.close()}),_=(E,g,p)=>{E.listen(g,v=>{try{p(v)}catch(y){setTimeout(()=>{throw y},0)}})};return _(h,cs.EventType.OPEN,()=>{m||(pe(Pt,`RPC '${e}' stream ${i} transport opened.`),w.yo())}),_(h,cs.EventType.CLOSE,()=>{m||(m=!0,pe(Pt,`RPC '${e}' stream ${i} transport closed`),w.So())}),_(h,cs.EventType.ERROR,E=>{m||(m=!0,fo(Pt,`RPC '${e}' stream ${i} transport errored:`,E),w.So(new fe(re.UNAVAILABLE,"The operation could not be completed")))}),_(h,cs.EventType.MESSAGE,E=>{var g;if(!m){const p=E.data[0];Le(!!p);const v=p,y=v.error||((g=v[0])===null||g===void 0?void 0:g.error);if(y){pe(Pt,`RPC '${e}' stream ${i} received error:`,y);const k=y.status;let N=function(P){const b=st[P];if(b!==void 0)return hE(b)}(k),S=y.message;N===void 0&&(N=re.INTERNAL,S="Unknown error status: "+k+" with message "+y.message),m=!0,w.So(new fe(N,S)),h.close()}else pe(Pt,`RPC '${e}' stream ${i} received:`,p),w.bo(p)}}),_(a,j1.STAT_EVENT,E=>{E.stat===gh.PROXY?pe(Pt,`RPC '${e}' stream ${i} detected buffering proxy`):E.stat===gh.NOPROXY&&pe(Pt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.wo()},0),w}}function sf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wu(t){return new IP(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(e,n,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&pe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(e,n,r,i,o,s,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new IE(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===re.RESOURCE_EXHAUSTED?(Jn(n.toString()),Jn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new fe(re.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return pe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(pe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class mx extends AE{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=kP(this.serializer,e),r=function(o){if(!("targetChange"in o))return _e.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?_e.min():s.readTime?Cn(s.readTime):_e.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Sh(this.serializer),n.addTarget=function(o,s){let a;const l=s.target;if(a=Eh(l)?{documents:OP(o,l)}:{query:RP(o,l)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=mE(o,s.resumeToken);const c=bh(o,s.expectedCount);c!==null&&(a.expectedCount=c)}else if(s.snapshotVersion.compareTo(_e.min())>0){a.readTime=fu(o,s.snapshotVersion.toTimestamp());const c=bh(o,s.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=CP(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Sh(this.serializer),n.removeTarget=e,this.a_(n)}}class gx extends AE{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Le(!!e.streamToken),this.lastStreamToken=e.streamToken,Le(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Le(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=xP(e.writeResults,e.commitTime),r=Cn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Sh(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>PP(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new fe(re.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,Ih(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new fe(re.UNKNOWN,o.toString())})}Lo(e,n,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,Ih(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new fe(re.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class vx{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Jn(n),this.D_=!1):pe("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(async()=>{Ti(this)&&(pe("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=Ee(l);c.L_.add(4),await ya(c),c.q_.set("Unknown"),c.L_.delete(4),await Ku(c)}(this))})}),this.q_=new vx(r,i)}}async function Ku(t){if(Ti(t))for(const e of t.B_)await e(!0)}async function ya(t){for(const e of t.B_)await e(!1)}function SE(t,e){const n=Ee(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),up(n)?lp(n):ko(n).r_()&&ap(n,e))}function sp(t,e){const n=Ee(t),r=ko(n);n.N_.delete(e),r.r_()&&kE(n,e),n.N_.size===0&&(r.r_()?r.o_():Ti(n)&&n.q_.set("Unknown"))}function ap(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(_e.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ko(t).A_(e)}function kE(t,e){t.Q_.xe(e),ko(t).R_(e)}function lp(t){t.Q_=new EP({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),ko(t).start(),t.q_.v_()}function up(t){return Ti(t)&&!ko(t).n_()&&t.N_.size>0}function Ti(t){return Ee(t).L_.size===0}function PE(t){t.Q_=void 0}async function Ex(t){t.q_.set("Online")}async function wx(t){t.N_.forEach((e,n)=>{ap(t,e)})}async function Tx(t,e){PE(t),up(t)?(t.q_.M_(e),lp(t)):t.q_.set("Unknown")}async function bx(t,e,n){if(t.q_.set("Online"),e instanceof pE&&e.state===2&&e.cause)try{await async function(i,o){const s=o.cause;for(const a of o.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){pe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await hu(t,r)}else if(e instanceof xl?t.Q_.Ke(e):e instanceof dE?t.Q_.He(e):t.Q_.We(e),!n.isEqual(_e.min()))try{const r=await bE(t.localStore);n.compareTo(r)>=0&&await function(o,s){const a=o.Q_.rt(s);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=o.N_.get(c);d&&o.N_.set(c,d.withResumeToken(l.resumeToken,s))}}),a.targetMismatches.forEach((l,c)=>{const d=o.N_.get(l);if(!d)return;o.N_.set(l,d.withResumeToken(bt.EMPTY_BYTE_STRING,d.snapshotVersion)),kE(o,l);const h=new _r(d.target,l,c,d.sequenceNumber);ap(o,h)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){pe("RemoteStore","Failed to raise snapshot:",r),await hu(t,r)}}async function hu(t,e,n){if(!pa(e))throw e;t.L_.add(1),await ya(t),t.q_.set("Offline"),n||(n=()=>bE(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{pe("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Ku(t)})}function xE(t,e){return e().catch(n=>hu(t,n,e))}async function Gu(t){const e=Ee(t),n=jr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Ix(e);)try{const i=await ax(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,Ax(e,i)}catch(i){await hu(e,i)}OE(e)&&RE(e)}function Ix(t){return Ti(t)&&t.O_.length<10}function Ax(t,e){t.O_.push(e);const n=jr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function OE(t){return Ti(t)&&!jr(t).n_()&&t.O_.length>0}function RE(t){jr(t).start()}async function Sx(t){jr(t).p_()}async function kx(t){const e=jr(t);for(const n of t.O_)e.m_(n.mutations)}async function Px(t,e,n){const r=t.O_.shift(),i=ep.from(r,e,n);await xE(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Gu(t)}async function xx(t,e){e&&jr(t).V_&&await async function(r,i){if(function(s){return yP(s)&&s!==re.ABORTED}(i.code)){const o=r.O_.shift();jr(r).s_(),await xE(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Gu(r)}}(t,e),OE(t)&&RE(t)}async function jy(t,e){const n=Ee(t);n.asyncQueue.verifyOperationInProgress(),pe("RemoteStore","RemoteStore received new credentials");const r=Ti(n);n.L_.add(3),await ya(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Ku(n)}async function Ox(t,e){const n=Ee(t);e?(n.L_.delete(2),await Ku(n)):e||(n.L_.add(2),await ya(n),n.q_.set("Unknown"))}function ko(t){return t.K_||(t.K_=function(n,r,i){const o=Ee(n);return o.w_(),new mx(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:Ex.bind(null,t),Ro:wx.bind(null,t),mo:Tx.bind(null,t),d_:bx.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),up(t)?lp(t):t.q_.set("Unknown")):(await t.K_.stop(),PE(t))})),t.K_}function jr(t){return t.U_||(t.U_=function(n,r,i){const o=Ee(n);return o.w_(),new gx(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Sx.bind(null,t),mo:xx.bind(null,t),f_:kx.bind(null,t),g_:Px.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Gu(t)):(await t.U_.stop(),t.O_.length>0&&(pe("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Rr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const s=Date.now()+r,a=new cp(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fp(t,e){if(Jn("AsyncQueue",`${e}: ${t}`),pa(t))return new fe(re.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ge.comparator(n.key,r.key):(n,r)=>ge.comparator(n.key,r.key),this.keyedMap=fs(),this.sortedSet=new Xe(this.comparator)}static emptySet(e){return new eo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof eo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new eo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy{constructor(){this.W_=new Xe(ge.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ve():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class yo{constructor(e,n,r,i,o,s,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,o){const s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new yo(e,n,eo.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Uu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Nx{constructor(){this.queries=Fy(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=Ee(n),o=i.queries;i.queries=Fy(),o.forEach((s,a)=>{for(const l of a.j_)l.onError(r)})})(this,new fe(re.ABORTED,"Firestore shutting down"))}}function Fy(){return new So(t=>J1(t),Uu)}async function NE(t,e){const n=Ee(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new Rx,r=e.J_()?0:1);try{switch(r){case 0:o.z_=await n.onListen(i,!0);break;case 1:o.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){const a=fp(s,`Initialization of query '${Pi(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.j_.push(e),e.Z_(n.onlineState),o.z_&&e.X_(o.z_)&&hp(n)}async function CE(t,e){const n=Ee(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Cx(t,e){const n=Ee(t);let r=!1;for(const i of e){const o=i.query,s=n.queries.get(o);if(s){for(const a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&hp(n)}function Dx(t,e,n){const r=Ee(t),i=r.queries.get(e);if(i)for(const o of i.j_)o.onError(n);r.queries.delete(e)}function hp(t){t.Y_.forEach(e=>{e.next()})}var Ph,Uy;(Uy=Ph||(Ph={})).ea="default",Uy.Cache="cache";class DE{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new yo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=yo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Ph.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(e){this.key=e}}class ME{constructor(e){this.key=e}}class Lx{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ke(),this.mutatedKeys=ke(),this.Aa=Z1(e),this.Ra=new eo(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Vy,i=n?n.Ra:this.Ra;let o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,h)=>{const f=i.get(d),m=Bu(this.query,h)?h:null,w=!!f&&this.mutatedKeys.has(f.key),_=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let E=!1;f&&m?f.data.isEqual(m.data)?w!==_&&(r.track({type:3,doc:m}),E=!0):this.ga(f,m)||(r.track({type:2,doc:m}),E=!0,(l&&this.Aa(m,l)>0||c&&this.Aa(m,c)<0)&&(a=!0)):!f&&m?(r.track({type:0,doc:m}),E=!0):f&&!m&&(r.track({type:1,doc:f}),E=!0,(l||c)&&(a=!0)),E&&(m?(s=s.add(m),o=_?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),r.track({type:1,doc:d})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const s=e.fa.G_();s.sort((d,h)=>function(m,w){const _=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ve()}};return _(m)-_(w)}(d.type,h.type)||this.Aa(d.doc,h.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,s.length!==0||c?{snapshot:new yo(this.query,e.Ra,o,s,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Vy,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ke(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new ME(r))}),this.da.forEach(r=>{e.has(r)||n.push(new LE(r))}),n}ba(e){this.Ta=e.Ts,this.da=ke();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return yo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class Mx{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class jx{constructor(e){this.key=e,this.va=!1}}class Vx{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new So(a=>J1(a),Uu),this.Ma=new Map,this.xa=new Set,this.Oa=new Xe(ge.comparator),this.Na=new Map,this.La=new rp,this.Ba={},this.ka=new Map,this.qa=go.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function Fx(t,e,n=!0){const r=qE(t);let i;const o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=await jE(r,e,n,!0),i}async function Ux(t,e){const n=qE(t);await jE(n,e,!0,!1)}async function jE(t,e,n,r){const i=await lx(t.localStore,Nn(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n);let a;return r&&(a=await Bx(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&SE(t.remoteStore,i),a}async function Bx(t,e,n,r,i){t.Ka=(h,f,m)=>async function(_,E,g,p){let v=E.view.ma(g);v.ns&&(v=await Dy(_.localStore,E.query,!1).then(({documents:S})=>E.view.ma(S,v)));const y=p&&p.targetChanges.get(E.targetId),k=p&&p.targetMismatches.get(E.targetId)!=null,N=E.view.applyChanges(v,_.isPrimaryClient,y,k);return qy(_,E.targetId,N.wa),N.snapshot}(t,h,f,m);const o=await Dy(t.localStore,e,!0),s=new Lx(e,o.Ts),a=s.ma(o.documents),l=ga.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=s.applyChanges(a,t.isPrimaryClient,l);qy(t,n,c.wa);const d=new Mx(e,n,s);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function qx(t,e,n){const r=Ee(t),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!Uu(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await kh(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&sp(r.remoteStore,i.targetId),xh(r,i.targetId)}).catch(da)):(xh(r,i.targetId),await kh(r.localStore,i.targetId,!0))}async function $x(t,e){const n=Ee(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),sp(n.remoteStore,r.targetId))}async function zx(t,e,n){const r=Xx(t);try{const i=await function(s,a){const l=Ee(s),c=ft.now(),d=a.reduce((m,w)=>m.add(w.key),ke());let h,f;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let w=Zn(),_=ke();return l.cs.getEntries(m,d).next(E=>{w=E,w.forEach((g,p)=>{p.isValidDocument()||(_=_.add(g))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,w)).next(E=>{h=E;const g=[];for(const p of a){const v=hP(p,h.get(p.key).overlayedDocument);v!=null&&g.push(new $r(p.key,v,z1(v.value.mapValue),Wt.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,g,a)}).next(E=>{f=E;const g=E.applyToLocalDocumentSet(h,_);return l.documentOverlayCache.saveOverlays(m,E.batchId,g)})}).then(()=>({batchId:f.batchId,changes:tE(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,l){let c=s.Ba[s.currentUser.toKey()];c||(c=new Xe(Ne)),c=c.insert(a,l),s.Ba[s.currentUser.toKey()]=c}(r,i.batchId,n),await va(r,i.changes),await Gu(r.remoteStore)}catch(i){const o=fp(i,"Failed to persist write");n.reject(o)}}async function VE(t,e){const n=Ee(t);try{const r=await ox(n.localStore,e);e.targetChanges.forEach((i,o)=>{const s=n.Na.get(o);s&&(Le(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?Le(s.va):i.removedDocuments.size>0&&(Le(s.va),s.va=!1))}),await va(n,r,e)}catch(r){await da(r)}}function By(t,e,n){const r=Ee(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((o,s)=>{const a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){const l=Ee(s);l.onlineState=a;let c=!1;l.queries.forEach((d,h)=>{for(const f of h.j_)f.Z_(a)&&(c=!0)}),c&&hp(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Hx(t,e,n){const r=Ee(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),o=i&&i.key;if(o){let s=new Xe(ge.comparator);s=s.insert(o,Rt.newNoDocument(o,_e.min()));const a=ke().add(o),l=new Hu(_e.min(),new Map,new Xe(Ne),s,a);await VE(r,l),r.Oa=r.Oa.remove(o),r.Na.delete(e),dp(r)}else await kh(r.localStore,e,!1).then(()=>xh(r,e,n)).catch(da)}async function Wx(t,e){const n=Ee(t),r=e.batch.batchId;try{const i=await ix(n.localStore,e);UE(n,r,null),FE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await va(n,i)}catch(i){await da(i)}}async function Kx(t,e,n){const r=Ee(t);try{const i=await function(s,a){const l=Ee(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(Le(h!==null),d=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);UE(r,e,n),FE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await va(r,i)}catch(i){await da(i)}}function FE(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function UE(t,e,n){const r=Ee(t);let i=r.Ba[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function xh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||BE(t,r)})}function BE(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(sp(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),dp(t))}function qy(t,e,n){for(const r of n)r instanceof LE?(t.La.addReference(r.key,e),Gx(t,r)):r instanceof ME?(pe("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||BE(t,r.key)):ve()}function Gx(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(pe("SyncEngine","New document in limbo: "+n),t.xa.add(r),dp(t))}function dp(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ge(ze.fromString(e)),r=t.qa.next();t.Na.set(r,new jx(n)),t.Oa=t.Oa.insert(n,r),SE(t.remoteStore,new _r(Nn(Jd(n.path)),r,"TargetPurposeLimboResolution",Wd.oe))}}async function va(t,e,n){const r=Ee(t),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{s.push(r.Ka(l,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){i.push(c);const h=op.Wi(l.targetId,c);o.push(h)}}))}),await Promise.all(s),r.Ca.d_(i),await async function(l,c){const d=Ee(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>oe.forEach(c,f=>oe.forEach(f.$i,m=>d.persistence.referenceDelegate.addReference(h,f.targetId,m)).next(()=>oe.forEach(f.Ui,m=>d.persistence.referenceDelegate.removeReference(h,f.targetId,m)))))}catch(h){if(!pa(h))throw h;pe("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const m=d.os.get(f),w=m.snapshotVersion,_=m.withLastLimboFreeSnapshotVersion(w);d.os=d.os.insert(f,_)}}}(r.localStore,o))}async function Qx(t,e){const n=Ee(t);if(!n.currentUser.isEqual(e)){pe("SyncEngine","User change. New user:",e.toKey());const r=await TE(n.localStore,e);n.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(l=>{l.reject(new fe(re.CANCELLED,s))})}),o.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await va(n,r.hs)}}function Yx(t,e){const n=Ee(t),r=n.Na.get(e);if(r&&r.va)return ke().add(r.key);{let i=ke();const o=n.Ma.get(e);if(!o)return i;for(const s of o){const a=n.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function qE(t){const e=Ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=VE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Yx.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Hx.bind(null,e),e.Ca.d_=Cx.bind(null,e.eventManager),e.Ca.$a=Dx.bind(null,e.eventManager),e}function Xx(t){const e=Ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Wx.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Kx.bind(null,e),e}class du{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Wu(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return rx(this.persistence,new tx,e.initialUser,this.serializer)}Ga(e){return new JP(ip.Zr,this.serializer)}Wa(e){return new cx}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}du.provider={build:()=>new du};class Oh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>By(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Qx.bind(null,this.syncEngine),await Ox(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Nx}()}createDatastore(e){const n=Wu(e.databaseInfo.databaseId),r=function(o){return new px(o)}(e.databaseInfo);return function(o,s,a,l){return new yx(o,s,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,s,a){return new _x(r,i,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,n=>By(this.syncEngine,n,0),function(){return My.D()?new My:new fx}())}createSyncEngine(e,n){return function(i,o,s,a,l,c,d){const h=new Vx(i,o,s,a,l,c);return d&&(h.Qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const o=Ee(i);pe("RemoteStore","RemoteStore shutting down."),o.L_.add(5),await ya(o),o.k_.shutdown(),o.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Oh.provider={build:()=>new Oh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Jn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=xt.UNAUTHENTICATED,this.clientId=B1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{pe("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(pe("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Rr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=fp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function af(t,e){t.asyncQueue.verifyOperationInProgress(),pe("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await TE(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function $y(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Zx(t);pe("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>jy(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>jy(e.remoteStore,i)),t._onlineComponents=e}async function Zx(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){pe("FirestoreClient","Using user provided OfflineComponentProvider");try{await af(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===re.FAILED_PRECONDITION||i.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;fo("Error using user provided cache. Falling back to memory cache: "+n),await af(t,new du)}}else pe("FirestoreClient","Using default OfflineComponentProvider"),await af(t,new du);return t._offlineComponents}async function zE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(pe("FirestoreClient","Using user provided OnlineComponentProvider"),await $y(t,t._uninitializedComponentsProvider._online)):(pe("FirestoreClient","Using default OnlineComponentProvider"),await $y(t,new Oh))),t._onlineComponents}function eO(t){return zE(t).then(e=>e.syncEngine)}async function Rh(t){const e=await zE(t),n=e.eventManager;return n.onListen=Fx.bind(null,e.syncEngine),n.onUnlisten=qx.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Ux.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=$x.bind(null,e.syncEngine),n}function tO(t,e,n={}){const r=new Rr;return t.asyncQueue.enqueueAndForget(async()=>function(o,s,a,l,c){const d=new $E({next:f=>{d.Za(),s.enqueueAndForget(()=>CE(o,h)),f.fromCache&&l.source==="server"?c.reject(new fe(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new DE(a,d,{includeMetadataChanges:!0,_a:!0});return NE(o,h)}(await Rh(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zy=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WE(t,e,n){if(!n)throw new fe(re.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function nO(t,e,n,r){if(e===!0&&r===!0)throw new fe(re.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Hy(t){if(!ge.isDocumentKey(t))throw new fe(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Wy(t){if(ge.isDocumentKey(t))throw new fe(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Qu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ve()}function vn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new fe(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Qu(t);throw new fe(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ky{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new fe(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new fe(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}nO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=HE((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new fe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new fe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new fe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Yu{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ky({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fe(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new fe(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ky(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new T2;switch(r.type){case"firstParty":return new S2(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new fe(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=zy.get(n);r&&(pe("ComponentProvider","Removing Datastore"),zy.delete(n),r.terminate())}(this),Promise.resolve()}}function rO(t,e,n,r={}){var i;const o=(t=vn(t,Yu))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&fo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=xt.MOCK_USER;else{a=LI(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new fe(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new xt(c)}t._authCredentials=new b2(new U1(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new zr(this.firestore,e,this._query)}}class Kt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Nr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Kt(this.firestore,e,this._key)}}class Nr extends zr{constructor(e,n,r){super(e,n,Jd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Kt(this.firestore,null,new ge(e))}withConverter(e){return new Nr(this.firestore,e,this._path)}}function Qr(t,e,...n){if(t=tt(t),WE("collection","path",e),t instanceof Yu){const r=ze.fromString(e,...n);return Wy(r),new Nr(t,null,r)}{if(!(t instanceof Kt||t instanceof Nr))throw new fe(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ze.fromString(e,...n));return Wy(r),new Nr(t.firestore,null,r)}}function hn(t,e,...n){if(t=tt(t),arguments.length===1&&(e=B1.newId()),WE("doc","path",e),t instanceof Yu){const r=ze.fromString(e,...n);return Hy(r),new Kt(t,null,new ge(r))}{if(!(t instanceof Kt||t instanceof Nr))throw new fe(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ze.fromString(e,...n));return Hy(r),new Kt(t.firestore,t instanceof Nr?t.converter:null,new ge(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new IE(this,"async_queue_retry"),this.Vu=()=>{const r=sf();r&&pe("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=sf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=sf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Rr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!pa(e))throw e;pe("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw Jn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=cp.createAndSchedule(this,e,n,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&ve()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Qy(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}class Vr extends Yu{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Gy,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Gy(e),this._firestoreClient=void 0,await e}}}function iO(t,e){const n=typeof t=="object"?t:X0(),r=typeof t=="string"?t:"(default)",i=Ld(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=CI("firestore");o&&rO(i,...o)}return i}function Xu(t){if(t._terminated)throw new fe(re.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||oO(t),t._firestoreClient}function oO(t){var e,n,r;const i=t._freezeSettings(),o=function(a,l,c,d){return new F2(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,HE(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new Jx(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vo(bt.fromBase64String(e))}catch(n){throw new fe(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new vo(bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new fe(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _t(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new fe(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new fe(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ne(this._lat,e._lat)||Ne(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sO=/^__.*__$/;class aO{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new $r(e,this.data,this.fieldMask,n,this.fieldTransforms):new ma(e,this.data,n,this.fieldTransforms)}}class KE{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new $r(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function GE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ve()}}class gp{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new gp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return pu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(GE(this.Cu)&&sO.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class lO{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Wu(e)}Qu(e,n,r,i=!1){return new gp({Cu:e,methodName:n,qu:r,path:_t.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ju(t){const e=t._freezeSettings(),n=Wu(t._databaseId);return new lO(t._databaseId,!!e.ignoreUndefinedProperties,n)}function QE(t,e,n,r,i,o={}){const s=t.Qu(o.merge||o.mergeFields?2:0,e,n,i);_p("Data must be an object, but it was:",s,r);const a=JE(r,s);let l,c;if(o.merge)l=new Jt(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){const d=[];for(const h of o.mergeFields){const f=Nh(e,h,n);if(!s.contains(f))throw new fe(re.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);ew(d,f)||d.push(f)}l=new Jt(d),c=s.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=s.fieldTransforms;return new aO(new Bt(a),l,c)}class Zu extends Ea{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Zu}}class yp extends Ea{_toFieldTransform(e){return new uE(e.path,new Js)}isEqual(e){return e instanceof yp}}class vp extends Ea{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new ta(e.serializer,iE(e.serializer,this.$u));return new uE(e.path,n)}isEqual(e){return e instanceof vp&&this.$u===e.$u}}function YE(t,e,n,r){const i=t.Qu(1,e,n);_p("Data must be an object, but it was:",i,r);const o=[],s=Bt.empty();wi(r,(l,c)=>{const d=Ep(e,l,n);c=tt(c);const h=i.Nu(d);if(c instanceof Zu)o.push(d);else{const f=wa(c,h);f!=null&&(o.push(d),s.set(d,f))}});const a=new Jt(o);return new KE(s,a,i.fieldTransforms)}function XE(t,e,n,r,i,o){const s=t.Qu(1,e,n),a=[Nh(e,r,n)],l=[i];if(o.length%2!=0)throw new fe(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<o.length;f+=2)a.push(Nh(e,o[f])),l.push(o[f+1]);const c=[],d=Bt.empty();for(let f=a.length-1;f>=0;--f)if(!ew(c,a[f])){const m=a[f];let w=l[f];w=tt(w);const _=s.Nu(m);if(w instanceof Zu)c.push(m);else{const E=wa(w,_);E!=null&&(c.push(m),d.set(m,E))}}const h=new Jt(c);return new KE(d,h,s.fieldTransforms)}function uO(t,e,n,r=!1){return wa(n,t.Qu(r?4:3,e))}function wa(t,e){if(ZE(t=tt(t)))return _p("Unsupported field value:",e,t),JE(t,e);if(t instanceof Ea)return function(r,i){if(!GE(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const a of r){let l=wa(a,i.Lu(s));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=tt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return iE(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=ft.fromDate(r);return{timestampValue:fu(i.serializer,o)}}if(r instanceof ft){const o=new ft(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:fu(i.serializer,o)}}if(r instanceof pp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof vo)return{bytesValue:mE(i.serializer,r._byteString)};if(r instanceof Kt){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:np(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof mp)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return Zd(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Qu(r)}`)}(t,e)}function JE(t,e){const n={};return q1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):wi(t,(r,i)=>{const o=wa(i,e.Mu(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function ZE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ft||t instanceof pp||t instanceof vo||t instanceof Kt||t instanceof Ea||t instanceof mp)}function _p(t,e,n){if(!ZE(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Qu(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Nh(t,e,n){if((e=tt(e))instanceof _a)return e._internalPath;if(typeof e=="string")return Ep(t,e);throw pu("Field path arguments must be of type string or ",t,!1,void 0,n)}const cO=new RegExp("[~\\*/\\[\\]]");function Ep(t,e,n){if(e.search(cO)>=0)throw pu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new _a(...e.split("."))._internalPath}catch{throw pu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function pu(t,e,n,r,i){const o=r&&!r.isEmpty(),s=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=` in field ${r}`),s&&(l+=` in document ${i}`),l+=")"),new fe(re.INVALID_ARGUMENT,a+t+l)}function ew(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new fO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(wp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class fO extends tw{data(){return super.data()}}function wp(t,e){return typeof e=="string"?Ep(t,e):e instanceof _a?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nw(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new fe(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Tp{}class rw extends Tp{}function lf(t,e,...n){let r=[];e instanceof Tp&&r.push(e),r=r.concat(n),function(o){const s=o.filter(l=>l instanceof Ip).length,a=o.filter(l=>l instanceof bp).length;if(s>1||s>0&&a>0)throw new fe(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class bp extends rw{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new bp(e,n,r)}_apply(e){const n=this._parse(e);return iw(e._query,n),new zr(e.firestore,e.converter,wh(e._query,n))}_parse(e){const n=Ju(e.firestore);return function(o,s,a,l,c,d,h){let f;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new fe(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){Jy(h,d);const m=[];for(const w of h)m.push(Xy(l,o,w));f={arrayValue:{values:m}}}else f=Xy(l,o,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||Jy(h,d),f=uO(a,s,h,d==="in"||d==="not-in");return lt.create(c,d,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Ip extends Tp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Ip(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:wn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let s=i;const a=o.getFlattenedFilters();for(const l of a)iw(s,l),s=wh(s,l)}(e._query,n),new zr(e.firestore,e.converter,wh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ap extends rw{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Ap(e,n)}_apply(e){const n=function(i,o,s){if(i.startAt!==null)throw new fe(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new fe(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Xs(o,s)}(e._query,this._field,this._direction);return new zr(e.firestore,e.converter,function(i,o){const s=i.explicitOrderBy.concat([o]);return new Ao(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Yy(t,e="asc"){const n=e,r=wp("orderBy",t);return Ap._create(r,n)}function Xy(t,e,n){if(typeof(n=tt(n))=="string"){if(n==="")throw new fe(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!X1(e)&&n.indexOf("/")!==-1)throw new fe(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ze.fromString(n));if(!ge.isDocumentKey(r))throw new fe(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return yy(t,new ge(r))}if(n instanceof Kt)return yy(t,n._key);throw new fe(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Qu(n)}.`)}function Jy(t,e){if(!Array.isArray(t)||t.length===0)throw new fe(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function iw(t,e){const n=function(i,o){for(const s of i)for(const a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new fe(re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new fe(re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class hO{convertValue(e,n="none"){switch(yi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return rt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(gi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ve()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return wi(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;const o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>rt(s.doubleValue));return new mp(o)}convertGeoPoint(e){return new pp(rt(e.latitude),rt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Gd(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Gs(e));default:return null}}convertTimestamp(e){const n=Mr(e);return new ft(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ze.fromString(e);Le(wE(r));const i=new Qs(r.get(1),r.get(3)),o=new ge(r.popFirst(5));return i.isEqual(n)||Jn(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ow(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class sw extends tw{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ol(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(wp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Ol extends sw{data(e={}){return super.data(e)}}class aw{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ds(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ol(this._firestore,this._userDataWriter,r.key,r,new ds(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new fe(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{const l=new Ol(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ds(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{const l=new Ol(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ds(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,d=-1;return a.type!==0&&(c=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:dO(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function dO(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ve()}}class Sp extends hO{constructor(e){super(),this.firestore=e}convertBytes(e){return new vo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Kt(this.firestore,null,n)}}function pO(t){t=vn(t,zr);const e=vn(t.firestore,Vr),n=Xu(e),r=new Sp(e);return nw(t._query),tO(n,t._query).then(i=>new aw(e,r,t,i))}function sl(t,e,n,...r){t=vn(t,Kt);const i=vn(t.firestore,Vr),o=Ju(i);let s;return s=typeof(e=tt(e))=="string"||e instanceof _a?XE(o,"updateDoc",t._key,e,n,r):YE(o,"updateDoc",t._key,e),ec(i,[s.toMutation(t._key,Wt.exists(!0))])}function mO(t){return ec(vn(t.firestore,Vr),[new zu(t._key,Wt.none())])}function uf(t,e){const n=vn(t.firestore,Vr),r=hn(t),i=ow(t.converter,e);return ec(n,[QE(Ju(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Wt.exists(!1))]).then(()=>r)}function cf(t,...e){var n,r,i;t=tt(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Qy(e[s])||(o=e[s],s++);const a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Qy(e[s])){const h=e[s];e[s]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[s+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[s+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let l,c,d;if(t instanceof Kt)c=vn(t.firestore,Vr),d=Jd(t._key.path),l={next:h=>{e[s]&&e[s](gO(c,t,h))},error:e[s+1],complete:e[s+2]};else{const h=vn(t,zr);c=vn(h.firestore,Vr),d=h._query;const f=new Sp(c);l={next:m=>{e[s]&&e[s](new aw(c,f,h,m))},error:e[s+1],complete:e[s+2]},nw(t._query)}return function(f,m,w,_){const E=new $E(_),g=new DE(m,E,w);return f.asyncQueue.enqueueAndForget(async()=>NE(await Rh(f),g)),()=>{E.Za(),f.asyncQueue.enqueueAndForget(async()=>CE(await Rh(f),g))}}(Xu(c),d,a,l)}function ec(t,e){return function(r,i){const o=new Rr;return r.asyncQueue.enqueueAndForget(async()=>zx(await eO(r),i,o)),o.promise}(Xu(t),e)}function gO(t,e,n){const r=n.docs.get(e._key),i=new Sp(t);return new sw(t,i,e._key,r,new ds(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ju(e)}set(e,n,r){this._verifyNotCommitted();const i=ff(e,this._firestore),o=ow(i.converter,n,r),s=QE(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Wt.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const o=ff(e,this._firestore);let s;return s=typeof(n=tt(n))=="string"||n instanceof _a?XE(this._dataReader,"WriteBatch.update",o._key,n,r,i):YE(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,Wt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=ff(e,this._firestore);return this._mutations=this._mutations.concat(new zu(n._key,Wt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new fe(re.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ff(t,e){if((t=tt(t)).firestore!==e)throw new fe(re.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function al(){return new yp("serverTimestamp")}function vO(t){return new vp("increment",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ll(t){return Xu(t=vn(t,Vr)),new yO(t,e=>ec(t,e))}(function(e,n=!0){(function(i){Io=i})(To),uo(new hi("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),a=new Vr(new I2(r.getProvider("auth-internal")),new P2(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new fe(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qs(c.options.projectId,d)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Or(hy,"4.7.3",e),Or(hy,"4.7.3","esm2017")})();const _O={apiKey:"AIzaSyBGFHAw9HtFGd5AU6LuMRDN3GkJIZDR7eY",authDomain:"workflow-1e6ed.firebaseapp.com",projectId:"workflow-1e6ed",storageBucket:"workflow-1e6ed.appspot.com",messagingSenderId:"475146109664",appId:"1:475146109664:web:20debe12f06c666ff88685",measurementId:"G-BHZX95WXJJ"},lw=Y0(_O),zi=E2(lw),ot=iO(lw),to={onAuthChange:t=>lk(zi,t),login:(t,e)=>rk(zi,t,e),register:(t,e)=>nk(zi,t,e),logout:()=>uk(zi),updateUserProfile:(t,e)=>ok(t,e)},Lt=t=>`users/${t}`,et={initializeBoard:async t=>{const e=Qr(ot,Lt(t),"columns");if((await pO(e)).empty){const r=ll(ot);[{title:"To Do",order:0},{title:"In Progress",order:1},{title:"Done",order:2}].forEach(o=>{const s=hn(e);r.set(s,o)}),await r.commit()}},onColumnsSnapshot:(t,e)=>{const n=lf(Qr(ot,Lt(t),"columns"),Yy("order"));return cf(n,r=>{const i=r.docs.map(o=>({id:o.id,...o.data()}));e(i)})},onTasksSnapshot:(t,e)=>{const n=lf(Qr(ot,Lt(t),"tasks"));return cf(n,r=>{const i={};r.docs.forEach(o=>{const s={id:o.id,...o.data()};i[s.columnId]||(i[s.columnId]=[]),i[s.columnId].push(s)}),e(i)})},addColumn:(t,e,n)=>{const r=Qr(ot,Lt(t),"columns");return uf(r,{title:e,order:n,createdAt:al()})},deleteColumn:(t,e,n)=>{const r=Lt(t),i=ll(ot);return n.forEach(o=>i.delete(hn(ot,r,"tasks",o.id))),i.delete(hn(ot,r,"columns",e)),i.commit()},addTask:(t,e)=>{const n=Qr(ot,Lt(t),"tasks"),r={...e,order:0,timeTracked:0,isTracking:!1,lastStarted:null,createdAt:al()};return uf(n,r)},updateTask:(t,e,n)=>{const r=hn(ot,Lt(t),"tasks",e);return sl(r,n)},deleteTask:(t,e)=>{const n=hn(ot,Lt(t),"tasks",e);return mO(n)},moveTask:(t,e,n,r)=>{const i=hn(ot,Lt(t),"tasks",e);return sl(i,{columnId:n,order:r})},reorderTasks:(t,e)=>{const n=ll(ot);return e.forEach(r=>{const i=hn(ot,Lt(t),"tasks",r.id);n.update(i,{order:r.order})}),n.commit()},reorderColumns:(t,e)=>{const n=ll(ot);return e.forEach(r=>{const i=hn(ot,Lt(t),"columns",r.id);n.update(i,{order:r.order})}),n.commit()},startTimer:(t,e)=>{const n=hn(ot,Lt(t),"tasks",e);return sl(n,{isTracking:!0,lastStarted:al()})},stopTimer:(t,e,n)=>{const r=hn(ot,Lt(t),"tasks",e);return sl(r,{isTracking:!1,lastStarted:null,timeTracked:vO(n)})},addComment:(t,e,n)=>{const r=Qr(ot,Lt(t),"tasks",e,"comments");return uf(r,{...n,createdAt:al()})},onCommentsSnapshot:(t,e,n)=>{const r=lf(Qr(ot,Lt(t),"tasks",e,"comments"),Yy("createdAt","desc"));return cf(r,i=>{const o=i.docs.map(s=>({id:s.id,...s.data()}));n(o)})}},EO=()=>{const[t,e]=de.useState(!0),[n,r]=de.useState(""),[i,o]=de.useState(""),[s,a]=de.useState(""),[l,c]=de.useState(""),d=async h=>{h.preventDefault(),c("");try{if(t)await to.login(n,i);else{const{user:f}=await to.register(n,i);await to.updateUserProfile(f,{displayName:s}),await et.createUserProfileDocument(f,{displayName:s})}}catch(f){c(f.message)}};return F.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center text-white",children:F.jsxs("div",{className:"w-full max-w-md p-8 space-y-8 bg-gray-800 rounded-lg shadow-lg",children:[F.jsx("h2",{className:"text-3xl font-bold text-center",children:t?"Login":"Sign Up"}),F.jsxs("form",{onSubmit:d,className:"space-y-6",children:[!t&&F.jsx("input",{type:"text",value:s,onChange:h=>a(h.target.value),placeholder:"Display Name",className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",required:!0}),F.jsx("input",{type:"email",value:n,onChange:h=>r(h.target.value),placeholder:"Email Address",className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",required:!0}),F.jsx("input",{type:"password",value:i,onChange:h=>o(h.target.value),placeholder:"Password",className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",required:!0}),l&&F.jsx("p",{className:"text-red-500 text-sm",children:l}),F.jsx("button",{type:"submit",className:"w-full py-2 px-4 bg-indigo-600 hover:bg-indigo-700 rounded-md font-semibold transition-colors",children:t?"Login":"Create Account"})]}),F.jsxs("p",{className:"text-center text-sm text-gray-400",children:[t?"Don't have an account?":"Already have an account?",F.jsx("button",{onClick:()=>e(!t),className:"ml-2 font-semibold text-indigo-400 hover:text-indigo-300",children:t?"Sign Up":"Login"})]})]})})};/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wO=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),uw=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var TO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bO=de.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:s,...a},l)=>de.createElement("svg",{ref:l,...TO,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:uw("lucide",i),...a},[...s.map(([c,d])=>de.createElement(c,d)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=(t,e)=>{const n=de.forwardRef(({className:r,...i},o)=>de.createElement(bO,{ref:o,iconNode:e,className:uw(`lucide-${wO(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IO=Ve("AlignLeft",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}],["line",{x1:"17",x2:"3",y1:"18",y2:"18",key:"1awlsn"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kp=Ve("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AO=Ve("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SO=Ve("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kO=Ve("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PO=Ve("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xO=Ve("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OO=Ve("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RO=Ve("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zy=Ve("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NO=Ve("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CO=Ve("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DO=Ve("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LO=Ve("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cw=Ve("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fw=Ve("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hw=Ve("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pp=Ve("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MO=Ve("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jO=Ve("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VO=Ve("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ch=Ve("SquareCheckBig",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FO=Ve("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UO=Ve("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xp=Ve("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BO=Ve("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qO=Ve("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Op=({isOpen:t,onClose:e,children:n})=>t?F.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 p-4",children:F.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-5xl relative flex flex-col",style:{height:"90vh",maxHeight:"800px"},children:[F.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-400 hover:text-white z-20",children:F.jsx(qO,{size:24})}),n]})}):null,$O=({user:t,isOpen:e,onClose:n})=>{const[r,i]=de.useState(""),[o,s]=de.useState(""),[a,l]=de.useState(""),[c,d]=de.useState(""),[h,f]=de.useState(""),[m,w]=de.useState("");de.useEffect(()=>{t&&(i(t.displayName||""),s(t.photoURL||""),l("Alex"),d("Buchanan"),f("Product Manager"),w("Leading product strategy and development for innovative tech solutions."))},[t]);const _=async E=>{E.preventDefault();try{await to.updateUserProfile(t,{displayName:r,photoURL:o}),alert("Profile updated successfully!"),n()}catch(g){console.error("Error updating profile:",g),alert("Failed to update profile.")}};return F.jsx(Op,{isOpen:e,onClose:n,children:F.jsxs("div",{className:"p-2",children:[F.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"My Profile"}),F.jsxs("form",{onSubmit:_,children:[F.jsxs("div",{className:"flex items-center space-x-6 mb-8",children:[F.jsxs("div",{className:"relative",children:[F.jsx("div",{className:"w-24 h-24 bg-gray-700 rounded-full flex items-center justify-center",children:o?F.jsx("img",{src:o,alt:r,className:"w-full h-full rounded-full object-cover"}):F.jsx(BO,{size:48,className:"text-gray-500"})}),F.jsx("button",{type:"button",className:"absolute bottom-0 right-0 bg-indigo-600 p-2 rounded-full hover:bg-indigo-700",children:F.jsx(AO,{size:16,className:"text-white"})})]}),F.jsxs("div",{className:"flex-grow",children:[F.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Photo URL"}),F.jsx("input",{type:"url",value:o,onChange:E=>s(E.target.value),placeholder:"https://example.com/image.png",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500"})]})]}),F.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[F.jsxs("div",{children:[F.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"First Name"}),F.jsx("input",{type:"text",value:a,onChange:E=>l(E.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2"})]}),F.jsxs("div",{children:[F.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Last Name"}),F.jsx("input",{type:"text",value:c,onChange:E=>d(E.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2"})]})]}),F.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[F.jsxs("div",{children:[F.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Display Name"}),F.jsx("input",{type:"text",value:r,onChange:E=>i(E.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2"})]}),F.jsxs("div",{children:[F.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Position"}),F.jsx("input",{type:"text",value:h,onChange:E=>f(E.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2"})]})]}),F.jsxs("div",{className:"mb-6",children:[F.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Bio"}),F.jsx("textarea",{value:m,onChange:E=>w(E.target.value),rows:"3",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2"})]}),F.jsxs("div",{className:"mb-6",children:[F.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Skills"}),F.jsx("input",{type:"text",placeholder:"e.g., React, Node.js, UI/UX Design",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2"})]}),F.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-700",children:[F.jsx("button",{type:"button",onClick:n,className:"bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded-lg",children:"Cancel"}),F.jsx("button",{type:"submit",className:"bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-lg",children:"Save Changes"})]})]})]})})},zO=({user:t,currentView:e,setCurrentView:n,theme:r,setTheme:i,searchTerm:o,setSearchTerm:s})=>{const[a,l]=de.useState(!1),c=h=>`p-2 rounded-md flex items-center space-x-2 text-sm transition-colors ${e===h?"bg-indigo-600 text-white":"bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600"}`,d=async()=>{window.confirm("Are you sure you want to reset all your data?")&&(await et.resetData(t.uid),alert("Your data has been reset."))};return F.jsxs(F.Fragment,{children:[F.jsxs("header",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700 flex-shrink-0",children:[F.jsxs("div",{className:"flex items-center space-x-4",children:[F.jsx("h1",{className:"text-2xl font-bold",children:"TaskFlow"}),F.jsxs("div",{className:"flex items-center space-x-1 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg",children:[F.jsxs("button",{onClick:()=>n("board"),className:c("board"),children:[F.jsx(NO,{size:16}),F.jsx("span",{children:"Board"})]}),F.jsxs("button",{onClick:()=>n("calendar"),className:c("calendar"),children:[F.jsx(kp,{size:16}),F.jsx("span",{children:"Calendar"})]})]}),F.jsxs("div",{className:"relative",children:[F.jsx(jO,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),F.jsx("input",{type:"text",placeholder:"Search tasks...",value:o,onChange:h=>s(h.target.value),className:"bg-gray-200 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg pl-10 pr-4 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500"})]})]}),F.jsxs("div",{className:"flex items-center space-x-4",children:[F.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-300 hidden md:block",children:t.email}),F.jsx("button",{onClick:()=>i(r==="dark"?"light":"dark"),className:"p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700",title:"Toggle Theme",children:r==="dark"?F.jsx(FO,{size:20}):F.jsx(LO,{size:20})}),F.jsx("button",{onClick:d,className:"p-2 rounded-lg bg-yellow-500 hover:bg-yellow-600 text-white",title:"Reset All Data",children:F.jsx(MO,{size:20})}),F.jsx("button",{onClick:()=>l(!0),className:"w-10 h-10 bg-gray-200 dark:bg-gray-700 rounded-full flex items-center justify-center hover:ring-2 hover:ring-indigo-500",children:t.photoURL?F.jsx("img",{src:t.photoURL,alt:t.displayName||"User",className:"w-full h-full rounded-full object-cover"}):F.jsx("span",{className:"font-bold text-lg",children:t.displayName?t.displayName.charAt(0).toUpperCase():t.email.charAt(0).toUpperCase()})}),F.jsx("button",{onClick:to.logout,className:"p-2 rounded-lg bg-red-600 hover:bg-red-700 text-white",title:"Logout",children:F.jsx(CO,{size:20})})]})]}),F.jsx($O,{user:t,isOpen:a,onClose:()=>l(!1)})]})},HO=t=>{(isNaN(t)||t<0)&&(t=0);const e=Math.floor(t/3600),n=Math.floor(t%3600/60),r=Math.floor(t%60);return[e,n,r].map(i=>i<10?"0"+i:i).join(":")},WO=t=>{if(!t||!t.toDate)return null;const e=new Date,r=t.toDate().getTime()-e.getTime();if(r<0)return{text:"Overdue",isPast:!0};const i=r/(1e3*60*60);if(i<24){const s=Math.floor(i),a=Math.floor((i-s)*60);return{text:`${s}h ${a}m left`,isPast:!1}}return{text:`${Math.ceil(r/(1e3*60*60*24))} days left`,isPast:!1}},KO=({task:t,setDraggedTask:e,onEdit:n,userId:r,doneColumnId:i})=>{const[o,s]=de.useState(t.timeTracked||0),a={Low:"bg-blue-600 text-blue-100",Medium:"bg-yellow-600 text-yellow-100",High:"bg-red-600 text-red-100"};de.useEffect(()=>{let p=null;return t.isTracking?p=setInterval(()=>{var N;const v=new Date,y=((N=t.lastStarted)==null?void 0:N.toDate())||v,k=(v.getTime()-y.getTime())/1e3;s((t.timeTracked||0)+k)},1e3):s(t.timeTracked||0),()=>clearInterval(p)},[t.isTracking,t.lastStarted,t.timeTracked]);const l=async p=>{var v;if(p.stopPropagation(),!!r)if(t.isTracking){const y=new Date,k=((v=t.lastStarted)==null?void 0:v.toDate())||y,N=(y.getTime()-k.getTime())/1e3;await et.stopTimer(r,t.id,N)}else await et.startTimer(r,t.id)},c=async p=>{p.stopPropagation(),i&&await et.moveTask(r,t.id,i,0)},d=WO(t.dueDate),h=t.checklist||[],f=h.filter(p=>p.completed).length,m=h.length,w=m>0&&f===m,_=t.columnId===i,E=async p=>{p.stopPropagation(),!(!r||!window.confirm("Delete this task?"))&&await et.deleteTask(r,t.id)},g=p=>{p.stopPropagation(),n()};return F.jsxs("div",{draggable:!0,onDragStart:()=>e(t),onClick:n,className:"task-card bg-white dark:bg-gray-700 rounded-lg shadow-md cursor-pointer hover:ring-2 hover:ring-indigo-500 group",children:[F.jsxs("div",{className:"relative",children:[F.jsx("img",{src:t.coverImage||"https://developers.elementor.com/docs/assets/img/elementor-placeholder-image.png",alt:"Task cover",className:"w-full h-32 object-cover rounded-t-lg",onError:p=>{p.currentTarget.src="https://developers.elementor.com/docs/assets/img/elementor-placeholder-image.png"}}),d&&F.jsxs("span",{className:`absolute top-2 left-2 flex items-center space-x-1 text-xs px-2 py-1 rounded-full text-white ${d.isPast?"bg-red-600":"bg-black/50"}`,children:[F.jsx(kp,{size:14}),F.jsx("span",{children:d.text})]}),w&&F.jsx("div",{className:"absolute bottom-0 left-0 w-full h-1 bg-green-500",title:"Checklist complete!"})]}),F.jsxs("div",{className:"p-3",children:[t.priority&&F.jsx("span",{className:`px-2 py-1 mb-2 inline-block text-xs font-semibold rounded-full ${a[t.priority]||"bg-gray-500"}`,children:t.priority}),F.jsx("p",{className:"font-semibold text-gray-800 dark:text-gray-200 mb-2",children:t.title}),F.jsxs("div",{className:"flex justify-between items-center text-gray-500 dark:text-gray-400",children:[F.jsxs("div",{className:"flex items-center flex-wrap gap-2",children:[m>0&&F.jsxs("span",{className:`flex items-center space-x-1 text-xs px-2 py-1 rounded-md ${w?"bg-green-600 text-green-100":"bg-gray-300 dark:bg-gray-600"}`,children:[F.jsx(Ch,{size:14}),F.jsxs("span",{children:[f,"/",m]})]}),F.jsx("span",{className:"text-xs font-mono bg-gray-300 dark:bg-gray-600 px-2 py-1 rounded-md",children:HO(o)})]}),F.jsxs("div",{className:"flex items-center space-x-2",children:[!_&&F.jsx("button",{onClick:c,title:"Mark as complete",className:"p-1 hover:bg-green-600 rounded-full text-gray-500 dark:text-gray-400 hover:text-white",children:F.jsx(SO,{size:16})}),F.jsx("button",{onClick:l,className:"p-1 hover:bg-gray-300 dark:hover:bg-gray-600 rounded-full",children:t.isTracking?F.jsx(cw,{size:16,className:"text-yellow-400"}):F.jsx(hw,{size:16})}),F.jsxs("div",{className:"flex items-center space-x-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[F.jsx("button",{onClick:g,className:"p-1 hover:bg-gray-300 dark:hover:bg-gray-600 rounded-full",children:F.jsx(fw,{size:14})}),F.jsx("button",{onClick:E,className:"p-1 hover:bg-gray-300 dark:hover:bg-gray-600 rounded-full",children:F.jsx(xp,{size:14})})]})]})]})]})]})};function GO(){this.__data__=[],this.size=0}var QO=GO;function YO(t,e){return t===e||t!==t&&e!==e}var dw=YO,XO=dw;function JO(t,e){for(var n=t.length;n--;)if(XO(t[n][0],e))return n;return-1}var tc=JO,ZO=tc,eR=Array.prototype,tR=eR.splice;function nR(t){var e=this.__data__,n=ZO(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():tR.call(e,n,1),--this.size,!0}var rR=nR,iR=tc;function oR(t){var e=this.__data__,n=iR(e,t);return n<0?void 0:e[n][1]}var sR=oR,aR=tc;function lR(t){return aR(this.__data__,t)>-1}var uR=lR,cR=tc;function fR(t,e){var n=this.__data__,r=cR(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var hR=fR,dR=QO,pR=rR,mR=sR,gR=uR,yR=hR;function Po(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Po.prototype.clear=dR;Po.prototype.delete=pR;Po.prototype.get=mR;Po.prototype.has=gR;Po.prototype.set=yR;var nc=Po,vR=nc;function _R(){this.__data__=new vR,this.size=0}var ER=_R;function wR(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var TR=wR;function bR(t){return this.__data__.get(t)}var IR=bR;function AR(t){return this.__data__.has(t)}var SR=AR,kR=typeof Yt=="object"&&Yt&&Yt.Object===Object&&Yt,pw=kR,PR=pw,xR=typeof self=="object"&&self&&self.Object===Object&&self,OR=PR||xR||Function("return this")(),rr=OR,RR=rr,NR=RR.Symbol,Rp=NR,ev=Rp,mw=Object.prototype,CR=mw.hasOwnProperty,DR=mw.toString,ns=ev?ev.toStringTag:void 0;function LR(t){var e=CR.call(t,ns),n=t[ns];try{t[ns]=void 0;var r=!0}catch{}var i=DR.call(t);return r&&(e?t[ns]=n:delete t[ns]),i}var MR=LR,jR=Object.prototype,VR=jR.toString;function FR(t){return VR.call(t)}var UR=FR,tv=Rp,BR=MR,qR=UR,$R="[object Null]",zR="[object Undefined]",nv=tv?tv.toStringTag:void 0;function HR(t){return t==null?t===void 0?zR:$R:nv&&nv in Object(t)?BR(t):qR(t)}var rc=HR;function WR(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var gw=WR,KR=rc,GR=gw,QR="[object AsyncFunction]",YR="[object Function]",XR="[object GeneratorFunction]",JR="[object Proxy]";function ZR(t){if(!GR(t))return!1;var e=KR(t);return e==YR||e==XR||e==QR||e==JR}var yw=ZR,eN=rr,tN=eN["__core-js_shared__"],nN=tN,hf=nN,rv=function(){var t=/[^.]+$/.exec(hf&&hf.keys&&hf.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function rN(t){return!!rv&&rv in t}var iN=rN,oN=Function.prototype,sN=oN.toString;function aN(t){if(t!=null){try{return sN.call(t)}catch{}try{return t+""}catch{}}return""}var vw=aN,lN=yw,uN=iN,cN=gw,fN=vw,hN=/[\\^$.*+?()[\]{}|]/g,dN=/^\[object .+?Constructor\]$/,pN=Function.prototype,mN=Object.prototype,gN=pN.toString,yN=mN.hasOwnProperty,vN=RegExp("^"+gN.call(yN).replace(hN,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function _N(t){if(!cN(t)||uN(t))return!1;var e=lN(t)?vN:dN;return e.test(fN(t))}var EN=_N;function wN(t,e){return t==null?void 0:t[e]}var TN=wN,bN=EN,IN=TN;function AN(t,e){var n=IN(t,e);return bN(n)?n:void 0}var xo=AN,SN=xo,kN=rr,PN=SN(kN,"Map"),Np=PN,xN=xo,ON=xN(Object,"create"),ic=ON,iv=ic;function RN(){this.__data__=iv?iv(null):{},this.size=0}var NN=RN;function CN(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var DN=CN,LN=ic,MN="__lodash_hash_undefined__",jN=Object.prototype,VN=jN.hasOwnProperty;function FN(t){var e=this.__data__;if(LN){var n=e[t];return n===MN?void 0:n}return VN.call(e,t)?e[t]:void 0}var UN=FN,BN=ic,qN=Object.prototype,$N=qN.hasOwnProperty;function zN(t){var e=this.__data__;return BN?e[t]!==void 0:$N.call(e,t)}var HN=zN,WN=ic,KN="__lodash_hash_undefined__";function GN(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=WN&&e===void 0?KN:e,this}var QN=GN,YN=NN,XN=DN,JN=UN,ZN=HN,eC=QN;function Oo(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Oo.prototype.clear=YN;Oo.prototype.delete=XN;Oo.prototype.get=JN;Oo.prototype.has=ZN;Oo.prototype.set=eC;var tC=Oo,ov=tC,nC=nc,rC=Np;function iC(){this.size=0,this.__data__={hash:new ov,map:new(rC||nC),string:new ov}}var oC=iC;function sC(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var aC=sC,lC=aC;function uC(t,e){var n=t.__data__;return lC(e)?n[typeof e=="string"?"string":"hash"]:n.map}var oc=uC,cC=oc;function fC(t){var e=cC(this,t).delete(t);return this.size-=e?1:0,e}var hC=fC,dC=oc;function pC(t){return dC(this,t).get(t)}var mC=pC,gC=oc;function yC(t){return gC(this,t).has(t)}var vC=yC,_C=oc;function EC(t,e){var n=_C(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var wC=EC,TC=oC,bC=hC,IC=mC,AC=vC,SC=wC;function Ro(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Ro.prototype.clear=TC;Ro.prototype.delete=bC;Ro.prototype.get=IC;Ro.prototype.has=AC;Ro.prototype.set=SC;var _w=Ro,kC=nc,PC=Np,xC=_w,OC=200;function RC(t,e){var n=this.__data__;if(n instanceof kC){var r=n.__data__;if(!PC||r.length<OC-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new xC(r)}return n.set(t,e),this.size=n.size,this}var NC=RC,CC=nc,DC=ER,LC=TR,MC=IR,jC=SR,VC=NC;function No(t){var e=this.__data__=new CC(t);this.size=e.size}No.prototype.clear=DC;No.prototype.delete=LC;No.prototype.get=MC;No.prototype.has=jC;No.prototype.set=VC;var FC=No,UC="__lodash_hash_undefined__";function BC(t){return this.__data__.set(t,UC),this}var qC=BC;function $C(t){return this.__data__.has(t)}var zC=$C,HC=_w,WC=qC,KC=zC;function mu(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new HC;++e<n;)this.add(t[e])}mu.prototype.add=mu.prototype.push=WC;mu.prototype.has=KC;var GC=mu;function QC(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var YC=QC;function XC(t,e){return t.has(e)}var JC=XC,ZC=GC,eD=YC,tD=JC,nD=1,rD=2;function iD(t,e,n,r,i,o){var s=n&nD,a=t.length,l=e.length;if(a!=l&&!(s&&l>a))return!1;var c=o.get(t),d=o.get(e);if(c&&d)return c==e&&d==t;var h=-1,f=!0,m=n&rD?new ZC:void 0;for(o.set(t,e),o.set(e,t);++h<a;){var w=t[h],_=e[h];if(r)var E=s?r(_,w,h,e,t,o):r(w,_,h,t,e,o);if(E!==void 0){if(E)continue;f=!1;break}if(m){if(!eD(e,function(g,p){if(!tD(m,p)&&(w===g||i(w,g,n,r,o)))return m.push(p)})){f=!1;break}}else if(!(w===_||i(w,_,n,r,o))){f=!1;break}}return o.delete(t),o.delete(e),f}var Ew=iD,oD=rr,sD=oD.Uint8Array,aD=sD;function lD(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}var uD=lD;function cD(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var fD=cD,sv=Rp,av=aD,hD=dw,dD=Ew,pD=uD,mD=fD,gD=1,yD=2,vD="[object Boolean]",_D="[object Date]",ED="[object Error]",wD="[object Map]",TD="[object Number]",bD="[object RegExp]",ID="[object Set]",AD="[object String]",SD="[object Symbol]",kD="[object ArrayBuffer]",PD="[object DataView]",lv=sv?sv.prototype:void 0,df=lv?lv.valueOf:void 0;function xD(t,e,n,r,i,o,s){switch(n){case PD:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case kD:return!(t.byteLength!=e.byteLength||!o(new av(t),new av(e)));case vD:case _D:case TD:return hD(+t,+e);case ED:return t.name==e.name&&t.message==e.message;case bD:case AD:return t==e+"";case wD:var a=pD;case ID:var l=r&gD;if(a||(a=mD),t.size!=e.size&&!l)return!1;var c=s.get(t);if(c)return c==e;r|=yD,s.set(t,e);var d=dD(a(t),a(e),r,i,o,s);return s.delete(t),d;case SD:if(df)return df.call(t)==df.call(e)}return!1}var OD=xD;function RD(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var ND=RD,CD=Array.isArray,Cp=CD,DD=ND,LD=Cp;function MD(t,e,n){var r=e(t);return LD(t)?r:DD(r,n(t))}var jD=MD;function VD(t,e){for(var n=-1,r=t==null?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o}var FD=VD;function UD(){return[]}var BD=UD,qD=FD,$D=BD,zD=Object.prototype,HD=zD.propertyIsEnumerable,uv=Object.getOwnPropertySymbols,WD=uv?function(t){return t==null?[]:(t=Object(t),qD(uv(t),function(e){return HD.call(t,e)}))}:$D,KD=WD;function GD(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var QD=GD;function YD(t){return t!=null&&typeof t=="object"}var sc=YD,XD=rc,JD=sc,ZD="[object Arguments]";function eL(t){return JD(t)&&XD(t)==ZD}var tL=eL,cv=tL,nL=sc,ww=Object.prototype,rL=ww.hasOwnProperty,iL=ww.propertyIsEnumerable,oL=cv(function(){return arguments}())?cv:function(t){return nL(t)&&rL.call(t,"callee")&&!iL.call(t,"callee")},sL=oL,gu={exports:{}};function aL(){return!1}var lL=aL;gu.exports;(function(t,e){var n=rr,r=lL,i=e&&!e.nodeType&&e,o=i&&!0&&t&&!t.nodeType&&t,s=o&&o.exports===i,a=s?n.Buffer:void 0,l=a?a.isBuffer:void 0,c=l||r;t.exports=c})(gu,gu.exports);var Tw=gu.exports,uL=9007199254740991,cL=/^(?:0|[1-9]\d*)$/;function fL(t,e){var n=typeof t;return e=e??uL,!!e&&(n=="number"||n!="symbol"&&cL.test(t))&&t>-1&&t%1==0&&t<e}var hL=fL,dL=9007199254740991;function pL(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=dL}var bw=pL,mL=rc,gL=bw,yL=sc,vL="[object Arguments]",_L="[object Array]",EL="[object Boolean]",wL="[object Date]",TL="[object Error]",bL="[object Function]",IL="[object Map]",AL="[object Number]",SL="[object Object]",kL="[object RegExp]",PL="[object Set]",xL="[object String]",OL="[object WeakMap]",RL="[object ArrayBuffer]",NL="[object DataView]",CL="[object Float32Array]",DL="[object Float64Array]",LL="[object Int8Array]",ML="[object Int16Array]",jL="[object Int32Array]",VL="[object Uint8Array]",FL="[object Uint8ClampedArray]",UL="[object Uint16Array]",BL="[object Uint32Array]",$e={};$e[CL]=$e[DL]=$e[LL]=$e[ML]=$e[jL]=$e[VL]=$e[FL]=$e[UL]=$e[BL]=!0;$e[vL]=$e[_L]=$e[RL]=$e[EL]=$e[NL]=$e[wL]=$e[TL]=$e[bL]=$e[IL]=$e[AL]=$e[SL]=$e[kL]=$e[PL]=$e[xL]=$e[OL]=!1;function qL(t){return yL(t)&&gL(t.length)&&!!$e[mL(t)]}var $L=qL;function zL(t){return function(e){return t(e)}}var HL=zL,yu={exports:{}};yu.exports;(function(t,e){var n=pw,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===r,s=o&&n.process,a=function(){try{var l=i&&i.require&&i.require("util").types;return l||s&&s.binding&&s.binding("util")}catch{}}();t.exports=a})(yu,yu.exports);var WL=yu.exports,KL=$L,GL=HL,fv=WL,hv=fv&&fv.isTypedArray,QL=hv?GL(hv):KL,Iw=QL,YL=QD,XL=sL,JL=Cp,ZL=Tw,e4=hL,t4=Iw,n4=Object.prototype,r4=n4.hasOwnProperty;function i4(t,e){var n=JL(t),r=!n&&XL(t),i=!n&&!r&&ZL(t),o=!n&&!r&&!i&&t4(t),s=n||r||i||o,a=s?YL(t.length,String):[],l=a.length;for(var c in t)(e||r4.call(t,c))&&!(s&&(c=="length"||i&&(c=="offset"||c=="parent")||o&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||e4(c,l)))&&a.push(c);return a}var o4=i4,s4=Object.prototype;function a4(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||s4;return t===n}var l4=a4;function u4(t,e){return function(n){return t(e(n))}}var c4=u4,f4=c4,h4=f4(Object.keys,Object),d4=h4,p4=l4,m4=d4,g4=Object.prototype,y4=g4.hasOwnProperty;function v4(t){if(!p4(t))return m4(t);var e=[];for(var n in Object(t))y4.call(t,n)&&n!="constructor"&&e.push(n);return e}var _4=v4,E4=yw,w4=bw;function T4(t){return t!=null&&w4(t.length)&&!E4(t)}var b4=T4,I4=o4,A4=_4,S4=b4;function k4(t){return S4(t)?I4(t):A4(t)}var P4=k4,x4=jD,O4=KD,R4=P4;function N4(t){return x4(t,R4,O4)}var C4=N4,dv=C4,D4=1,L4=Object.prototype,M4=L4.hasOwnProperty;function j4(t,e,n,r,i,o){var s=n&D4,a=dv(t),l=a.length,c=dv(e),d=c.length;if(l!=d&&!s)return!1;for(var h=l;h--;){var f=a[h];if(!(s?f in e:M4.call(e,f)))return!1}var m=o.get(t),w=o.get(e);if(m&&w)return m==e&&w==t;var _=!0;o.set(t,e),o.set(e,t);for(var E=s;++h<l;){f=a[h];var g=t[f],p=e[f];if(r)var v=s?r(p,g,f,e,t,o):r(g,p,f,t,e,o);if(!(v===void 0?g===p||i(g,p,n,r,o):v)){_=!1;break}E||(E=f=="constructor")}if(_&&!E){var y=t.constructor,k=e.constructor;y!=k&&"constructor"in t&&"constructor"in e&&!(typeof y=="function"&&y instanceof y&&typeof k=="function"&&k instanceof k)&&(_=!1)}return o.delete(t),o.delete(e),_}var V4=j4,F4=xo,U4=rr,B4=F4(U4,"DataView"),q4=B4,$4=xo,z4=rr,H4=$4(z4,"Promise"),W4=H4,K4=xo,G4=rr,Q4=K4(G4,"Set"),Y4=Q4,X4=xo,J4=rr,Z4=X4(J4,"WeakMap"),eM=Z4,Dh=q4,Lh=Np,Mh=W4,jh=Y4,Vh=eM,Aw=rc,Co=vw,pv="[object Map]",tM="[object Object]",mv="[object Promise]",gv="[object Set]",yv="[object WeakMap]",vv="[object DataView]",nM=Co(Dh),rM=Co(Lh),iM=Co(Mh),oM=Co(jh),sM=Co(Vh),Zr=Aw;(Dh&&Zr(new Dh(new ArrayBuffer(1)))!=vv||Lh&&Zr(new Lh)!=pv||Mh&&Zr(Mh.resolve())!=mv||jh&&Zr(new jh)!=gv||Vh&&Zr(new Vh)!=yv)&&(Zr=function(t){var e=Aw(t),n=e==tM?t.constructor:void 0,r=n?Co(n):"";if(r)switch(r){case nM:return vv;case rM:return pv;case iM:return mv;case oM:return gv;case sM:return yv}return e});var aM=Zr,pf=FC,lM=Ew,uM=OD,cM=V4,_v=aM,Ev=Cp,wv=Tw,fM=Iw,hM=1,Tv="[object Arguments]",bv="[object Array]",ul="[object Object]",dM=Object.prototype,Iv=dM.hasOwnProperty;function pM(t,e,n,r,i,o){var s=Ev(t),a=Ev(e),l=s?bv:_v(t),c=a?bv:_v(e);l=l==Tv?ul:l,c=c==Tv?ul:c;var d=l==ul,h=c==ul,f=l==c;if(f&&wv(t)){if(!wv(e))return!1;s=!0,d=!1}if(f&&!d)return o||(o=new pf),s||fM(t)?lM(t,e,n,r,i,o):uM(t,e,l,n,r,i,o);if(!(n&hM)){var m=d&&Iv.call(t,"__wrapped__"),w=h&&Iv.call(e,"__wrapped__");if(m||w){var _=m?t.value():t,E=w?e.value():e;return o||(o=new pf),i(_,E,n,r,o)}}return f?(o||(o=new pf),cM(t,e,n,r,i,o)):!1}var mM=pM,gM=mM,Av=sc;function Sw(t,e,n,r,i){return t===e?!0:t==null||e==null||!Av(t)&&!Av(e)?t!==t&&e!==e:gM(t,e,n,r,Sw,i)}var yM=Sw,vM=yM;function _M(t,e){return vM(t,e)}var EM=_M,kw={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */(function(t,e){(function(r,i){t.exports=i()})(typeof self<"u"?self:Yt,function(){return function(n){var r={};function i(o){if(r[o])return r[o].exports;var s=r[o]={i:o,l:!1,exports:{}};return n[o].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=n,i.c=r,i.d=function(o,s,a){i.o(o,s)||Object.defineProperty(o,s,{configurable:!1,enumerable:!0,get:a})},i.n=function(o){var s=o&&o.__esModule?function(){return o.default}:function(){return o};return i.d(s,"a",s),s},i.o=function(o,s){return Object.prototype.hasOwnProperty.call(o,s)},i.p="",i(i.s=109)}([function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(17),s=i(18),a=i(19),l=i(45),c=i(46),d=i(47),h=i(48),f=i(49),m=i(12),w=i(32),_=i(33),E=i(31),g=i(1),p={Scope:g.Scope,create:g.create,find:g.find,query:g.query,register:g.register,Container:o.default,Format:s.default,Leaf:a.default,Embed:h.default,Scroll:l.default,Block:d.default,Inline:c.default,Text:f.default,Attributor:{Attribute:m.default,Class:w.default,Style:_.default,Store:E.default}};r.default=p},function(n,r,i){var o=this&&this.__extends||function(){var E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,p){g.__proto__=p}||function(g,p){for(var v in p)p.hasOwnProperty(v)&&(g[v]=p[v])};return function(g,p){E(g,p);function v(){this.constructor=g}g.prototype=p===null?Object.create(p):(v.prototype=p.prototype,new v)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=function(E){o(g,E);function g(p){var v=this;return p="[Parchment] "+p,v=E.call(this,p)||this,v.message=p,v.name=v.constructor.name,v}return g}(Error);r.ParchmentError=s;var a={},l={},c={},d={};r.DATA_KEY="__blot";var h;(function(E){E[E.TYPE=3]="TYPE",E[E.LEVEL=12]="LEVEL",E[E.ATTRIBUTE=13]="ATTRIBUTE",E[E.BLOT=14]="BLOT",E[E.INLINE=7]="INLINE",E[E.BLOCK=11]="BLOCK",E[E.BLOCK_BLOT=10]="BLOCK_BLOT",E[E.INLINE_BLOT=6]="INLINE_BLOT",E[E.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",E[E.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",E[E.ANY=15]="ANY"})(h=r.Scope||(r.Scope={}));function f(E,g){var p=w(E);if(p==null)throw new s("Unable to create "+E+" blot");var v=p,y=E instanceof Node||E.nodeType===Node.TEXT_NODE?E:v.create(g);return new v(y,g)}r.create=f;function m(E,g){return g===void 0&&(g=!1),E==null?null:E[r.DATA_KEY]!=null?E[r.DATA_KEY].blot:g?m(E.parentNode,g):null}r.find=m;function w(E,g){g===void 0&&(g=h.ANY);var p;if(typeof E=="string")p=d[E]||a[E];else if(E instanceof Text||E.nodeType===Node.TEXT_NODE)p=d.text;else if(typeof E=="number")E&h.LEVEL&h.BLOCK?p=d.block:E&h.LEVEL&h.INLINE&&(p=d.inline);else if(E instanceof HTMLElement){var v=(E.getAttribute("class")||"").split(/\s+/);for(var y in v)if(p=l[v[y]],p)break;p=p||c[E.tagName]}return p==null?null:g&h.LEVEL&p.scope&&g&h.TYPE&p.scope?p:null}r.query=w;function _(){for(var E=[],g=0;g<arguments.length;g++)E[g]=arguments[g];if(E.length>1)return E.map(function(y){return _(y)});var p=E[0];if(typeof p.blotName!="string"&&typeof p.attrName!="string")throw new s("Invalid definition");if(p.blotName==="abstract")throw new s("Cannot register abstract class");if(d[p.blotName||p.attrName]=p,typeof p.keyName=="string")a[p.keyName]=p;else if(p.className!=null&&(l[p.className]=p),p.tagName!=null){Array.isArray(p.tagName)?p.tagName=p.tagName.map(function(y){return y.toUpperCase()}):p.tagName=p.tagName.toUpperCase();var v=Array.isArray(p.tagName)?p.tagName:[p.tagName];v.forEach(function(y){(c[y]==null||p.className==null)&&(c[y]=p)})}return p}r.register=_},function(n,r,i){var o=i(51),s=i(11),a=i(3),l=i(20),c="\0",d=function(h){Array.isArray(h)?this.ops=h:h!=null&&Array.isArray(h.ops)?this.ops=h.ops:this.ops=[]};d.prototype.insert=function(h,f){var m={};return h.length===0?this:(m.insert=h,f!=null&&typeof f=="object"&&Object.keys(f).length>0&&(m.attributes=f),this.push(m))},d.prototype.delete=function(h){return h<=0?this:this.push({delete:h})},d.prototype.retain=function(h,f){if(h<=0)return this;var m={retain:h};return f!=null&&typeof f=="object"&&Object.keys(f).length>0&&(m.attributes=f),this.push(m)},d.prototype.push=function(h){var f=this.ops.length,m=this.ops[f-1];if(h=a(!0,{},h),typeof m=="object"){if(typeof h.delete=="number"&&typeof m.delete=="number")return this.ops[f-1]={delete:m.delete+h.delete},this;if(typeof m.delete=="number"&&h.insert!=null&&(f-=1,m=this.ops[f-1],typeof m!="object"))return this.ops.unshift(h),this;if(s(h.attributes,m.attributes)){if(typeof h.insert=="string"&&typeof m.insert=="string")return this.ops[f-1]={insert:m.insert+h.insert},typeof h.attributes=="object"&&(this.ops[f-1].attributes=h.attributes),this;if(typeof h.retain=="number"&&typeof m.retain=="number")return this.ops[f-1]={retain:m.retain+h.retain},typeof h.attributes=="object"&&(this.ops[f-1].attributes=h.attributes),this}}return f===this.ops.length?this.ops.push(h):this.ops.splice(f,0,h),this},d.prototype.chop=function(){var h=this.ops[this.ops.length-1];return h&&h.retain&&!h.attributes&&this.ops.pop(),this},d.prototype.filter=function(h){return this.ops.filter(h)},d.prototype.forEach=function(h){this.ops.forEach(h)},d.prototype.map=function(h){return this.ops.map(h)},d.prototype.partition=function(h){var f=[],m=[];return this.forEach(function(w){var _=h(w)?f:m;_.push(w)}),[f,m]},d.prototype.reduce=function(h,f){return this.ops.reduce(h,f)},d.prototype.changeLength=function(){return this.reduce(function(h,f){return f.insert?h+l.length(f):f.delete?h-f.delete:h},0)},d.prototype.length=function(){return this.reduce(function(h,f){return h+l.length(f)},0)},d.prototype.slice=function(h,f){h=h||0,typeof f!="number"&&(f=1/0);for(var m=[],w=l.iterator(this.ops),_=0;_<f&&w.hasNext();){var E;_<h?E=w.next(h-_):(E=w.next(f-_),m.push(E)),_+=l.length(E)}return new d(m)},d.prototype.compose=function(h){var f=l.iterator(this.ops),m=l.iterator(h.ops),w=[],_=m.peek();if(_!=null&&typeof _.retain=="number"&&_.attributes==null){for(var E=_.retain;f.peekType()==="insert"&&f.peekLength()<=E;)E-=f.peekLength(),w.push(f.next());_.retain-E>0&&m.next(_.retain-E)}for(var g=new d(w);f.hasNext()||m.hasNext();)if(m.peekType()==="insert")g.push(m.next());else if(f.peekType()==="delete")g.push(f.next());else{var p=Math.min(f.peekLength(),m.peekLength()),v=f.next(p),y=m.next(p);if(typeof y.retain=="number"){var k={};typeof v.retain=="number"?k.retain=p:k.insert=v.insert;var N=l.attributes.compose(v.attributes,y.attributes,typeof v.retain=="number");if(N&&(k.attributes=N),g.push(k),!m.hasNext()&&s(g.ops[g.ops.length-1],k)){var S=new d(f.rest());return g.concat(S).chop()}}else typeof y.delete=="number"&&typeof v.retain=="number"&&g.push(y)}return g.chop()},d.prototype.concat=function(h){var f=new d(this.ops.slice());return h.ops.length>0&&(f.push(h.ops[0]),f.ops=f.ops.concat(h.ops.slice(1))),f},d.prototype.diff=function(h,f){if(this.ops===h.ops)return new d;var m=[this,h].map(function(p){return p.map(function(v){if(v.insert!=null)return typeof v.insert=="string"?v.insert:c;var y=p===h?"on":"with";throw new Error("diff() called "+y+" non-document")}).join("")}),w=new d,_=o(m[0],m[1],f),E=l.iterator(this.ops),g=l.iterator(h.ops);return _.forEach(function(p){for(var v=p[1].length;v>0;){var y=0;switch(p[0]){case o.INSERT:y=Math.min(g.peekLength(),v),w.push(g.next(y));break;case o.DELETE:y=Math.min(v,E.peekLength()),E.next(y),w.delete(y);break;case o.EQUAL:y=Math.min(E.peekLength(),g.peekLength(),v);var k=E.next(y),N=g.next(y);s(k.insert,N.insert)?w.retain(y,l.attributes.diff(k.attributes,N.attributes)):w.push(N).delete(y);break}v-=y}}),w.chop()},d.prototype.eachLine=function(h,f){f=f||`
`;for(var m=l.iterator(this.ops),w=new d,_=0;m.hasNext();){if(m.peekType()!=="insert")return;var E=m.peek(),g=l.length(E)-m.peekLength(),p=typeof E.insert=="string"?E.insert.indexOf(f,g)-g:-1;if(p<0)w.push(m.next());else if(p>0)w.push(m.next(p));else{if(h(w,m.next(1).attributes||{},_)===!1)return;_+=1,w=new d}}w.length()>0&&h(w,{},_)},d.prototype.transform=function(h,f){if(f=!!f,typeof h=="number")return this.transformPosition(h,f);for(var m=l.iterator(this.ops),w=l.iterator(h.ops),_=new d;m.hasNext()||w.hasNext();)if(m.peekType()==="insert"&&(f||w.peekType()!=="insert"))_.retain(l.length(m.next()));else if(w.peekType()==="insert")_.push(w.next());else{var E=Math.min(m.peekLength(),w.peekLength()),g=m.next(E),p=w.next(E);if(g.delete)continue;p.delete?_.push(p):_.retain(E,l.attributes.transform(g.attributes,p.attributes,f))}return _.chop()},d.prototype.transformPosition=function(h,f){f=!!f;for(var m=l.iterator(this.ops),w=0;m.hasNext()&&w<=h;){var _=m.peekLength(),E=m.peekType();if(m.next(),E==="delete"){h-=Math.min(_,h-w);continue}else E==="insert"&&(w<h||!f)&&(h+=_);w+=_}return h},n.exports=d},function(n,r){var i=Object.prototype.hasOwnProperty,o=Object.prototype.toString,s=Object.defineProperty,a=Object.getOwnPropertyDescriptor,l=function(m){return typeof Array.isArray=="function"?Array.isArray(m):o.call(m)==="[object Array]"},c=function(m){if(!m||o.call(m)!=="[object Object]")return!1;var w=i.call(m,"constructor"),_=m.constructor&&m.constructor.prototype&&i.call(m.constructor.prototype,"isPrototypeOf");if(m.constructor&&!w&&!_)return!1;var E;for(E in m);return typeof E>"u"||i.call(m,E)},d=function(m,w){s&&w.name==="__proto__"?s(m,w.name,{enumerable:!0,configurable:!0,value:w.newValue,writable:!0}):m[w.name]=w.newValue},h=function(m,w){if(w==="__proto__")if(i.call(m,w)){if(a)return a(m,w).value}else return;return m[w]};n.exports=function f(){var m,w,_,E,g,p,v=arguments[0],y=1,k=arguments.length,N=!1;for(typeof v=="boolean"&&(N=v,v=arguments[1]||{},y=2),(v==null||typeof v!="object"&&typeof v!="function")&&(v={});y<k;++y)if(m=arguments[y],m!=null)for(w in m)_=h(v,w),E=h(m,w),v!==E&&(N&&E&&(c(E)||(g=l(E)))?(g?(g=!1,p=_&&l(_)?_:[]):p=_&&c(_)?_:{},d(v,{name:w,newValue:f(N,p,E)})):typeof E<"u"&&d(v,{name:w,newValue:E}));return v}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BlockEmbed=r.bubbleFormats=void 0;var o=function(){function I(x,O){for(var L=0;L<O.length;L++){var B=O[L];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(x,B.key,B)}}return function(x,O,L){return O&&I(x.prototype,O),L&&I(x,L),x}}(),s=function I(x,O,L){x===null&&(x=Function.prototype);var B=Object.getOwnPropertyDescriptor(x,O);if(B===void 0){var H=Object.getPrototypeOf(x);return H===null?void 0:I(H,O,L)}else{if("value"in B)return B.value;var W=B.get;return W===void 0?void 0:W.call(L)}},a=i(3),l=v(a),c=i(2),d=v(c),h=i(0),f=v(h),m=i(16),w=v(m),_=i(6),E=v(_),g=i(7),p=v(g);function v(I){return I&&I.__esModule?I:{default:I}}function y(I,x){if(!(I instanceof x))throw new TypeError("Cannot call a class as a function")}function k(I,x){if(!I)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:I}function N(I,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);I.prototype=Object.create(x&&x.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(I,x):I.__proto__=x)}var S=1,T=function(I){N(x,I);function x(){return y(this,x),k(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return o(x,[{key:"attach",value:function(){s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"attach",this).call(this),this.attributes=new f.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new d.default().insert(this.value(),(0,l.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(L,B){var H=f.default.query(L,f.default.Scope.BLOCK_ATTRIBUTE);H!=null&&this.attributes.attribute(H,B)}},{key:"formatAt",value:function(L,B,H,W){this.format(H,W)}},{key:"insertAt",value:function(L,B,H){if(typeof B=="string"&&B.endsWith(`
`)){var W=f.default.create(P.blotName);this.parent.insertBefore(W,L===0?this:this.next),W.insertAt(0,B.slice(0,-1))}else s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"insertAt",this).call(this,L,B,H)}}]),x}(f.default.Embed);T.scope=f.default.Scope.BLOCK_BLOT;var P=function(I){N(x,I);function x(O){y(this,x);var L=k(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,O));return L.cache={},L}return o(x,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(f.default.Leaf).reduce(function(L,B){return B.length()===0?L:L.insert(B.value(),b(B))},new d.default).insert(`
`,b(this))),this.cache.delta}},{key:"deleteAt",value:function(L,B){s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"deleteAt",this).call(this,L,B),this.cache={}}},{key:"formatAt",value:function(L,B,H,W){B<=0||(f.default.query(H,f.default.Scope.BLOCK)?L+B===this.length()&&this.format(H,W):s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"formatAt",this).call(this,L,Math.min(B,this.length()-L-1),H,W),this.cache={})}},{key:"insertAt",value:function(L,B,H){if(H!=null)return s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"insertAt",this).call(this,L,B,H);if(B.length!==0){var W=B.split(`
`),G=W.shift();G.length>0&&(L<this.length()-1||this.children.tail==null?s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"insertAt",this).call(this,Math.min(L,this.length()-1),G):this.children.tail.insertAt(this.children.tail.length(),G),this.cache={});var q=this;W.reduce(function(V,C){return q=q.split(V,!0),q.insertAt(0,C),C.length},L+G.length)}}},{key:"insertBefore",value:function(L,B){var H=this.children.head;s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"insertBefore",this).call(this,L,B),H instanceof w.default&&H.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"length",this).call(this)+S),this.cache.length}},{key:"moveChildren",value:function(L,B){s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"moveChildren",this).call(this,L,B),this.cache={}}},{key:"optimize",value:function(L){s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"optimize",this).call(this,L),this.cache={}}},{key:"path",value:function(L){return s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"path",this).call(this,L,!0)}},{key:"removeChild",value:function(L){s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"removeChild",this).call(this,L),this.cache={}}},{key:"split",value:function(L){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(B&&(L===0||L>=this.length()-S)){var H=this.clone();return L===0?(this.parent.insertBefore(H,this),this):(this.parent.insertBefore(H,this.next),H)}else{var W=s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"split",this).call(this,L,B);return this.cache={},W}}}]),x}(f.default.Block);P.blotName="block",P.tagName="P",P.defaultChild="break",P.allowedChildren=[E.default,f.default.Embed,p.default];function b(I){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return I==null||(typeof I.formats=="function"&&(x=(0,l.default)(x,I.formats())),I.parent==null||I.parent.blotName=="scroll"||I.parent.statics.scope!==I.statics.scope)?x:b(I.parent,x)}r.bubbleFormats=b,r.BlockEmbed=T,r.default=P},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.overload=r.expandConfig=void 0;var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(q){return typeof q}:function(q){return q&&typeof Symbol=="function"&&q.constructor===Symbol&&q!==Symbol.prototype?"symbol":typeof q},s=function(){function q(V,C){var M=[],U=!0,K=!1,z=void 0;try{for(var j=V[Symbol.iterator](),$;!(U=($=j.next()).done)&&(M.push($.value),!(C&&M.length===C));U=!0);}catch(Y){K=!0,z=Y}finally{try{!U&&j.return&&j.return()}finally{if(K)throw z}}return M}return function(V,C){if(Array.isArray(V))return V;if(Symbol.iterator in Object(V))return q(V,C);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function q(V,C){for(var M=0;M<C.length;M++){var U=C[M];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(V,U.key,U)}}return function(V,C,M){return C&&q(V.prototype,C),M&&q(V,M),V}}();i(50);var l=i(2),c=b(l),d=i(14),h=b(d),f=i(8),m=b(f),w=i(9),_=b(w),E=i(0),g=b(E),p=i(15),v=b(p),y=i(3),k=b(y),N=i(10),S=b(N),T=i(34),P=b(T);function b(q){return q&&q.__esModule?q:{default:q}}function I(q,V,C){return V in q?Object.defineProperty(q,V,{value:C,enumerable:!0,configurable:!0,writable:!0}):q[V]=C,q}function x(q,V){if(!(q instanceof V))throw new TypeError("Cannot call a class as a function")}var O=(0,S.default)("quill"),L=function(){a(q,null,[{key:"debug",value:function(C){C===!0&&(C="log"),S.default.level(C)}},{key:"find",value:function(C){return C.__quill||g.default.find(C)}},{key:"import",value:function(C){return this.imports[C]==null&&O.error("Cannot import "+C+". Are you sure it was registered?"),this.imports[C]}},{key:"register",value:function(C,M){var U=this,K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof C!="string"){var z=C.attrName||C.blotName;typeof z=="string"?this.register("formats/"+z,C,M):Object.keys(C).forEach(function(j){U.register(j,C[j],M)})}else this.imports[C]!=null&&!K&&O.warn("Overwriting "+C+" with",M),this.imports[C]=M,(C.startsWith("blots/")||C.startsWith("formats/"))&&M.blotName!=="abstract"?g.default.register(M):C.startsWith("modules")&&typeof M.register=="function"&&M.register()}}]);function q(V){var C=this,M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(x(this,q),this.options=B(V,M),this.container=this.options.container,this.container==null)return O.error("Invalid Quill container",V);this.options.debug&&q.debug(this.options.debug);var U=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new m.default,this.scroll=g.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new h.default(this.scroll),this.selection=new v.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(m.default.events.EDITOR_CHANGE,function(z){z===m.default.events.TEXT_CHANGE&&C.root.classList.toggle("ql-blank",C.editor.isBlank())}),this.emitter.on(m.default.events.SCROLL_UPDATE,function(z,j){var $=C.selection.lastRange,Y=$&&$.length===0?$.index:void 0;H.call(C,function(){return C.editor.update(null,j,Y)},z)});var K=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+U+"<p><br></p></div>");this.setContents(K),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return a(q,[{key:"addContainer",value:function(C){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof C=="string"){var U=C;C=document.createElement("div"),C.classList.add(U)}return this.container.insertBefore(C,M),C}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(C,M,U){var K=this,z=W(C,M,U),j=s(z,4);return C=j[0],M=j[1],U=j[3],H.call(this,function(){return K.editor.deleteText(C,M)},U,C,-1*M)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(C),this.container.classList.toggle("ql-disabled",!C)}},{key:"focus",value:function(){var C=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=C,this.scrollIntoView()}},{key:"format",value:function(C,M){var U=this,K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:m.default.sources.API;return H.call(this,function(){var z=U.getSelection(!0),j=new c.default;if(z==null)return j;if(g.default.query(C,g.default.Scope.BLOCK))j=U.editor.formatLine(z.index,z.length,I({},C,M));else{if(z.length===0)return U.selection.format(C,M),j;j=U.editor.formatText(z.index,z.length,I({},C,M))}return U.setSelection(z,m.default.sources.SILENT),j},K)}},{key:"formatLine",value:function(C,M,U,K,z){var j=this,$=void 0,Y=W(C,M,U,K,z),X=s(Y,4);return C=X[0],M=X[1],$=X[2],z=X[3],H.call(this,function(){return j.editor.formatLine(C,M,$)},z,C,0)}},{key:"formatText",value:function(C,M,U,K,z){var j=this,$=void 0,Y=W(C,M,U,K,z),X=s(Y,4);return C=X[0],M=X[1],$=X[2],z=X[3],H.call(this,function(){return j.editor.formatText(C,M,$)},z,C,0)}},{key:"getBounds",value:function(C){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,U=void 0;typeof C=="number"?U=this.selection.getBounds(C,M):U=this.selection.getBounds(C.index,C.length);var K=this.container.getBoundingClientRect();return{bottom:U.bottom-K.top,height:U.height,left:U.left-K.left,right:U.right-K.left,top:U.top-K.top,width:U.width}}},{key:"getContents",value:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-C,U=W(C,M),K=s(U,2);return C=K[0],M=K[1],this.editor.getContents(C,M)}},{key:"getFormat",value:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof C=="number"?this.editor.getFormat(C,M):this.editor.getFormat(C.index,C.length)}},{key:"getIndex",value:function(C){return C.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(C){return this.scroll.leaf(C)}},{key:"getLine",value:function(C){return this.scroll.line(C)}},{key:"getLines",value:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof C!="number"?this.scroll.lines(C.index,C.length):this.scroll.lines(C,M)}},{key:"getModule",value:function(C){return this.theme.modules[C]}},{key:"getSelection",value:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return C&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-C,U=W(C,M),K=s(U,2);return C=K[0],M=K[1],this.editor.getText(C,M)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(C,M,U){var K=this,z=arguments.length>3&&arguments[3]!==void 0?arguments[3]:q.sources.API;return H.call(this,function(){return K.editor.insertEmbed(C,M,U)},z,C)}},{key:"insertText",value:function(C,M,U,K,z){var j=this,$=void 0,Y=W(C,0,U,K,z),X=s(Y,4);return C=X[0],$=X[2],z=X[3],H.call(this,function(){return j.editor.insertText(C,M,$)},z,C,M.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(C,M,U){this.clipboard.dangerouslyPasteHTML(C,M,U)}},{key:"removeFormat",value:function(C,M,U){var K=this,z=W(C,M,U),j=s(z,4);return C=j[0],M=j[1],U=j[3],H.call(this,function(){return K.editor.removeFormat(C,M)},U,C)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(C){var M=this,U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:m.default.sources.API;return H.call(this,function(){C=new c.default(C);var K=M.getLength(),z=M.editor.deleteText(0,K),j=M.editor.applyDelta(C),$=j.ops[j.ops.length-1];$!=null&&typeof $.insert=="string"&&$.insert[$.insert.length-1]===`
`&&(M.editor.deleteText(M.getLength()-1,1),j.delete(1));var Y=z.compose(j);return Y},U)}},{key:"setSelection",value:function(C,M,U){if(C==null)this.selection.setRange(null,M||q.sources.API);else{var K=W(C,M,U),z=s(K,4);C=z[0],M=z[1],U=z[3],this.selection.setRange(new p.Range(C,M),U),U!==m.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(C){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:m.default.sources.API,U=new c.default().insert(C);return this.setContents(U,M)}},{key:"update",value:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:m.default.sources.USER,M=this.scroll.update(C);return this.selection.update(C),M}},{key:"updateContents",value:function(C){var M=this,U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:m.default.sources.API;return H.call(this,function(){return C=new c.default(C),M.editor.applyDelta(C,U)},U,!0)}}]),q}();L.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},L.events=m.default.events,L.sources=m.default.sources,L.version="1.3.7",L.imports={delta:c.default,parchment:g.default,"core/module":_.default,"core/theme":P.default};function B(q,V){if(V=(0,k.default)(!0,{container:q,modules:{clipboard:!0,keyboard:!0,history:!0}},V),!V.theme||V.theme===L.DEFAULTS.theme)V.theme=P.default;else if(V.theme=L.import("themes/"+V.theme),V.theme==null)throw new Error("Invalid theme "+V.theme+". Did you register it?");var C=(0,k.default)(!0,{},V.theme.DEFAULTS);[C,V].forEach(function(K){K.modules=K.modules||{},Object.keys(K.modules).forEach(function(z){K.modules[z]===!0&&(K.modules[z]={})})});var M=Object.keys(C.modules).concat(Object.keys(V.modules)),U=M.reduce(function(K,z){var j=L.import("modules/"+z);return j==null?O.error("Cannot load "+z+" module. Are you sure you registered it?"):K[z]=j.DEFAULTS||{},K},{});return V.modules!=null&&V.modules.toolbar&&V.modules.toolbar.constructor!==Object&&(V.modules.toolbar={container:V.modules.toolbar}),V=(0,k.default)(!0,{},L.DEFAULTS,{modules:U},C,V),["bounds","container","scrollingContainer"].forEach(function(K){typeof V[K]=="string"&&(V[K]=document.querySelector(V[K]))}),V.modules=Object.keys(V.modules).reduce(function(K,z){return V.modules[z]&&(K[z]=V.modules[z]),K},{}),V}function H(q,V,C,M){if(this.options.strict&&!this.isEnabled()&&V===m.default.sources.USER)return new c.default;var U=C==null?null:this.getSelection(),K=this.editor.delta,z=q();if(U!=null&&(C===!0&&(C=U.index),M==null?U=G(U,z,V):M!==0&&(U=G(U,C,M,V)),this.setSelection(U,m.default.sources.SILENT)),z.length()>0){var j,$=[m.default.events.TEXT_CHANGE,z,K,V];if((j=this.emitter).emit.apply(j,[m.default.events.EDITOR_CHANGE].concat($)),V!==m.default.sources.SILENT){var Y;(Y=this.emitter).emit.apply(Y,$)}}return z}function W(q,V,C,M,U){var K={};return typeof q.index=="number"&&typeof q.length=="number"?typeof V!="number"?(U=M,M=C,C=V,V=q.length,q=q.index):(V=q.length,q=q.index):typeof V!="number"&&(U=M,M=C,C=V,V=0),(typeof C>"u"?"undefined":o(C))==="object"?(K=C,U=M):typeof C=="string"&&(M!=null?K[C]=M:U=C),U=U||m.default.sources.API,[q,V,K,U]}function G(q,V,C,M){if(q==null)return null;var U=void 0,K=void 0;if(V instanceof c.default){var z=[q.index,q.index+q.length].map(function(X){return V.transformPosition(X,M!==m.default.sources.USER)}),j=s(z,2);U=j[0],K=j[1]}else{var $=[q.index,q.index+q.length].map(function(X){return X<V||X===V&&M===m.default.sources.USER?X:C>=0?X+C:Math.max(V,X+C)}),Y=s($,2);U=Y[0],K=Y[1]}return new p.Range(U,K-U)}r.expandConfig=B,r.overload=W,r.default=L},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function E(g,p){for(var v=0;v<p.length;v++){var y=p[v];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(g,y.key,y)}}return function(g,p,v){return p&&E(g.prototype,p),v&&E(g,v),g}}(),s=function E(g,p,v){g===null&&(g=Function.prototype);var y=Object.getOwnPropertyDescriptor(g,p);if(y===void 0){var k=Object.getPrototypeOf(g);return k===null?void 0:E(k,p,v)}else{if("value"in y)return y.value;var N=y.get;return N===void 0?void 0:N.call(v)}},a=i(7),l=h(a),c=i(0),d=h(c);function h(E){return E&&E.__esModule?E:{default:E}}function f(E,g){if(!(E instanceof g))throw new TypeError("Cannot call a class as a function")}function m(E,g){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:E}function w(E,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);E.prototype=Object.create(g&&g.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(E,g):E.__proto__=g)}var _=function(E){w(g,E);function g(){return f(this,g),m(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return o(g,[{key:"formatAt",value:function(v,y,k,N){if(g.compare(this.statics.blotName,k)<0&&d.default.query(k,d.default.Scope.BLOT)){var S=this.isolate(v,y);N&&S.wrap(k,N)}else s(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"formatAt",this).call(this,v,y,k,N)}},{key:"optimize",value:function(v){if(s(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"optimize",this).call(this,v),this.parent instanceof g&&g.compare(this.statics.blotName,this.parent.statics.blotName)>0){var y=this.parent.isolate(this.offset(),this.length());this.moveChildren(y),y.wrap(this)}}}],[{key:"compare",value:function(v,y){var k=g.order.indexOf(v),N=g.order.indexOf(y);return k>=0||N>=0?k-N:v===y?0:v<y?-1:1}}]),g}(d.default.Inline);_.allowedChildren=[_,d.default.Embed,l.default],_.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],r.default=_},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(0),s=a(o);function a(f){return f&&f.__esModule?f:{default:f}}function l(f,m){if(!(f instanceof m))throw new TypeError("Cannot call a class as a function")}function c(f,m){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:f}function d(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(f,m):f.__proto__=m)}var h=function(f){d(m,f);function m(){return l(this,m),c(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return m}(s.default.Text);r.default=h},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function p(v,y){for(var k=0;k<y.length;k++){var N=y[k];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(v,N.key,N)}}return function(v,y,k){return y&&p(v.prototype,y),k&&p(v,k),v}}(),s=function p(v,y,k){v===null&&(v=Function.prototype);var N=Object.getOwnPropertyDescriptor(v,y);if(N===void 0){var S=Object.getPrototypeOf(v);return S===null?void 0:p(S,y,k)}else{if("value"in N)return N.value;var T=N.get;return T===void 0?void 0:T.call(k)}},a=i(54),l=h(a),c=i(10),d=h(c);function h(p){return p&&p.__esModule?p:{default:p}}function f(p,v){if(!(p instanceof v))throw new TypeError("Cannot call a class as a function")}function m(p,v){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:p}function w(p,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);p.prototype=Object.create(v&&v.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(p,v):p.__proto__=v)}var _=(0,d.default)("quill:events"),E=["selectionchange","mousedown","mouseup","click"];E.forEach(function(p){document.addEventListener(p,function(){for(var v=arguments.length,y=Array(v),k=0;k<v;k++)y[k]=arguments[k];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(N){if(N.__quill&&N.__quill.emitter){var S;(S=N.__quill.emitter).handleDOM.apply(S,y)}})})});var g=function(p){w(v,p);function v(){f(this,v);var y=m(this,(v.__proto__||Object.getPrototypeOf(v)).call(this));return y.listeners={},y.on("error",_.error),y}return o(v,[{key:"emit",value:function(){_.log.apply(_,arguments),s(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(k){for(var N=arguments.length,S=Array(N>1?N-1:0),T=1;T<N;T++)S[T-1]=arguments[T];(this.listeners[k.type]||[]).forEach(function(P){var b=P.node,I=P.handler;(k.target===b||b.contains(k.target))&&I.apply(void 0,[k].concat(S))})}},{key:"listenDOM",value:function(k,N,S){this.listeners[k]||(this.listeners[k]=[]),this.listeners[k].push({node:N,handler:S})}}]),v}(l.default);g.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},g.sources={API:"api",SILENT:"silent",USER:"user"},r.default=g},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});function o(a,l){if(!(a instanceof l))throw new TypeError("Cannot call a class as a function")}var s=function a(l){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};o(this,a),this.quill=l,this.options=c};s.DEFAULTS={},r.default=s},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=["error","warn","log","info"],s="warn";function a(c){if(o.indexOf(c)<=o.indexOf(s)){for(var d,h=arguments.length,f=Array(h>1?h-1:0),m=1;m<h;m++)f[m-1]=arguments[m];(d=console)[c].apply(d,f)}}function l(c){return o.reduce(function(d,h){return d[h]=a.bind(console,h,c),d},{})}a.level=l.level=function(c){s=c},r.default=l},function(n,r,i){var o=Array.prototype.slice,s=i(52),a=i(53),l=n.exports=function(f,m,w){return w||(w={}),f===m?!0:f instanceof Date&&m instanceof Date?f.getTime()===m.getTime():!f||!m||typeof f!="object"&&typeof m!="object"?w.strict?f===m:f==m:h(f,m,w)};function c(f){return f==null}function d(f){return!(!f||typeof f!="object"||typeof f.length!="number"||typeof f.copy!="function"||typeof f.slice!="function"||f.length>0&&typeof f[0]!="number")}function h(f,m,w){var _,E;if(c(f)||c(m)||f.prototype!==m.prototype)return!1;if(a(f))return a(m)?(f=o.call(f),m=o.call(m),l(f,m,w)):!1;if(d(f)){if(!d(m)||f.length!==m.length)return!1;for(_=0;_<f.length;_++)if(f[_]!==m[_])return!1;return!0}try{var g=s(f),p=s(m)}catch{return!1}if(g.length!=p.length)return!1;for(g.sort(),p.sort(),_=g.length-1;_>=0;_--)if(g[_]!=p[_])return!1;for(_=g.length-1;_>=0;_--)if(E=g[_],!l(f[E],m[E],w))return!1;return typeof f==typeof m}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(1),s=function(){function a(l,c,d){d===void 0&&(d={}),this.attrName=l,this.keyName=c;var h=o.Scope.TYPE&o.Scope.ATTRIBUTE;d.scope!=null?this.scope=d.scope&o.Scope.LEVEL|h:this.scope=o.Scope.ATTRIBUTE,d.whitelist!=null&&(this.whitelist=d.whitelist)}return a.keys=function(l){return[].map.call(l.attributes,function(c){return c.name})},a.prototype.add=function(l,c){return this.canAdd(l,c)?(l.setAttribute(this.keyName,c),!0):!1},a.prototype.canAdd=function(l,c){var d=o.query(l,o.Scope.BLOT&(this.scope|o.Scope.TYPE));return d==null?!1:this.whitelist==null?!0:typeof c=="string"?this.whitelist.indexOf(c.replace(/["']/g,""))>-1:this.whitelist.indexOf(c)>-1},a.prototype.remove=function(l){l.removeAttribute(this.keyName)},a.prototype.value=function(l){var c=l.getAttribute(this.keyName);return this.canAdd(l,c)&&c?c:""},a}();r.default=s},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Code=void 0;var o=function(){function T(P,b){var I=[],x=!0,O=!1,L=void 0;try{for(var B=P[Symbol.iterator](),H;!(x=(H=B.next()).done)&&(I.push(H.value),!(b&&I.length===b));x=!0);}catch(W){O=!0,L=W}finally{try{!x&&B.return&&B.return()}finally{if(O)throw L}}return I}return function(P,b){if(Array.isArray(P))return P;if(Symbol.iterator in Object(P))return T(P,b);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function T(P,b){for(var I=0;I<b.length;I++){var x=b[I];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(P,x.key,x)}}return function(P,b,I){return b&&T(P.prototype,b),I&&T(P,I),P}}(),a=function T(P,b,I){P===null&&(P=Function.prototype);var x=Object.getOwnPropertyDescriptor(P,b);if(x===void 0){var O=Object.getPrototypeOf(P);return O===null?void 0:T(O,b,I)}else{if("value"in x)return x.value;var L=x.get;return L===void 0?void 0:L.call(I)}},l=i(2),c=p(l),d=i(0),h=p(d),f=i(4),m=p(f),w=i(6),_=p(w),E=i(7),g=p(E);function p(T){return T&&T.__esModule?T:{default:T}}function v(T,P){if(!(T instanceof P))throw new TypeError("Cannot call a class as a function")}function y(T,P){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:T}function k(T,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);T.prototype=Object.create(P&&P.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(T,P):T.__proto__=P)}var N=function(T){k(P,T);function P(){return v(this,P),y(this,(P.__proto__||Object.getPrototypeOf(P)).apply(this,arguments))}return P}(_.default);N.blotName="code",N.tagName="CODE";var S=function(T){k(P,T);function P(){return v(this,P),y(this,(P.__proto__||Object.getPrototypeOf(P)).apply(this,arguments))}return s(P,[{key:"delta",value:function(){var I=this,x=this.domNode.textContent;return x.endsWith(`
`)&&(x=x.slice(0,-1)),x.split(`
`).reduce(function(O,L){return O.insert(L).insert(`
`,I.formats())},new c.default)}},{key:"format",value:function(I,x){if(!(I===this.statics.blotName&&x)){var O=this.descendant(g.default,this.length()-1),L=o(O,1),B=L[0];B!=null&&B.deleteAt(B.length()-1,1),a(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"format",this).call(this,I,x)}}},{key:"formatAt",value:function(I,x,O,L){if(x!==0&&!(h.default.query(O,h.default.Scope.BLOCK)==null||O===this.statics.blotName&&L===this.statics.formats(this.domNode))){var B=this.newlineIndex(I);if(!(B<0||B>=I+x)){var H=this.newlineIndex(I,!0)+1,W=B-H+1,G=this.isolate(H,W),q=G.next;G.format(O,L),q instanceof P&&q.formatAt(0,I-H+x-W,O,L)}}}},{key:"insertAt",value:function(I,x,O){if(O==null){var L=this.descendant(g.default,I),B=o(L,2),H=B[0],W=B[1];H.insertAt(W,x)}}},{key:"length",value:function(){var I=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?I:I+1}},{key:"newlineIndex",value:function(I){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(x)return this.domNode.textContent.slice(0,I).lastIndexOf(`
`);var O=this.domNode.textContent.slice(I).indexOf(`
`);return O>-1?I+O:-1}},{key:"optimize",value:function(I){this.domNode.textContent.endsWith(`
`)||this.appendChild(h.default.create("text",`
`)),a(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"optimize",this).call(this,I);var x=this.next;x!=null&&x.prev===this&&x.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===x.statics.formats(x.domNode)&&(x.optimize(I),x.moveChildren(this),x.remove())}},{key:"replace",value:function(I){a(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"replace",this).call(this,I),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(x){var O=h.default.find(x);O==null?x.parentNode.removeChild(x):O instanceof h.default.Embed?O.remove():O.unwrap()})}}],[{key:"create",value:function(I){var x=a(P.__proto__||Object.getPrototypeOf(P),"create",this).call(this,I);return x.setAttribute("spellcheck",!1),x}},{key:"formats",value:function(){return!0}}]),P}(m.default);S.blotName="code-block",S.tagName="PRE",S.TAB="  ",r.Code=N,r.default=S},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(q){return typeof q}:function(q){return q&&typeof Symbol=="function"&&q.constructor===Symbol&&q!==Symbol.prototype?"symbol":typeof q},s=function(){function q(V,C){var M=[],U=!0,K=!1,z=void 0;try{for(var j=V[Symbol.iterator](),$;!(U=($=j.next()).done)&&(M.push($.value),!(C&&M.length===C));U=!0);}catch(Y){K=!0,z=Y}finally{try{!U&&j.return&&j.return()}finally{if(K)throw z}}return M}return function(V,C){if(Array.isArray(V))return V;if(Symbol.iterator in Object(V))return q(V,C);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function q(V,C){for(var M=0;M<C.length;M++){var U=C[M];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(V,U.key,U)}}return function(V,C,M){return C&&q(V.prototype,C),M&&q(V,M),V}}(),l=i(2),c=x(l),d=i(20),h=x(d),f=i(0),m=x(f),w=i(13),_=x(w),E=i(24),g=x(E),p=i(4),v=x(p),y=i(16),k=x(y),N=i(21),S=x(N),T=i(11),P=x(T),b=i(3),I=x(b);function x(q){return q&&q.__esModule?q:{default:q}}function O(q,V,C){return V in q?Object.defineProperty(q,V,{value:C,enumerable:!0,configurable:!0,writable:!0}):q[V]=C,q}function L(q,V){if(!(q instanceof V))throw new TypeError("Cannot call a class as a function")}var B=/^[ -~]*$/,H=function(){function q(V){L(this,q),this.scroll=V,this.delta=this.getDelta()}return a(q,[{key:"applyDelta",value:function(C){var M=this,U=!1;this.scroll.update();var K=this.scroll.length();return this.scroll.batchStart(),C=G(C),C.reduce(function(z,j){var $=j.retain||j.delete||j.insert.length||1,Y=j.attributes||{};if(j.insert!=null){if(typeof j.insert=="string"){var X=j.insert;X.endsWith(`
`)&&U&&(U=!1,X=X.slice(0,-1)),z>=K&&!X.endsWith(`
`)&&(U=!0),M.scroll.insertAt(z,X);var ne=M.scroll.line(z),Z=s(ne,2),ue=Z[0],me=Z[1],we=(0,I.default)({},(0,p.bubbleFormats)(ue));if(ue instanceof v.default){var Se=ue.descendant(m.default.Leaf,me),mt=s(Se,1),nt=mt[0];we=(0,I.default)(we,(0,p.bubbleFormats)(nt))}Y=h.default.attributes.diff(we,Y)||{}}else if(o(j.insert)==="object"){var ee=Object.keys(j.insert)[0];if(ee==null)return z;M.scroll.insertAt(z,ee,j.insert[ee])}K+=$}return Object.keys(Y).forEach(function(te){M.scroll.formatAt(z,$,te,Y[te])}),z+$},0),C.reduce(function(z,j){return typeof j.delete=="number"?(M.scroll.deleteAt(z,j.delete),z):z+(j.retain||j.insert.length||1)},0),this.scroll.batchEnd(),this.update(C)}},{key:"deleteText",value:function(C,M){return this.scroll.deleteAt(C,M),this.update(new c.default().retain(C).delete(M))}},{key:"formatLine",value:function(C,M){var U=this,K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(K).forEach(function(z){if(!(U.scroll.whitelist!=null&&!U.scroll.whitelist[z])){var j=U.scroll.lines(C,Math.max(M,1)),$=M;j.forEach(function(Y){var X=Y.length();if(!(Y instanceof _.default))Y.format(z,K[z]);else{var ne=C-Y.offset(U.scroll),Z=Y.newlineIndex(ne+$)-ne+1;Y.formatAt(ne,Z,z,K[z])}$-=X})}}),this.scroll.optimize(),this.update(new c.default().retain(C).retain(M,(0,S.default)(K)))}},{key:"formatText",value:function(C,M){var U=this,K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(K).forEach(function(z){U.scroll.formatAt(C,M,z,K[z])}),this.update(new c.default().retain(C).retain(M,(0,S.default)(K)))}},{key:"getContents",value:function(C,M){return this.delta.slice(C,C+M)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(C,M){return C.concat(M.delta())},new c.default)}},{key:"getFormat",value:function(C){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,U=[],K=[];M===0?this.scroll.path(C).forEach(function(j){var $=s(j,1),Y=$[0];Y instanceof v.default?U.push(Y):Y instanceof m.default.Leaf&&K.push(Y)}):(U=this.scroll.lines(C,M),K=this.scroll.descendants(m.default.Leaf,C,M));var z=[U,K].map(function(j){if(j.length===0)return{};for(var $=(0,p.bubbleFormats)(j.shift());Object.keys($).length>0;){var Y=j.shift();if(Y==null)return $;$=W((0,p.bubbleFormats)(Y),$)}return $});return I.default.apply(I.default,z)}},{key:"getText",value:function(C,M){return this.getContents(C,M).filter(function(U){return typeof U.insert=="string"}).map(function(U){return U.insert}).join("")}},{key:"insertEmbed",value:function(C,M,U){return this.scroll.insertAt(C,M,U),this.update(new c.default().retain(C).insert(O({},M,U)))}},{key:"insertText",value:function(C,M){var U=this,K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return M=M.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(C,M),Object.keys(K).forEach(function(z){U.scroll.formatAt(C,M.length,z,K[z])}),this.update(new c.default().retain(C).insert(M,(0,S.default)(K)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var C=this.scroll.children.head;return C.statics.blotName!==v.default.blotName||C.children.length>1?!1:C.children.head instanceof k.default}},{key:"removeFormat",value:function(C,M){var U=this.getText(C,M),K=this.scroll.line(C+M),z=s(K,2),j=z[0],$=z[1],Y=0,X=new c.default;j!=null&&(j instanceof _.default?Y=j.newlineIndex($)-$+1:Y=j.length()-$,X=j.delta().slice($,$+Y-1).insert(`
`));var ne=this.getContents(C,M+Y),Z=ne.diff(new c.default().insert(U).concat(X)),ue=new c.default().retain(C).concat(Z);return this.applyDelta(ue)}},{key:"update",value:function(C){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,K=this.delta;if(M.length===1&&M[0].type==="characterData"&&M[0].target.data.match(B)&&m.default.find(M[0].target)){var z=m.default.find(M[0].target),j=(0,p.bubbleFormats)(z),$=z.offset(this.scroll),Y=M[0].oldValue.replace(g.default.CONTENTS,""),X=new c.default().insert(Y),ne=new c.default().insert(z.value()),Z=new c.default().retain($).concat(X.diff(ne,U));C=Z.reduce(function(ue,me){return me.insert?ue.insert(me.insert,j):ue.push(me)},new c.default),this.delta=K.compose(C)}else this.delta=this.getDelta(),(!C||!(0,P.default)(K.compose(C),this.delta))&&(C=K.diff(this.delta,U));return C}}]),q}();function W(q,V){return Object.keys(V).reduce(function(C,M){return q[M]==null||(V[M]===q[M]?C[M]=V[M]:Array.isArray(V[M])?V[M].indexOf(q[M])<0&&(C[M]=V[M].concat([q[M]])):C[M]=[V[M],q[M]]),C},{})}function G(q){return q.reduce(function(V,C){if(C.insert===1){var M=(0,S.default)(C.attributes);return delete M.image,V.insert({image:C.attributes.image},M)}if(C.attributes!=null&&(C.attributes.list===!0||C.attributes.bullet===!0)&&(C=(0,S.default)(C),C.attributes.list?C.attributes.list="ordered":(C.attributes.list="bullet",delete C.attributes.bullet)),typeof C.insert=="string"){var U=C.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return V.insert(U,C.attributes)}return V.push(C)},new c.default)}r.default=H},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Range=void 0;var o=function(){function T(P,b){var I=[],x=!0,O=!1,L=void 0;try{for(var B=P[Symbol.iterator](),H;!(x=(H=B.next()).done)&&(I.push(H.value),!(b&&I.length===b));x=!0);}catch(W){O=!0,L=W}finally{try{!x&&B.return&&B.return()}finally{if(O)throw L}}return I}return function(P,b){if(Array.isArray(P))return P;if(Symbol.iterator in Object(P))return T(P,b);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function T(P,b){for(var I=0;I<b.length;I++){var x=b[I];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(P,x.key,x)}}return function(P,b,I){return b&&T(P.prototype,b),I&&T(P,I),P}}(),a=i(0),l=g(a),c=i(21),d=g(c),h=i(11),f=g(h),m=i(8),w=g(m),_=i(10),E=g(_);function g(T){return T&&T.__esModule?T:{default:T}}function p(T){if(Array.isArray(T)){for(var P=0,b=Array(T.length);P<T.length;P++)b[P]=T[P];return b}else return Array.from(T)}function v(T,P){if(!(T instanceof P))throw new TypeError("Cannot call a class as a function")}var y=(0,E.default)("quill:selection"),k=function T(P){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;v(this,T),this.index=P,this.length=b},N=function(){function T(P,b){var I=this;v(this,T),this.emitter=b,this.scroll=P,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=l.default.create("cursor",this),this.lastRange=this.savedRange=new k(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){I.mouseDown||setTimeout(I.update.bind(I,w.default.sources.USER),1)}),this.emitter.on(w.default.events.EDITOR_CHANGE,function(x,O){x===w.default.events.TEXT_CHANGE&&O.length()>0&&I.update(w.default.sources.SILENT)}),this.emitter.on(w.default.events.SCROLL_BEFORE_UPDATE,function(){if(I.hasFocus()){var x=I.getNativeRange();x!=null&&x.start.node!==I.cursor.textNode&&I.emitter.once(w.default.events.SCROLL_UPDATE,function(){try{I.setNativeRange(x.start.node,x.start.offset,x.end.node,x.end.offset)}catch{}})}}),this.emitter.on(w.default.events.SCROLL_OPTIMIZE,function(x,O){if(O.range){var L=O.range,B=L.startNode,H=L.startOffset,W=L.endNode,G=L.endOffset;I.setNativeRange(B,H,W,G)}}),this.update(w.default.sources.SILENT)}return s(T,[{key:"handleComposition",value:function(){var b=this;this.root.addEventListener("compositionstart",function(){b.composing=!0}),this.root.addEventListener("compositionend",function(){if(b.composing=!1,b.cursor.parent){var I=b.cursor.restore();if(!I)return;setTimeout(function(){b.setNativeRange(I.startNode,I.startOffset,I.endNode,I.endOffset)},1)}})}},{key:"handleDragging",value:function(){var b=this;this.emitter.listenDOM("mousedown",document.body,function(){b.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){b.mouseDown=!1,b.update(w.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(b,I){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[b])){this.scroll.update();var x=this.getNativeRange();if(!(x==null||!x.native.collapsed||l.default.query(b,l.default.Scope.BLOCK))){if(x.start.node!==this.cursor.textNode){var O=l.default.find(x.start.node,!1);if(O==null)return;if(O instanceof l.default.Leaf){var L=O.split(x.start.offset);O.parent.insertBefore(this.cursor,L)}else O.insertBefore(this.cursor,x.start.node);this.cursor.attach()}this.cursor.format(b,I),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(b){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,x=this.scroll.length();b=Math.min(b,x-1),I=Math.min(b+I,x-1)-b;var O=void 0,L=this.scroll.leaf(b),B=o(L,2),H=B[0],W=B[1];if(H==null)return null;var G=H.position(W,!0),q=o(G,2);O=q[0],W=q[1];var V=document.createRange();if(I>0){V.setStart(O,W);var C=this.scroll.leaf(b+I),M=o(C,2);if(H=M[0],W=M[1],H==null)return null;var U=H.position(W,!0),K=o(U,2);return O=K[0],W=K[1],V.setEnd(O,W),V.getBoundingClientRect()}else{var z="left",j=void 0;return O instanceof Text?(W<O.data.length?(V.setStart(O,W),V.setEnd(O,W+1)):(V.setStart(O,W-1),V.setEnd(O,W),z="right"),j=V.getBoundingClientRect()):(j=H.domNode.getBoundingClientRect(),W>0&&(z="right")),{bottom:j.top+j.height,height:j.height,left:j[z],right:j[z],top:j.top,width:0}}}},{key:"getNativeRange",value:function(){var b=document.getSelection();if(b==null||b.rangeCount<=0)return null;var I=b.getRangeAt(0);if(I==null)return null;var x=this.normalizeNative(I);return y.info("getNativeRange",x),x}},{key:"getRange",value:function(){var b=this.getNativeRange();if(b==null)return[null,null];var I=this.normalizedToRange(b);return[I,b]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(b){var I=this,x=[[b.start.node,b.start.offset]];b.native.collapsed||x.push([b.end.node,b.end.offset]);var O=x.map(function(H){var W=o(H,2),G=W[0],q=W[1],V=l.default.find(G,!0),C=V.offset(I.scroll);return q===0?C:V instanceof l.default.Container?C+V.length():C+V.index(G,q)}),L=Math.min(Math.max.apply(Math,p(O)),this.scroll.length()-1),B=Math.min.apply(Math,[L].concat(p(O)));return new k(B,L-B)}},{key:"normalizeNative",value:function(b){if(!S(this.root,b.startContainer)||!b.collapsed&&!S(this.root,b.endContainer))return null;var I={start:{node:b.startContainer,offset:b.startOffset},end:{node:b.endContainer,offset:b.endOffset},native:b};return[I.start,I.end].forEach(function(x){for(var O=x.node,L=x.offset;!(O instanceof Text)&&O.childNodes.length>0;)if(O.childNodes.length>L)O=O.childNodes[L],L=0;else if(O.childNodes.length===L)O=O.lastChild,L=O instanceof Text?O.data.length:O.childNodes.length+1;else break;x.node=O,x.offset=L}),I}},{key:"rangeToNative",value:function(b){var I=this,x=b.collapsed?[b.index]:[b.index,b.index+b.length],O=[],L=this.scroll.length();return x.forEach(function(B,H){B=Math.min(L-1,B);var W=void 0,G=I.scroll.leaf(B),q=o(G,2),V=q[0],C=q[1],M=V.position(C,H!==0),U=o(M,2);W=U[0],C=U[1],O.push(W,C)}),O.length<2&&(O=O.concat(O)),O}},{key:"scrollIntoView",value:function(b){var I=this.lastRange;if(I!=null){var x=this.getBounds(I.index,I.length);if(x!=null){var O=this.scroll.length()-1,L=this.scroll.line(Math.min(I.index,O)),B=o(L,1),H=B[0],W=H;if(I.length>0){var G=this.scroll.line(Math.min(I.index+I.length,O)),q=o(G,1);W=q[0]}if(!(H==null||W==null)){var V=b.getBoundingClientRect();x.top<V.top?b.scrollTop-=V.top-x.top:x.bottom>V.bottom&&(b.scrollTop+=x.bottom-V.bottom)}}}}},{key:"setNativeRange",value:function(b,I){var x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:b,O=arguments.length>3&&arguments[3]!==void 0?arguments[3]:I,L=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(y.info("setNativeRange",b,I,x,O),!(b!=null&&(this.root.parentNode==null||b.parentNode==null||x.parentNode==null))){var B=document.getSelection();if(B!=null)if(b!=null){this.hasFocus()||this.root.focus();var H=(this.getNativeRange()||{}).native;if(H==null||L||b!==H.startContainer||I!==H.startOffset||x!==H.endContainer||O!==H.endOffset){b.tagName=="BR"&&(I=[].indexOf.call(b.parentNode.childNodes,b),b=b.parentNode),x.tagName=="BR"&&(O=[].indexOf.call(x.parentNode.childNodes,x),x=x.parentNode);var W=document.createRange();W.setStart(b,I),W.setEnd(x,O),B.removeAllRanges(),B.addRange(W)}}else B.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(b){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:w.default.sources.API;if(typeof I=="string"&&(x=I,I=!1),y.info("setRange",b),b!=null){var O=this.rangeToNative(b);this.setNativeRange.apply(this,p(O).concat([I]))}else this.setNativeRange(null);this.update(x)}},{key:"update",value:function(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:w.default.sources.USER,I=this.lastRange,x=this.getRange(),O=o(x,2),L=O[0],B=O[1];if(this.lastRange=L,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,f.default)(I,this.lastRange)){var H;!this.composing&&B!=null&&B.native.collapsed&&B.start.node!==this.cursor.textNode&&this.cursor.restore();var W=[w.default.events.SELECTION_CHANGE,(0,d.default)(this.lastRange),(0,d.default)(I),b];if((H=this.emitter).emit.apply(H,[w.default.events.EDITOR_CHANGE].concat(W)),b!==w.default.sources.SILENT){var G;(G=this.emitter).emit.apply(G,W)}}}}]),T}();function S(T,P){try{P.parentNode}catch{return!1}return P instanceof Text&&(P=P.parentNode),T.contains(P)}r.Range=k,r.default=N},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function w(_,E){for(var g=0;g<E.length;g++){var p=E[g];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(_,p.key,p)}}return function(_,E,g){return E&&w(_.prototype,E),g&&w(_,g),_}}(),s=function w(_,E,g){_===null&&(_=Function.prototype);var p=Object.getOwnPropertyDescriptor(_,E);if(p===void 0){var v=Object.getPrototypeOf(_);return v===null?void 0:w(v,E,g)}else{if("value"in p)return p.value;var y=p.get;return y===void 0?void 0:y.call(g)}},a=i(0),l=c(a);function c(w){return w&&w.__esModule?w:{default:w}}function d(w,_){if(!(w instanceof _))throw new TypeError("Cannot call a class as a function")}function h(w,_){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:w}function f(w,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);w.prototype=Object.create(_&&_.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(w,_):w.__proto__=_)}var m=function(w){f(_,w);function _(){return d(this,_),h(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return o(_,[{key:"insertInto",value:function(g,p){g.children.length===0?s(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"insertInto",this).call(this,g,p):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),_}(l.default.Embed);m.blotName="break",m.tagName="BR",r.default=m},function(n,r,i){var o=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,m){f.__proto__=m}||function(f,m){for(var w in m)m.hasOwnProperty(w)&&(f[w]=m[w])};return function(f,m){h(f,m);function w(){this.constructor=f}f.prototype=m===null?Object.create(m):(w.prototype=m.prototype,new w)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(44),a=i(30),l=i(1),c=function(h){o(f,h);function f(m){var w=h.call(this,m)||this;return w.build(),w}return f.prototype.appendChild=function(m){this.insertBefore(m)},f.prototype.attach=function(){h.prototype.attach.call(this),this.children.forEach(function(m){m.attach()})},f.prototype.build=function(){var m=this;this.children=new s.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(w){try{var _=d(w);m.insertBefore(_,m.children.head||void 0)}catch(E){if(E instanceof l.ParchmentError)return;throw E}})},f.prototype.deleteAt=function(m,w){if(m===0&&w===this.length())return this.remove();this.children.forEachAt(m,w,function(_,E,g){_.deleteAt(E,g)})},f.prototype.descendant=function(m,w){var _=this.children.find(w),E=_[0],g=_[1];return m.blotName==null&&m(E)||m.blotName!=null&&E instanceof m?[E,g]:E instanceof f?E.descendant(m,g):[null,-1]},f.prototype.descendants=function(m,w,_){w===void 0&&(w=0),_===void 0&&(_=Number.MAX_VALUE);var E=[],g=_;return this.children.forEachAt(w,_,function(p,v,y){(m.blotName==null&&m(p)||m.blotName!=null&&p instanceof m)&&E.push(p),p instanceof f&&(E=E.concat(p.descendants(m,v,g))),g-=y}),E},f.prototype.detach=function(){this.children.forEach(function(m){m.detach()}),h.prototype.detach.call(this)},f.prototype.formatAt=function(m,w,_,E){this.children.forEachAt(m,w,function(g,p,v){g.formatAt(p,v,_,E)})},f.prototype.insertAt=function(m,w,_){var E=this.children.find(m),g=E[0],p=E[1];if(g)g.insertAt(p,w,_);else{var v=_==null?l.create("text",w):l.create(w,_);this.appendChild(v)}},f.prototype.insertBefore=function(m,w){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(_){return m instanceof _}))throw new l.ParchmentError("Cannot insert "+m.statics.blotName+" into "+this.statics.blotName);m.insertInto(this,w)},f.prototype.length=function(){return this.children.reduce(function(m,w){return m+w.length()},0)},f.prototype.moveChildren=function(m,w){this.children.forEach(function(_){m.insertBefore(_,w)})},f.prototype.optimize=function(m){if(h.prototype.optimize.call(this,m),this.children.length===0)if(this.statics.defaultChild!=null){var w=l.create(this.statics.defaultChild);this.appendChild(w),w.optimize(m)}else this.remove()},f.prototype.path=function(m,w){w===void 0&&(w=!1);var _=this.children.find(m,w),E=_[0],g=_[1],p=[[this,m]];return E instanceof f?p.concat(E.path(g,w)):(E!=null&&p.push([E,g]),p)},f.prototype.removeChild=function(m){this.children.remove(m)},f.prototype.replace=function(m){m instanceof f&&m.moveChildren(this),h.prototype.replace.call(this,m)},f.prototype.split=function(m,w){if(w===void 0&&(w=!1),!w){if(m===0)return this;if(m===this.length())return this.next}var _=this.clone();return this.parent.insertBefore(_,this.next),this.children.forEachAt(m,this.length(),function(E,g,p){E=E.split(g,w),_.appendChild(E)}),_},f.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},f.prototype.update=function(m,w){var _=this,E=[],g=[];m.forEach(function(p){p.target===_.domNode&&p.type==="childList"&&(E.push.apply(E,p.addedNodes),g.push.apply(g,p.removedNodes))}),g.forEach(function(p){if(!(p.parentNode!=null&&p.tagName!=="IFRAME"&&document.body.compareDocumentPosition(p)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var v=l.find(p);v!=null&&(v.domNode.parentNode==null||v.domNode.parentNode===_.domNode)&&v.detach()}}),E.filter(function(p){return p.parentNode==_.domNode}).sort(function(p,v){return p===v?0:p.compareDocumentPosition(v)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(p){var v=null;p.nextSibling!=null&&(v=l.find(p.nextSibling));var y=d(p);(y.next!=v||y.next==null)&&(y.parent!=null&&y.parent.removeChild(_),_.insertBefore(y,v||void 0))})},f}(a.default);function d(h){var f=l.find(h);if(f==null)try{f=l.create(h)}catch{f=l.create(l.Scope.INLINE),[].slice.call(h.childNodes).forEach(function(w){f.domNode.appendChild(w)}),h.parentNode&&h.parentNode.replaceChild(f.domNode,h),f.attach()}return f}r.default=c},function(n,r,i){var o=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,m){f.__proto__=m}||function(f,m){for(var w in m)m.hasOwnProperty(w)&&(f[w]=m[w])};return function(f,m){h(f,m);function w(){this.constructor=f}f.prototype=m===null?Object.create(m):(w.prototype=m.prototype,new w)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(12),a=i(31),l=i(17),c=i(1),d=function(h){o(f,h);function f(m){var w=h.call(this,m)||this;return w.attributes=new a.default(w.domNode),w}return f.formats=function(m){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return m.tagName.toLowerCase()},f.prototype.format=function(m,w){var _=c.query(m);_ instanceof s.default?this.attributes.attribute(_,w):w&&_!=null&&(m!==this.statics.blotName||this.formats()[m]!==w)&&this.replaceWith(m,w)},f.prototype.formats=function(){var m=this.attributes.values(),w=this.statics.formats(this.domNode);return w!=null&&(m[this.statics.blotName]=w),m},f.prototype.replaceWith=function(m,w){var _=h.prototype.replaceWith.call(this,m,w);return this.attributes.copy(_),_},f.prototype.update=function(m,w){var _=this;h.prototype.update.call(this,m,w),m.some(function(E){return E.target===_.domNode&&E.type==="attributes"})&&this.attributes.build()},f.prototype.wrap=function(m,w){var _=h.prototype.wrap.call(this,m,w);return _ instanceof f&&_.statics.scope===this.statics.scope&&this.attributes.move(_),_},f}(l.default);r.default=d},function(n,r,i){var o=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,h){d.__proto__=h}||function(d,h){for(var f in h)h.hasOwnProperty(f)&&(d[f]=h[f])};return function(d,h){c(d,h);function f(){this.constructor=d}d.prototype=h===null?Object.create(h):(f.prototype=h.prototype,new f)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(30),a=i(1),l=function(c){o(d,c);function d(){return c!==null&&c.apply(this,arguments)||this}return d.value=function(h){return!0},d.prototype.index=function(h,f){return this.domNode===h||this.domNode.compareDocumentPosition(h)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(f,1):-1},d.prototype.position=function(h,f){var m=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return h>0&&(m+=1),[this.parent.domNode,m]},d.prototype.value=function(){var h;return h={},h[this.statics.blotName]=this.statics.value(this.domNode)||!0,h},d.scope=a.Scope.INLINE_BLOT,d}(s.default);r.default=l},function(n,r,i){var o=i(11),s=i(3),a={attributes:{compose:function(c,d,h){typeof c!="object"&&(c={}),typeof d!="object"&&(d={});var f=s(!0,{},d);h||(f=Object.keys(f).reduce(function(w,_){return f[_]!=null&&(w[_]=f[_]),w},{}));for(var m in c)c[m]!==void 0&&d[m]===void 0&&(f[m]=c[m]);return Object.keys(f).length>0?f:void 0},diff:function(c,d){typeof c!="object"&&(c={}),typeof d!="object"&&(d={});var h=Object.keys(c).concat(Object.keys(d)).reduce(function(f,m){return o(c[m],d[m])||(f[m]=d[m]===void 0?null:d[m]),f},{});return Object.keys(h).length>0?h:void 0},transform:function(c,d,h){if(typeof c!="object")return d;if(typeof d=="object"){if(!h)return d;var f=Object.keys(d).reduce(function(m,w){return c[w]===void 0&&(m[w]=d[w]),m},{});return Object.keys(f).length>0?f:void 0}}},iterator:function(c){return new l(c)},length:function(c){return typeof c.delete=="number"?c.delete:typeof c.retain=="number"?c.retain:typeof c.insert=="string"?c.insert.length:1}};function l(c){this.ops=c,this.index=0,this.offset=0}l.prototype.hasNext=function(){return this.peekLength()<1/0},l.prototype.next=function(c){c||(c=1/0);var d=this.ops[this.index];if(d){var h=this.offset,f=a.length(d);if(c>=f-h?(c=f-h,this.index+=1,this.offset=0):this.offset+=c,typeof d.delete=="number")return{delete:c};var m={};return d.attributes&&(m.attributes=d.attributes),typeof d.retain=="number"?m.retain=c:typeof d.insert=="string"?m.insert=d.insert.substr(h,c):m.insert=d.insert,m}else return{retain:1/0}},l.prototype.peek=function(){return this.ops[this.index]},l.prototype.peekLength=function(){return this.ops[this.index]?a.length(this.ops[this.index])-this.offset:1/0},l.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},l.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var c=this.offset,d=this.index,h=this.next(),f=this.ops.slice(this.index);return this.offset=c,this.index=d,[h].concat(f)}else return[]},n.exports=a},function(n,r){var i=function(){function o(_,E){return E!=null&&_ instanceof E}var s;try{s=Map}catch{s=function(){}}var a;try{a=Set}catch{a=function(){}}var l;try{l=Promise}catch{l=function(){}}function c(_,E,g,p,v){typeof E=="object"&&(g=E.depth,p=E.prototype,v=E.includeNonEnumerable,E=E.circular);var y=[],k=[],N=typeof Buffer<"u";typeof E>"u"&&(E=!0),typeof g>"u"&&(g=1/0);function S(T,P){if(T===null)return null;if(P===0)return T;var b,I;if(typeof T!="object")return T;if(o(T,s))b=new s;else if(o(T,a))b=new a;else if(o(T,l))b=new l(function(V,C){T.then(function(M){V(S(M,P-1))},function(M){C(S(M,P-1))})});else if(c.__isArray(T))b=[];else if(c.__isRegExp(T))b=new RegExp(T.source,w(T)),T.lastIndex&&(b.lastIndex=T.lastIndex);else if(c.__isDate(T))b=new Date(T.getTime());else{if(N&&Buffer.isBuffer(T))return Buffer.allocUnsafe?b=Buffer.allocUnsafe(T.length):b=new Buffer(T.length),T.copy(b),b;o(T,Error)?b=Object.create(T):typeof p>"u"?(I=Object.getPrototypeOf(T),b=Object.create(I)):(b=Object.create(p),I=p)}if(E){var x=y.indexOf(T);if(x!=-1)return k[x];y.push(T),k.push(b)}o(T,s)&&T.forEach(function(V,C){var M=S(C,P-1),U=S(V,P-1);b.set(M,U)}),o(T,a)&&T.forEach(function(V){var C=S(V,P-1);b.add(C)});for(var O in T){var L;I&&(L=Object.getOwnPropertyDescriptor(I,O)),!(L&&L.set==null)&&(b[O]=S(T[O],P-1))}if(Object.getOwnPropertySymbols)for(var B=Object.getOwnPropertySymbols(T),O=0;O<B.length;O++){var H=B[O],W=Object.getOwnPropertyDescriptor(T,H);W&&!W.enumerable&&!v||(b[H]=S(T[H],P-1),W.enumerable||Object.defineProperty(b,H,{enumerable:!1}))}if(v)for(var G=Object.getOwnPropertyNames(T),O=0;O<G.length;O++){var q=G[O],W=Object.getOwnPropertyDescriptor(T,q);W&&W.enumerable||(b[q]=S(T[q],P-1),Object.defineProperty(b,q,{enumerable:!1}))}return b}return S(_,g)}c.clonePrototype=function(E){if(E===null)return null;var g=function(){};return g.prototype=E,new g};function d(_){return Object.prototype.toString.call(_)}c.__objToStr=d;function h(_){return typeof _=="object"&&d(_)==="[object Date]"}c.__isDate=h;function f(_){return typeof _=="object"&&d(_)==="[object Array]"}c.__isArray=f;function m(_){return typeof _=="object"&&d(_)==="[object RegExp]"}c.__isRegExp=m;function w(_){var E="";return _.global&&(E+="g"),_.ignoreCase&&(E+="i"),_.multiline&&(E+="m"),E}return c.__getRegExpFlags=w,c}();typeof n=="object"&&n.exports&&(n.exports=i)},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function b(I,x){var O=[],L=!0,B=!1,H=void 0;try{for(var W=I[Symbol.iterator](),G;!(L=(G=W.next()).done)&&(O.push(G.value),!(x&&O.length===x));L=!0);}catch(q){B=!0,H=q}finally{try{!L&&W.return&&W.return()}finally{if(B)throw H}}return O}return function(I,x){if(Array.isArray(I))return I;if(Symbol.iterator in Object(I))return b(I,x);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function b(I,x){for(var O=0;O<x.length;O++){var L=x[O];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(I,L.key,L)}}return function(I,x,O){return x&&b(I.prototype,x),O&&b(I,O),I}}(),a=function b(I,x,O){I===null&&(I=Function.prototype);var L=Object.getOwnPropertyDescriptor(I,x);if(L===void 0){var B=Object.getPrototypeOf(I);return B===null?void 0:b(B,x,O)}else{if("value"in L)return L.value;var H=L.get;return H===void 0?void 0:H.call(O)}},l=i(0),c=y(l),d=i(8),h=y(d),f=i(4),m=y(f),w=i(16),_=y(w),E=i(13),g=y(E),p=i(25),v=y(p);function y(b){return b&&b.__esModule?b:{default:b}}function k(b,I){if(!(b instanceof I))throw new TypeError("Cannot call a class as a function")}function N(b,I){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I&&(typeof I=="object"||typeof I=="function")?I:b}function S(b,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof I);b.prototype=Object.create(I&&I.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(b,I):b.__proto__=I)}function T(b){return b instanceof m.default||b instanceof f.BlockEmbed}var P=function(b){S(I,b);function I(x,O){k(this,I);var L=N(this,(I.__proto__||Object.getPrototypeOf(I)).call(this,x));return L.emitter=O.emitter,Array.isArray(O.whitelist)&&(L.whitelist=O.whitelist.reduce(function(B,H){return B[H]=!0,B},{})),L.domNode.addEventListener("DOMNodeInserted",function(){}),L.optimize(),L.enable(),L}return s(I,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(O,L){var B=this.line(O),H=o(B,2),W=H[0],G=H[1],q=this.line(O+L),V=o(q,1),C=V[0];if(a(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"deleteAt",this).call(this,O,L),C!=null&&W!==C&&G>0){if(W instanceof f.BlockEmbed||C instanceof f.BlockEmbed){this.optimize();return}if(W instanceof g.default){var M=W.newlineIndex(W.length(),!0);if(M>-1&&(W=W.split(M+1),W===C)){this.optimize();return}}else if(C instanceof g.default){var U=C.newlineIndex(0);U>-1&&C.split(U+1)}var K=C.children.head instanceof _.default?null:C.children.head;W.moveChildren(C,K),W.remove()}this.optimize()}},{key:"enable",value:function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",O)}},{key:"formatAt",value:function(O,L,B,H){this.whitelist!=null&&!this.whitelist[B]||(a(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"formatAt",this).call(this,O,L,B,H),this.optimize())}},{key:"insertAt",value:function(O,L,B){if(!(B!=null&&this.whitelist!=null&&!this.whitelist[L])){if(O>=this.length())if(B==null||c.default.query(L,c.default.Scope.BLOCK)==null){var H=c.default.create(this.statics.defaultChild);this.appendChild(H),B==null&&L.endsWith(`
`)&&(L=L.slice(0,-1)),H.insertAt(0,L,B)}else{var W=c.default.create(L,B);this.appendChild(W)}else a(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"insertAt",this).call(this,O,L,B);this.optimize()}}},{key:"insertBefore",value:function(O,L){if(O.statics.scope===c.default.Scope.INLINE_BLOT){var B=c.default.create(this.statics.defaultChild);B.appendChild(O),O=B}a(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"insertBefore",this).call(this,O,L)}},{key:"leaf",value:function(O){return this.path(O).pop()||[null,-1]}},{key:"line",value:function(O){return O===this.length()?this.line(O-1):this.descendant(T,O)}},{key:"lines",value:function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,B=function H(W,G,q){var V=[],C=q;return W.children.forEachAt(G,q,function(M,U,K){T(M)?V.push(M):M instanceof c.default.Container&&(V=V.concat(H(M,U,C))),C-=K}),V};return B(this,O,L)}},{key:"optimize",value:function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(a(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"optimize",this).call(this,O,L),O.length>0&&this.emitter.emit(h.default.events.SCROLL_OPTIMIZE,O,L))}},{key:"path",value:function(O){return a(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"path",this).call(this,O).slice(1)}},{key:"update",value:function(O){if(this.batch!==!0){var L=h.default.sources.USER;typeof O=="string"&&(L=O),Array.isArray(O)||(O=this.observer.takeRecords()),O.length>0&&this.emitter.emit(h.default.events.SCROLL_BEFORE_UPDATE,L,O),a(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"update",this).call(this,O.concat([])),O.length>0&&this.emitter.emit(h.default.events.SCROLL_UPDATE,L,O)}}}]),I}(c.default.Scroll);P.blotName="scroll",P.className="ql-editor",P.tagName="DIV",P.defaultChild="block",P.allowedChildren=[m.default,f.BlockEmbed,v.default],r.default=P},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.SHORTKEY=r.default=void 0;var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},s=function(){function j($,Y){var X=[],ne=!0,Z=!1,ue=void 0;try{for(var me=$[Symbol.iterator](),we;!(ne=(we=me.next()).done)&&(X.push(we.value),!(Y&&X.length===Y));ne=!0);}catch(Se){Z=!0,ue=Se}finally{try{!ne&&me.return&&me.return()}finally{if(Z)throw ue}}return X}return function($,Y){if(Array.isArray($))return $;if(Symbol.iterator in Object($))return j($,Y);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function j($,Y){for(var X=0;X<Y.length;X++){var ne=Y[X];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty($,ne.key,ne)}}return function($,Y,X){return Y&&j($.prototype,Y),X&&j($,X),$}}(),l=i(21),c=b(l),d=i(11),h=b(d),f=i(3),m=b(f),w=i(2),_=b(w),E=i(20),g=b(E),p=i(0),v=b(p),y=i(5),k=b(y),N=i(10),S=b(N),T=i(9),P=b(T);function b(j){return j&&j.__esModule?j:{default:j}}function I(j,$,Y){return $ in j?Object.defineProperty(j,$,{value:Y,enumerable:!0,configurable:!0,writable:!0}):j[$]=Y,j}function x(j,$){if(!(j instanceof $))throw new TypeError("Cannot call a class as a function")}function O(j,$){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $&&(typeof $=="object"||typeof $=="function")?$:j}function L(j,$){if(typeof $!="function"&&$!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof $);j.prototype=Object.create($&&$.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),$&&(Object.setPrototypeOf?Object.setPrototypeOf(j,$):j.__proto__=$)}var B=(0,S.default)("quill:keyboard"),H=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",W=function(j){L($,j),a($,null,[{key:"match",value:function(X,ne){return ne=z(ne),["altKey","ctrlKey","metaKey","shiftKey"].some(function(Z){return!!ne[Z]!==X[Z]&&ne[Z]!==null})?!1:ne.key===(X.which||X.keyCode)}}]);function $(Y,X){x(this,$);var ne=O(this,($.__proto__||Object.getPrototypeOf($)).call(this,Y,X));return ne.bindings={},Object.keys(ne.options.bindings).forEach(function(Z){Z==="list autofill"&&Y.scroll.whitelist!=null&&!Y.scroll.whitelist.list||ne.options.bindings[Z]&&ne.addBinding(ne.options.bindings[Z])}),ne.addBinding({key:$.keys.ENTER,shiftKey:null},M),ne.addBinding({key:$.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(ne.addBinding({key:$.keys.BACKSPACE},{collapsed:!0},q),ne.addBinding({key:$.keys.DELETE},{collapsed:!0},V)):(ne.addBinding({key:$.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},q),ne.addBinding({key:$.keys.DELETE},{collapsed:!0,suffix:/^.?$/},V)),ne.addBinding({key:$.keys.BACKSPACE},{collapsed:!1},C),ne.addBinding({key:$.keys.DELETE},{collapsed:!1},C),ne.addBinding({key:$.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},q),ne.listen(),ne}return a($,[{key:"addBinding",value:function(X){var ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ue=z(X);if(ue==null||ue.key==null)return B.warn("Attempted to add invalid keyboard binding",ue);typeof ne=="function"&&(ne={handler:ne}),typeof Z=="function"&&(Z={handler:Z}),ue=(0,m.default)(ue,ne,Z),this.bindings[ue.key]=this.bindings[ue.key]||[],this.bindings[ue.key].push(ue)}},{key:"listen",value:function(){var X=this;this.quill.root.addEventListener("keydown",function(ne){if(!ne.defaultPrevented){var Z=ne.which||ne.keyCode,ue=(X.bindings[Z]||[]).filter(function(Ke){return $.match(ne,Ke)});if(ue.length!==0){var me=X.quill.getSelection();if(!(me==null||!X.quill.hasFocus())){var we=X.quill.getLine(me.index),Se=s(we,2),mt=Se[0],nt=Se[1],ee=X.quill.getLeaf(me.index),te=s(ee,2),le=te[0],ce=te[1],ie=me.length===0?[le,ce]:X.quill.getLeaf(me.index+me.length),Te=s(ie,2),be=Te[0],Ie=Te[1],Ce=le instanceof v.default.Text?le.value().slice(0,ce):"",Ue=be instanceof v.default.Text?be.value().slice(Ie):"",Me={collapsed:me.length===0,empty:me.length===0&&mt.length()<=1,format:X.quill.getFormat(me),offset:nt,prefix:Ce,suffix:Ue},Ta=ue.some(function(Ke){if(Ke.collapsed!=null&&Ke.collapsed!==Me.collapsed||Ke.empty!=null&&Ke.empty!==Me.empty||Ke.offset!=null&&Ke.offset!==Me.offset)return!1;if(Array.isArray(Ke.format)){if(Ke.format.every(function(Tn){return Me.format[Tn]==null}))return!1}else if(o(Ke.format)==="object"&&!Object.keys(Ke.format).every(function(Tn){return Ke.format[Tn]===!0?Me.format[Tn]!=null:Ke.format[Tn]===!1?Me.format[Tn]==null:(0,h.default)(Ke.format[Tn],Me.format[Tn])}))return!1;return Ke.prefix!=null&&!Ke.prefix.test(Me.prefix)||Ke.suffix!=null&&!Ke.suffix.test(Me.suffix)?!1:Ke.handler.call(X,me,Me)!==!0});Ta&&ne.preventDefault()}}}})}}]),$}(P.default);W.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},W.DEFAULTS={bindings:{bold:K("bold"),italic:K("italic"),underline:K("underline"),indent:{key:W.keys.TAB,format:["blockquote","indent","list"],handler:function($,Y){if(Y.collapsed&&Y.offset!==0)return!0;this.quill.format("indent","+1",k.default.sources.USER)}},outdent:{key:W.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function($,Y){if(Y.collapsed&&Y.offset!==0)return!0;this.quill.format("indent","-1",k.default.sources.USER)}},"outdent backspace":{key:W.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function($,Y){Y.format.indent!=null?this.quill.format("indent","-1",k.default.sources.USER):Y.format.list!=null&&this.quill.format("list",!1,k.default.sources.USER)}},"indent code-block":U(!0),"outdent code-block":U(!1),"remove tab":{key:W.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function($){this.quill.deleteText($.index-1,1,k.default.sources.USER)}},tab:{key:W.keys.TAB,handler:function($){this.quill.history.cutoff();var Y=new _.default().retain($.index).delete($.length).insert("	");this.quill.updateContents(Y,k.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection($.index+1,k.default.sources.SILENT)}},"list empty enter":{key:W.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function($,Y){this.quill.format("list",!1,k.default.sources.USER),Y.format.indent&&this.quill.format("indent",!1,k.default.sources.USER)}},"checklist enter":{key:W.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function($){var Y=this.quill.getLine($.index),X=s(Y,2),ne=X[0],Z=X[1],ue=(0,m.default)({},ne.formats(),{list:"checked"}),me=new _.default().retain($.index).insert(`
`,ue).retain(ne.length()-Z-1).retain(1,{list:"unchecked"});this.quill.updateContents(me,k.default.sources.USER),this.quill.setSelection($.index+1,k.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:W.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function($,Y){var X=this.quill.getLine($.index),ne=s(X,2),Z=ne[0],ue=ne[1],me=new _.default().retain($.index).insert(`
`,Y.format).retain(Z.length()-ue-1).retain(1,{header:null});this.quill.updateContents(me,k.default.sources.USER),this.quill.setSelection($.index+1,k.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function($,Y){var X=Y.prefix.length,ne=this.quill.getLine($.index),Z=s(ne,2),ue=Z[0],me=Z[1];if(me>X)return!0;var we=void 0;switch(Y.prefix.trim()){case"[]":case"[ ]":we="unchecked";break;case"[x]":we="checked";break;case"-":case"*":we="bullet";break;default:we="ordered"}this.quill.insertText($.index," ",k.default.sources.USER),this.quill.history.cutoff();var Se=new _.default().retain($.index-me).delete(X+1).retain(ue.length()-2-me).retain(1,{list:we});this.quill.updateContents(Se,k.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection($.index-X,k.default.sources.SILENT)}},"code exit":{key:W.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function($){var Y=this.quill.getLine($.index),X=s(Y,2),ne=X[0],Z=X[1],ue=new _.default().retain($.index+ne.length()-Z-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(ue,k.default.sources.USER)}},"embed left":G(W.keys.LEFT,!1),"embed left shift":G(W.keys.LEFT,!0),"embed right":G(W.keys.RIGHT,!1),"embed right shift":G(W.keys.RIGHT,!0)}};function G(j,$){var Y,X=j===W.keys.LEFT?"prefix":"suffix";return Y={key:j,shiftKey:$,altKey:null},I(Y,X,/^$/),I(Y,"handler",function(Z){var ue=Z.index;j===W.keys.RIGHT&&(ue+=Z.length+1);var me=this.quill.getLeaf(ue),we=s(me,1),Se=we[0];return Se instanceof v.default.Embed?(j===W.keys.LEFT?$?this.quill.setSelection(Z.index-1,Z.length+1,k.default.sources.USER):this.quill.setSelection(Z.index-1,k.default.sources.USER):$?this.quill.setSelection(Z.index,Z.length+1,k.default.sources.USER):this.quill.setSelection(Z.index+Z.length+1,k.default.sources.USER),!1):!0}),Y}function q(j,$){if(!(j.index===0||this.quill.getLength()<=1)){var Y=this.quill.getLine(j.index),X=s(Y,1),ne=X[0],Z={};if($.offset===0){var ue=this.quill.getLine(j.index-1),me=s(ue,1),we=me[0];if(we!=null&&we.length()>1){var Se=ne.formats(),mt=this.quill.getFormat(j.index-1,1);Z=g.default.attributes.diff(Se,mt)||{}}}var nt=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test($.prefix)?2:1;this.quill.deleteText(j.index-nt,nt,k.default.sources.USER),Object.keys(Z).length>0&&this.quill.formatLine(j.index-nt,nt,Z,k.default.sources.USER),this.quill.focus()}}function V(j,$){var Y=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test($.suffix)?2:1;if(!(j.index>=this.quill.getLength()-Y)){var X={},ne=0,Z=this.quill.getLine(j.index),ue=s(Z,1),me=ue[0];if($.offset>=me.length()-1){var we=this.quill.getLine(j.index+1),Se=s(we,1),mt=Se[0];if(mt){var nt=me.formats(),ee=this.quill.getFormat(j.index,1);X=g.default.attributes.diff(nt,ee)||{},ne=mt.length()}}this.quill.deleteText(j.index,Y,k.default.sources.USER),Object.keys(X).length>0&&this.quill.formatLine(j.index+ne-1,Y,X,k.default.sources.USER)}}function C(j){var $=this.quill.getLines(j),Y={};if($.length>1){var X=$[0].formats(),ne=$[$.length-1].formats();Y=g.default.attributes.diff(ne,X)||{}}this.quill.deleteText(j,k.default.sources.USER),Object.keys(Y).length>0&&this.quill.formatLine(j.index,1,Y,k.default.sources.USER),this.quill.setSelection(j.index,k.default.sources.SILENT),this.quill.focus()}function M(j,$){var Y=this;j.length>0&&this.quill.scroll.deleteAt(j.index,j.length);var X=Object.keys($.format).reduce(function(ne,Z){return v.default.query(Z,v.default.Scope.BLOCK)&&!Array.isArray($.format[Z])&&(ne[Z]=$.format[Z]),ne},{});this.quill.insertText(j.index,`
`,X,k.default.sources.USER),this.quill.setSelection(j.index+1,k.default.sources.SILENT),this.quill.focus(),Object.keys($.format).forEach(function(ne){X[ne]==null&&(Array.isArray($.format[ne])||ne!=="link"&&Y.quill.format(ne,$.format[ne],k.default.sources.USER))})}function U(j){return{key:W.keys.TAB,shiftKey:!j,format:{"code-block":!0},handler:function(Y){var X=v.default.query("code-block"),ne=Y.index,Z=Y.length,ue=this.quill.scroll.descendant(X,ne),me=s(ue,2),we=me[0],Se=me[1];if(we!=null){var mt=this.quill.getIndex(we),nt=we.newlineIndex(Se,!0)+1,ee=we.newlineIndex(mt+Se+Z),te=we.domNode.textContent.slice(nt,ee).split(`
`);Se=0,te.forEach(function(le,ce){j?(we.insertAt(nt+Se,X.TAB),Se+=X.TAB.length,ce===0?ne+=X.TAB.length:Z+=X.TAB.length):le.startsWith(X.TAB)&&(we.deleteAt(nt+Se,X.TAB.length),Se-=X.TAB.length,ce===0?ne-=X.TAB.length:Z-=X.TAB.length),Se+=le.length+1}),this.quill.update(k.default.sources.USER),this.quill.setSelection(ne,Z,k.default.sources.SILENT)}}}}function K(j){return{key:j[0].toUpperCase(),shortKey:!0,handler:function(Y,X){this.quill.format(j,!X.format[j],k.default.sources.USER)}}}function z(j){if(typeof j=="string"||typeof j=="number")return z({key:j});if((typeof j>"u"?"undefined":o(j))==="object"&&(j=(0,c.default)(j,!1)),typeof j.key=="string")if(W.keys[j.key.toUpperCase()]!=null)j.key=W.keys[j.key.toUpperCase()];else if(j.key.length===1)j.key=j.key.toUpperCase().charCodeAt(0);else return null;return j.shortKey&&(j[H]=j.shortKey,delete j.shortKey),j}r.default=W,r.SHORTKEY=H},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function g(p,v){var y=[],k=!0,N=!1,S=void 0;try{for(var T=p[Symbol.iterator](),P;!(k=(P=T.next()).done)&&(y.push(P.value),!(v&&y.length===v));k=!0);}catch(b){N=!0,S=b}finally{try{!k&&T.return&&T.return()}finally{if(N)throw S}}return y}return function(p,v){if(Array.isArray(p))return p;if(Symbol.iterator in Object(p))return g(p,v);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function g(p,v,y){p===null&&(p=Function.prototype);var k=Object.getOwnPropertyDescriptor(p,v);if(k===void 0){var N=Object.getPrototypeOf(p);return N===null?void 0:g(N,v,y)}else{if("value"in k)return k.value;var S=k.get;return S===void 0?void 0:S.call(y)}},a=function(){function g(p,v){for(var y=0;y<v.length;y++){var k=v[y];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(p,k.key,k)}}return function(p,v,y){return v&&g(p.prototype,v),y&&g(p,y),p}}(),l=i(0),c=f(l),d=i(7),h=f(d);function f(g){return g&&g.__esModule?g:{default:g}}function m(g,p){if(!(g instanceof p))throw new TypeError("Cannot call a class as a function")}function w(g,p){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:g}function _(g,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);g.prototype=Object.create(p&&p.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(g,p):g.__proto__=p)}var E=function(g){_(p,g),a(p,null,[{key:"value",value:function(){}}]);function p(v,y){m(this,p);var k=w(this,(p.__proto__||Object.getPrototypeOf(p)).call(this,v));return k.selection=y,k.textNode=document.createTextNode(p.CONTENTS),k.domNode.appendChild(k.textNode),k._length=0,k}return a(p,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(y,k){if(this._length!==0)return s(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"format",this).call(this,y,k);for(var N=this,S=0;N!=null&&N.statics.scope!==c.default.Scope.BLOCK_BLOT;)S+=N.offset(N.parent),N=N.parent;N!=null&&(this._length=p.CONTENTS.length,N.optimize(),N.formatAt(S,p.CONTENTS.length,y,k),this._length=0)}},{key:"index",value:function(y,k){return y===this.textNode?0:s(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"index",this).call(this,y,k)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){s(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var y=this.textNode,k=this.selection.getNativeRange(),N=void 0,S=void 0,T=void 0;if(k!=null&&k.start.node===y&&k.end.node===y){var P=[y,k.start.offset,k.end.offset];N=P[0],S=P[1],T=P[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==p.CONTENTS){var b=this.textNode.data.split(p.CONTENTS).join("");this.next instanceof h.default?(N=this.next.domNode,this.next.insertAt(0,b),this.textNode.data=p.CONTENTS):(this.textNode.data=b,this.parent.insertBefore(c.default.create(this.textNode),this),this.textNode=document.createTextNode(p.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),S!=null){var I=[S,T].map(function(O){return Math.max(0,Math.min(N.data.length,O-1))}),x=o(I,2);return S=x[0],T=x[1],{startNode:N,startOffset:S,endNode:N,endOffset:T}}}}},{key:"update",value:function(y,k){var N=this;if(y.some(function(T){return T.type==="characterData"&&T.target===N.textNode})){var S=this.restore();S&&(k.range=S)}}},{key:"value",value:function(){return""}}]),p}(c.default.Embed);E.blotName="cursor",E.className="ql-cursor",E.tagName="span",E.CONTENTS="\uFEFF",r.default=E},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(0),s=c(o),a=i(4),l=c(a);function c(w){return w&&w.__esModule?w:{default:w}}function d(w,_){if(!(w instanceof _))throw new TypeError("Cannot call a class as a function")}function h(w,_){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:w}function f(w,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);w.prototype=Object.create(_&&_.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(w,_):w.__proto__=_)}var m=function(w){f(_,w);function _(){return d(this,_),h(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return _}(s.default.Container);m.allowedChildren=[l.default,a.BlockEmbed,m],r.default=m},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.ColorStyle=r.ColorClass=r.ColorAttributor=void 0;var o=function(){function E(g,p){for(var v=0;v<p.length;v++){var y=p[v];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(g,y.key,y)}}return function(g,p,v){return p&&E(g.prototype,p),v&&E(g,v),g}}(),s=function E(g,p,v){g===null&&(g=Function.prototype);var y=Object.getOwnPropertyDescriptor(g,p);if(y===void 0){var k=Object.getPrototypeOf(g);return k===null?void 0:E(k,p,v)}else{if("value"in y)return y.value;var N=y.get;return N===void 0?void 0:N.call(v)}},a=i(0),l=c(a);function c(E){return E&&E.__esModule?E:{default:E}}function d(E,g){if(!(E instanceof g))throw new TypeError("Cannot call a class as a function")}function h(E,g){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:E}function f(E,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);E.prototype=Object.create(g&&g.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(E,g):E.__proto__=g)}var m=function(E){f(g,E);function g(){return d(this,g),h(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return o(g,[{key:"value",value:function(v){var y=s(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"value",this).call(this,v);return y.startsWith("rgb(")?(y=y.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+y.split(",").map(function(k){return("00"+parseInt(k).toString(16)).slice(-2)}).join("")):y}}]),g}(l.default.Attributor.Style),w=new l.default.Attributor.Class("color","ql-color",{scope:l.default.Scope.INLINE}),_=new m("color","color",{scope:l.default.Scope.INLINE});r.ColorAttributor=m,r.ColorClass=w,r.ColorStyle=_},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.sanitize=r.default=void 0;var o=function(){function _(E,g){for(var p=0;p<g.length;p++){var v=g[p];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(E,v.key,v)}}return function(E,g,p){return g&&_(E.prototype,g),p&&_(E,p),E}}(),s=function _(E,g,p){E===null&&(E=Function.prototype);var v=Object.getOwnPropertyDescriptor(E,g);if(v===void 0){var y=Object.getPrototypeOf(E);return y===null?void 0:_(y,g,p)}else{if("value"in v)return v.value;var k=v.get;return k===void 0?void 0:k.call(p)}},a=i(6),l=c(a);function c(_){return _&&_.__esModule?_:{default:_}}function d(_,E){if(!(_ instanceof E))throw new TypeError("Cannot call a class as a function")}function h(_,E){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:_}function f(_,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);_.prototype=Object.create(E&&E.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(_,E):_.__proto__=E)}var m=function(_){f(E,_);function E(){return d(this,E),h(this,(E.__proto__||Object.getPrototypeOf(E)).apply(this,arguments))}return o(E,[{key:"format",value:function(p,v){if(p!==this.statics.blotName||!v)return s(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"format",this).call(this,p,v);v=this.constructor.sanitize(v),this.domNode.setAttribute("href",v)}}],[{key:"create",value:function(p){var v=s(E.__proto__||Object.getPrototypeOf(E),"create",this).call(this,p);return p=this.sanitize(p),v.setAttribute("href",p),v.setAttribute("rel","noopener noreferrer"),v.setAttribute("target","_blank"),v}},{key:"formats",value:function(p){return p.getAttribute("href")}},{key:"sanitize",value:function(p){return w(p,this.PROTOCOL_WHITELIST)?p:this.SANITIZED_URL}}]),E}(l.default);m.blotName="link",m.tagName="A",m.SANITIZED_URL="about:blank",m.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function w(_,E){var g=document.createElement("a");g.href=_;var p=g.href.slice(0,g.href.indexOf(":"));return E.indexOf(p)>-1}r.default=m,r.sanitize=w},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E},s=function(){function E(g,p){for(var v=0;v<p.length;v++){var y=p[v];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(g,y.key,y)}}return function(g,p,v){return p&&E(g.prototype,p),v&&E(g,v),g}}(),a=i(23),l=h(a),c=i(107),d=h(c);function h(E){return E&&E.__esModule?E:{default:E}}function f(E,g){if(!(E instanceof g))throw new TypeError("Cannot call a class as a function")}var m=0;function w(E,g){E.setAttribute(g,E.getAttribute(g)!=="true")}var _=function(){function E(g){var p=this;f(this,E),this.select=g,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){p.togglePicker()}),this.label.addEventListener("keydown",function(v){switch(v.keyCode){case l.default.keys.ENTER:p.togglePicker();break;case l.default.keys.ESCAPE:p.escape(),v.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return s(E,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),w(this.label,"aria-expanded"),w(this.options,"aria-hidden")}},{key:"buildItem",value:function(p){var v=this,y=document.createElement("span");return y.tabIndex="0",y.setAttribute("role","button"),y.classList.add("ql-picker-item"),p.hasAttribute("value")&&y.setAttribute("data-value",p.getAttribute("value")),p.textContent&&y.setAttribute("data-label",p.textContent),y.addEventListener("click",function(){v.selectItem(y,!0)}),y.addEventListener("keydown",function(k){switch(k.keyCode){case l.default.keys.ENTER:v.selectItem(y,!0),k.preventDefault();break;case l.default.keys.ESCAPE:v.escape(),k.preventDefault();break}}),y}},{key:"buildLabel",value:function(){var p=document.createElement("span");return p.classList.add("ql-picker-label"),p.innerHTML=d.default,p.tabIndex="0",p.setAttribute("role","button"),p.setAttribute("aria-expanded","false"),this.container.appendChild(p),p}},{key:"buildOptions",value:function(){var p=this,v=document.createElement("span");v.classList.add("ql-picker-options"),v.setAttribute("aria-hidden","true"),v.tabIndex="-1",v.id="ql-picker-options-"+m,m+=1,this.label.setAttribute("aria-controls",v.id),this.options=v,[].slice.call(this.select.options).forEach(function(y){var k=p.buildItem(y);v.appendChild(k),y.selected===!0&&p.selectItem(k)}),this.container.appendChild(v)}},{key:"buildPicker",value:function(){var p=this;[].slice.call(this.select.attributes).forEach(function(v){p.container.setAttribute(v.name,v.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var p=this;this.close(),setTimeout(function(){return p.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(p){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,y=this.container.querySelector(".ql-selected");if(p!==y&&(y!=null&&y.classList.remove("ql-selected"),p!=null&&(p.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(p.parentNode.children,p),p.hasAttribute("data-value")?this.label.setAttribute("data-value",p.getAttribute("data-value")):this.label.removeAttribute("data-value"),p.hasAttribute("data-label")?this.label.setAttribute("data-label",p.getAttribute("data-label")):this.label.removeAttribute("data-label"),v))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":o(Event))==="object"){var k=document.createEvent("Event");k.initEvent("change",!0,!0),this.select.dispatchEvent(k)}this.close()}}},{key:"update",value:function(){var p=void 0;if(this.select.selectedIndex>-1){var v=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];p=this.select.options[this.select.selectedIndex],this.selectItem(v)}else this.selectItem(null);var y=p!=null&&p!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",y)}}]),E}();r.default=_},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(0),s=B(o),a=i(5),l=B(a),c=i(4),d=B(c),h=i(16),f=B(h),m=i(25),w=B(m),_=i(24),E=B(_),g=i(35),p=B(g),v=i(6),y=B(v),k=i(22),N=B(k),S=i(7),T=B(S),P=i(55),b=B(P),I=i(42),x=B(I),O=i(23),L=B(O);function B(H){return H&&H.__esModule?H:{default:H}}l.default.register({"blots/block":d.default,"blots/block/embed":c.BlockEmbed,"blots/break":f.default,"blots/container":w.default,"blots/cursor":E.default,"blots/embed":p.default,"blots/inline":y.default,"blots/scroll":N.default,"blots/text":T.default,"modules/clipboard":b.default,"modules/history":x.default,"modules/keyboard":L.default}),s.default.register(d.default,f.default,E.default,y.default,N.default,T.default),r.default=l.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(1),s=function(){function a(l){this.domNode=l,this.domNode[o.DATA_KEY]={blot:this}}return Object.defineProperty(a.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),a.create=function(l){if(this.tagName==null)throw new o.ParchmentError("Blot definition missing tagName");var c;return Array.isArray(this.tagName)?(typeof l=="string"&&(l=l.toUpperCase(),parseInt(l).toString()===l&&(l=parseInt(l))),typeof l=="number"?c=document.createElement(this.tagName[l-1]):this.tagName.indexOf(l)>-1?c=document.createElement(l):c=document.createElement(this.tagName[0])):c=document.createElement(this.tagName),this.className&&c.classList.add(this.className),c},a.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},a.prototype.clone=function(){var l=this.domNode.cloneNode(!1);return o.create(l)},a.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[o.DATA_KEY]},a.prototype.deleteAt=function(l,c){var d=this.isolate(l,c);d.remove()},a.prototype.formatAt=function(l,c,d,h){var f=this.isolate(l,c);if(o.query(d,o.Scope.BLOT)!=null&&h)f.wrap(d,h);else if(o.query(d,o.Scope.ATTRIBUTE)!=null){var m=o.create(this.statics.scope);f.wrap(m),m.format(d,h)}},a.prototype.insertAt=function(l,c,d){var h=d==null?o.create("text",c):o.create(c,d),f=this.split(l);this.parent.insertBefore(h,f)},a.prototype.insertInto=function(l,c){c===void 0&&(c=null),this.parent!=null&&this.parent.children.remove(this);var d=null;l.children.insertBefore(this,c),c!=null&&(d=c.domNode),(this.domNode.parentNode!=l.domNode||this.domNode.nextSibling!=d)&&l.domNode.insertBefore(this.domNode,d),this.parent=l,this.attach()},a.prototype.isolate=function(l,c){var d=this.split(l);return d.split(c),d},a.prototype.length=function(){return 1},a.prototype.offset=function(l){return l===void 0&&(l=this.parent),this.parent==null||this==l?0:this.parent.children.offset(this)+this.parent.offset(l)},a.prototype.optimize=function(l){this.domNode[o.DATA_KEY]!=null&&delete this.domNode[o.DATA_KEY].mutations},a.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},a.prototype.replace=function(l){l.parent!=null&&(l.parent.insertBefore(this,l.next),l.remove())},a.prototype.replaceWith=function(l,c){var d=typeof l=="string"?o.create(l,c):l;return d.replace(this),d},a.prototype.split=function(l,c){return l===0?this:this.next},a.prototype.update=function(l,c){},a.prototype.wrap=function(l,c){var d=typeof l=="string"?o.create(l,c):l;return this.parent!=null&&this.parent.insertBefore(d,this.next),d.appendChild(this),d},a.blotName="abstract",a}();r.default=s},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(12),s=i(32),a=i(33),l=i(1),c=function(){function d(h){this.attributes={},this.domNode=h,this.build()}return d.prototype.attribute=function(h,f){f?h.add(this.domNode,f)&&(h.value(this.domNode)!=null?this.attributes[h.attrName]=h:delete this.attributes[h.attrName]):(h.remove(this.domNode),delete this.attributes[h.attrName])},d.prototype.build=function(){var h=this;this.attributes={};var f=o.default.keys(this.domNode),m=s.default.keys(this.domNode),w=a.default.keys(this.domNode);f.concat(m).concat(w).forEach(function(_){var E=l.query(_,l.Scope.ATTRIBUTE);E instanceof o.default&&(h.attributes[E.attrName]=E)})},d.prototype.copy=function(h){var f=this;Object.keys(this.attributes).forEach(function(m){var w=f.attributes[m].value(f.domNode);h.format(m,w)})},d.prototype.move=function(h){var f=this;this.copy(h),Object.keys(this.attributes).forEach(function(m){f.attributes[m].remove(f.domNode)}),this.attributes={}},d.prototype.values=function(){var h=this;return Object.keys(this.attributes).reduce(function(f,m){return f[m]=h.attributes[m].value(h.domNode),f},{})},d}();r.default=c},function(n,r,i){var o=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,h){d.__proto__=h}||function(d,h){for(var f in h)h.hasOwnProperty(f)&&(d[f]=h[f])};return function(d,h){c(d,h);function f(){this.constructor=d}d.prototype=h===null?Object.create(h):(f.prototype=h.prototype,new f)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(12);function a(c,d){var h=c.getAttribute("class")||"";return h.split(/\s+/).filter(function(f){return f.indexOf(d+"-")===0})}var l=function(c){o(d,c);function d(){return c!==null&&c.apply(this,arguments)||this}return d.keys=function(h){return(h.getAttribute("class")||"").split(/\s+/).map(function(f){return f.split("-").slice(0,-1).join("-")})},d.prototype.add=function(h,f){return this.canAdd(h,f)?(this.remove(h),h.classList.add(this.keyName+"-"+f),!0):!1},d.prototype.remove=function(h){var f=a(h,this.keyName);f.forEach(function(m){h.classList.remove(m)}),h.classList.length===0&&h.removeAttribute("class")},d.prototype.value=function(h){var f=a(h,this.keyName)[0]||"",m=f.slice(this.keyName.length+1);return this.canAdd(h,m)?m:""},d}(s.default);r.default=l},function(n,r,i){var o=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,h){d.__proto__=h}||function(d,h){for(var f in h)h.hasOwnProperty(f)&&(d[f]=h[f])};return function(d,h){c(d,h);function f(){this.constructor=d}d.prototype=h===null?Object.create(h):(f.prototype=h.prototype,new f)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(12);function a(c){var d=c.split("-"),h=d.slice(1).map(function(f){return f[0].toUpperCase()+f.slice(1)}).join("");return d[0]+h}var l=function(c){o(d,c);function d(){return c!==null&&c.apply(this,arguments)||this}return d.keys=function(h){return(h.getAttribute("style")||"").split(";").map(function(f){var m=f.split(":");return m[0].trim()})},d.prototype.add=function(h,f){return this.canAdd(h,f)?(h.style[a(this.keyName)]=f,!0):!1},d.prototype.remove=function(h){h.style[a(this.keyName)]="",h.getAttribute("style")||h.removeAttribute("style")},d.prototype.value=function(h){var f=h.style[a(this.keyName)];return this.canAdd(h,f)?f:""},d}(s.default);r.default=l},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function l(c,d){for(var h=0;h<d.length;h++){var f=d[h];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}return function(c,d,h){return d&&l(c.prototype,d),h&&l(c,h),c}}();function s(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")}var a=function(){function l(c,d){s(this,l),this.quill=c,this.options=d,this.modules={}}return o(l,[{key:"init",value:function(){var d=this;Object.keys(this.options.modules).forEach(function(h){d.modules[h]==null&&d.addModule(h)})}},{key:"addModule",value:function(d){var h=this.quill.constructor.import("modules/"+d);return this.modules[d]=new h(this.quill,this.options.modules[d]||{}),this.modules[d]}}]),l}();a.DEFAULTS={modules:{}},a.themes={default:a},r.default=a},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function g(p,v){for(var y=0;y<v.length;y++){var k=v[y];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(p,k.key,k)}}return function(p,v,y){return v&&g(p.prototype,v),y&&g(p,y),p}}(),s=function g(p,v,y){p===null&&(p=Function.prototype);var k=Object.getOwnPropertyDescriptor(p,v);if(k===void 0){var N=Object.getPrototypeOf(p);return N===null?void 0:g(N,v,y)}else{if("value"in k)return k.value;var S=k.get;return S===void 0?void 0:S.call(y)}},a=i(0),l=h(a),c=i(7),d=h(c);function h(g){return g&&g.__esModule?g:{default:g}}function f(g,p){if(!(g instanceof p))throw new TypeError("Cannot call a class as a function")}function m(g,p){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:g}function w(g,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);g.prototype=Object.create(p&&p.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(g,p):g.__proto__=p)}var _="\uFEFF",E=function(g){w(p,g);function p(v){f(this,p);var y=m(this,(p.__proto__||Object.getPrototypeOf(p)).call(this,v));return y.contentNode=document.createElement("span"),y.contentNode.setAttribute("contenteditable",!1),[].slice.call(y.domNode.childNodes).forEach(function(k){y.contentNode.appendChild(k)}),y.leftGuard=document.createTextNode(_),y.rightGuard=document.createTextNode(_),y.domNode.appendChild(y.leftGuard),y.domNode.appendChild(y.contentNode),y.domNode.appendChild(y.rightGuard),y}return o(p,[{key:"index",value:function(y,k){return y===this.leftGuard?0:y===this.rightGuard?1:s(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"index",this).call(this,y,k)}},{key:"restore",value:function(y){var k=void 0,N=void 0,S=y.data.split(_).join("");if(y===this.leftGuard)if(this.prev instanceof d.default){var T=this.prev.length();this.prev.insertAt(T,S),k={startNode:this.prev.domNode,startOffset:T+S.length}}else N=document.createTextNode(S),this.parent.insertBefore(l.default.create(N),this),k={startNode:N,startOffset:S.length};else y===this.rightGuard&&(this.next instanceof d.default?(this.next.insertAt(0,S),k={startNode:this.next.domNode,startOffset:S.length}):(N=document.createTextNode(S),this.parent.insertBefore(l.default.create(N),this.next),k={startNode:N,startOffset:S.length}));return y.data=_,k}},{key:"update",value:function(y,k){var N=this;y.forEach(function(S){if(S.type==="characterData"&&(S.target===N.leftGuard||S.target===N.rightGuard)){var T=N.restore(S.target);T&&(k.range=T)}})}}]),p}(l.default.Embed);r.default=E},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.AlignStyle=r.AlignClass=r.AlignAttribute=void 0;var o=i(0),s=a(o);function a(f){return f&&f.__esModule?f:{default:f}}var l={scope:s.default.Scope.BLOCK,whitelist:["right","center","justify"]},c=new s.default.Attributor.Attribute("align","align",l),d=new s.default.Attributor.Class("align","ql-align",l),h=new s.default.Attributor.Style("align","text-align",l);r.AlignAttribute=c,r.AlignClass=d,r.AlignStyle=h},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.BackgroundStyle=r.BackgroundClass=void 0;var o=i(0),s=l(o),a=i(26);function l(h){return h&&h.__esModule?h:{default:h}}var c=new s.default.Attributor.Class("background","ql-bg",{scope:s.default.Scope.INLINE}),d=new a.ColorAttributor("background","background-color",{scope:s.default.Scope.INLINE});r.BackgroundClass=c,r.BackgroundStyle=d},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.DirectionStyle=r.DirectionClass=r.DirectionAttribute=void 0;var o=i(0),s=a(o);function a(f){return f&&f.__esModule?f:{default:f}}var l={scope:s.default.Scope.BLOCK,whitelist:["rtl"]},c=new s.default.Attributor.Attribute("direction","dir",l),d=new s.default.Attributor.Class("direction","ql-direction",l),h=new s.default.Attributor.Style("direction","direction",l);r.DirectionAttribute=c,r.DirectionClass=d,r.DirectionStyle=h},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.FontClass=r.FontStyle=void 0;var o=function(){function g(p,v){for(var y=0;y<v.length;y++){var k=v[y];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(p,k.key,k)}}return function(p,v,y){return v&&g(p.prototype,v),y&&g(p,y),p}}(),s=function g(p,v,y){p===null&&(p=Function.prototype);var k=Object.getOwnPropertyDescriptor(p,v);if(k===void 0){var N=Object.getPrototypeOf(p);return N===null?void 0:g(N,v,y)}else{if("value"in k)return k.value;var S=k.get;return S===void 0?void 0:S.call(y)}},a=i(0),l=c(a);function c(g){return g&&g.__esModule?g:{default:g}}function d(g,p){if(!(g instanceof p))throw new TypeError("Cannot call a class as a function")}function h(g,p){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:g}function f(g,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);g.prototype=Object.create(p&&p.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(g,p):g.__proto__=p)}var m={scope:l.default.Scope.INLINE,whitelist:["serif","monospace"]},w=new l.default.Attributor.Class("font","ql-font",m),_=function(g){f(p,g);function p(){return d(this,p),h(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return o(p,[{key:"value",value:function(y){return s(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"value",this).call(this,y).replace(/["']/g,"")}}]),p}(l.default.Attributor.Style),E=new _("font","font-family",m);r.FontStyle=E,r.FontClass=w},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.SizeStyle=r.SizeClass=void 0;var o=i(0),s=a(o);function a(d){return d&&d.__esModule?d:{default:d}}var l=new s.default.Attributor.Class("size","ql-size",{scope:s.default.Scope.INLINE,whitelist:["small","large","huge"]}),c=new s.default.Attributor.Style("size","font-size",{scope:s.default.Scope.INLINE,whitelist:["10px","18px","32px"]});r.SizeClass=l,r.SizeStyle=c},function(n,r,i){n.exports={align:{"":i(76),center:i(77),right:i(78),justify:i(79)},background:i(80),blockquote:i(81),bold:i(82),clean:i(83),code:i(58),"code-block":i(58),color:i(84),direction:{"":i(85),rtl:i(86)},float:{center:i(87),full:i(88),left:i(89),right:i(90)},formula:i(91),header:{1:i(92),2:i(93)},italic:i(94),image:i(95),indent:{"+1":i(96),"-1":i(97)},link:i(98),list:{ordered:i(99),bullet:i(100),check:i(101)},script:{sub:i(102),super:i(103)},strike:i(104),underline:i(105),video:i(106)}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.getLastChangeIndex=r.default=void 0;var o=function(){function v(y,k){for(var N=0;N<k.length;N++){var S=k[N];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(y,S.key,S)}}return function(y,k,N){return k&&v(y.prototype,k),N&&v(y,N),y}}(),s=i(0),a=f(s),l=i(5),c=f(l),d=i(9),h=f(d);function f(v){return v&&v.__esModule?v:{default:v}}function m(v,y){if(!(v instanceof y))throw new TypeError("Cannot call a class as a function")}function w(v,y){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:v}function _(v,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);v.prototype=Object.create(y&&y.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(v,y):v.__proto__=y)}var E=function(v){_(y,v);function y(k,N){m(this,y);var S=w(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,k,N));return S.lastRecorded=0,S.ignoreChange=!1,S.clear(),S.quill.on(c.default.events.EDITOR_CHANGE,function(T,P,b,I){T!==c.default.events.TEXT_CHANGE||S.ignoreChange||(!S.options.userOnly||I===c.default.sources.USER?S.record(P,b):S.transform(P))}),S.quill.keyboard.addBinding({key:"Z",shortKey:!0},S.undo.bind(S)),S.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},S.redo.bind(S)),/Win/i.test(navigator.platform)&&S.quill.keyboard.addBinding({key:"Y",shortKey:!0},S.redo.bind(S)),S}return o(y,[{key:"change",value:function(N,S){if(this.stack[N].length!==0){var T=this.stack[N].pop();this.stack[S].push(T),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(T[N],c.default.sources.USER),this.ignoreChange=!1;var P=p(T[N]);this.quill.setSelection(P)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(N,S){if(N.ops.length!==0){this.stack.redo=[];var T=this.quill.getContents().diff(S),P=Date.now();if(this.lastRecorded+this.options.delay>P&&this.stack.undo.length>0){var b=this.stack.undo.pop();T=T.compose(b.undo),N=b.redo.compose(N)}else this.lastRecorded=P;this.stack.undo.push({redo:N,undo:T}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(N){this.stack.undo.forEach(function(S){S.undo=N.transform(S.undo,!0),S.redo=N.transform(S.redo,!0)}),this.stack.redo.forEach(function(S){S.undo=N.transform(S.undo,!0),S.redo=N.transform(S.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),y}(h.default);E.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function g(v){var y=v.ops[v.ops.length-1];return y==null?!1:y.insert!=null?typeof y.insert=="string"&&y.insert.endsWith(`
`):y.attributes!=null?Object.keys(y.attributes).some(function(k){return a.default.query(k,a.default.Scope.BLOCK)!=null}):!1}function p(v){var y=v.reduce(function(N,S){return N+=S.delete||0,N},0),k=v.length()-y;return g(v)&&(k-=1),k}r.default=E,r.getLastChangeIndex=p},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BaseTooltip=void 0;var o=function(){function M(U,K){for(var z=0;z<K.length;z++){var j=K[z];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(U,j.key,j)}}return function(U,K,z){return K&&M(U.prototype,K),z&&M(U,z),U}}(),s=function M(U,K,z){U===null&&(U=Function.prototype);var j=Object.getOwnPropertyDescriptor(U,K);if(j===void 0){var $=Object.getPrototypeOf(U);return $===null?void 0:M($,K,z)}else{if("value"in j)return j.value;var Y=j.get;return Y===void 0?void 0:Y.call(z)}},a=i(3),l=P(a),c=i(2),d=P(c),h=i(8),f=P(h),m=i(23),w=P(m),_=i(34),E=P(_),g=i(59),p=P(g),v=i(60),y=P(v),k=i(28),N=P(k),S=i(61),T=P(S);function P(M){return M&&M.__esModule?M:{default:M}}function b(M,U){if(!(M instanceof U))throw new TypeError("Cannot call a class as a function")}function I(M,U){if(!M)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U&&(typeof U=="object"||typeof U=="function")?U:M}function x(M,U){if(typeof U!="function"&&U!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof U);M.prototype=Object.create(U&&U.prototype,{constructor:{value:M,enumerable:!1,writable:!0,configurable:!0}}),U&&(Object.setPrototypeOf?Object.setPrototypeOf(M,U):M.__proto__=U)}var O=[!1,"center","right","justify"],L=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],B=[!1,"serif","monospace"],H=["1","2","3",!1],W=["small",!1,"large","huge"],G=function(M){x(U,M);function U(K,z){b(this,U);var j=I(this,(U.__proto__||Object.getPrototypeOf(U)).call(this,K,z)),$=function Y(X){if(!document.body.contains(K.root))return document.body.removeEventListener("click",Y);j.tooltip!=null&&!j.tooltip.root.contains(X.target)&&document.activeElement!==j.tooltip.textbox&&!j.quill.hasFocus()&&j.tooltip.hide(),j.pickers!=null&&j.pickers.forEach(function(ne){ne.container.contains(X.target)||ne.close()})};return K.emitter.listenDOM("click",document.body,$),j}return o(U,[{key:"addModule",value:function(z){var j=s(U.prototype.__proto__||Object.getPrototypeOf(U.prototype),"addModule",this).call(this,z);return z==="toolbar"&&this.extendToolbar(j),j}},{key:"buildButtons",value:function(z,j){z.forEach(function($){var Y=$.getAttribute("class")||"";Y.split(/\s+/).forEach(function(X){if(X.startsWith("ql-")&&(X=X.slice(3),j[X]!=null))if(X==="direction")$.innerHTML=j[X][""]+j[X].rtl;else if(typeof j[X]=="string")$.innerHTML=j[X];else{var ne=$.value||"";ne!=null&&j[X][ne]&&($.innerHTML=j[X][ne])}})})}},{key:"buildPickers",value:function(z,j){var $=this;this.pickers=z.map(function(X){if(X.classList.contains("ql-align"))return X.querySelector("option")==null&&C(X,O),new y.default(X,j.align);if(X.classList.contains("ql-background")||X.classList.contains("ql-color")){var ne=X.classList.contains("ql-background")?"background":"color";return X.querySelector("option")==null&&C(X,L,ne==="background"?"#ffffff":"#000000"),new p.default(X,j[ne])}else return X.querySelector("option")==null&&(X.classList.contains("ql-font")?C(X,B):X.classList.contains("ql-header")?C(X,H):X.classList.contains("ql-size")&&C(X,W)),new N.default(X)});var Y=function(){$.pickers.forEach(function(ne){ne.update()})};this.quill.on(f.default.events.EDITOR_CHANGE,Y)}}]),U}(E.default);G.DEFAULTS=(0,l.default)(!0,{},E.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var U=this,K=this.container.querySelector("input.ql-image[type=file]");K==null&&(K=document.createElement("input"),K.setAttribute("type","file"),K.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),K.classList.add("ql-image"),K.addEventListener("change",function(){if(K.files!=null&&K.files[0]!=null){var z=new FileReader;z.onload=function(j){var $=U.quill.getSelection(!0);U.quill.updateContents(new d.default().retain($.index).delete($.length).insert({image:j.target.result}),f.default.sources.USER),U.quill.setSelection($.index+1,f.default.sources.SILENT),K.value=""},z.readAsDataURL(K.files[0])}}),this.container.appendChild(K)),K.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var q=function(M){x(U,M);function U(K,z){b(this,U);var j=I(this,(U.__proto__||Object.getPrototypeOf(U)).call(this,K,z));return j.textbox=j.root.querySelector('input[type="text"]'),j.listen(),j}return o(U,[{key:"listen",value:function(){var z=this;this.textbox.addEventListener("keydown",function(j){w.default.match(j,"enter")?(z.save(),j.preventDefault()):w.default.match(j,"escape")&&(z.cancel(),j.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),j!=null?this.textbox.value=j:z!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+z)||""),this.root.setAttribute("data-mode",z)}},{key:"restoreFocus",value:function(){var z=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=z}},{key:"save",value:function(){var z=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var j=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",z,f.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",z,f.default.sources.USER)),this.quill.root.scrollTop=j;break}case"video":z=V(z);case"formula":{if(!z)break;var $=this.quill.getSelection(!0);if($!=null){var Y=$.index+$.length;this.quill.insertEmbed(Y,this.root.getAttribute("data-mode"),z,f.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(Y+1," ",f.default.sources.USER),this.quill.setSelection(Y+2,f.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),U}(T.default);function V(M){var U=M.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||M.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return U?(U[1]||"https")+"://www.youtube.com/embed/"+U[2]+"?showinfo=0":(U=M.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(U[1]||"https")+"://player.vimeo.com/video/"+U[2]+"/":M}function C(M,U){var K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;U.forEach(function(z){var j=document.createElement("option");z===K?j.setAttribute("selected","selected"):j.setAttribute("value",z),M.appendChild(j)})}r.BaseTooltip=q,r.default=G},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function s(){this.head=this.tail=null,this.length=0}return s.prototype.append=function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];this.insertBefore(a[0],null),a.length>1&&this.append.apply(this,a.slice(1))},s.prototype.contains=function(a){for(var l,c=this.iterator();l=c();)if(l===a)return!0;return!1},s.prototype.insertBefore=function(a,l){a&&(a.next=l,l!=null?(a.prev=l.prev,l.prev!=null&&(l.prev.next=a),l.prev=a,l===this.head&&(this.head=a)):this.tail!=null?(this.tail.next=a,a.prev=this.tail,this.tail=a):(a.prev=null,this.head=this.tail=a),this.length+=1)},s.prototype.offset=function(a){for(var l=0,c=this.head;c!=null;){if(c===a)return l;l+=c.length(),c=c.next}return-1},s.prototype.remove=function(a){this.contains(a)&&(a.prev!=null&&(a.prev.next=a.next),a.next!=null&&(a.next.prev=a.prev),a===this.head&&(this.head=a.next),a===this.tail&&(this.tail=a.prev),this.length-=1)},s.prototype.iterator=function(a){return a===void 0&&(a=this.head),function(){var l=a;return a!=null&&(a=a.next),l}},s.prototype.find=function(a,l){l===void 0&&(l=!1);for(var c,d=this.iterator();c=d();){var h=c.length();if(a<h||l&&a===h&&(c.next==null||c.next.length()!==0))return[c,a];a-=h}return[null,0]},s.prototype.forEach=function(a){for(var l,c=this.iterator();l=c();)a(l)},s.prototype.forEachAt=function(a,l,c){if(!(l<=0))for(var d=this.find(a),h=d[0],f=d[1],m,w=a-f,_=this.iterator(h);(m=_())&&w<a+l;){var E=m.length();a>w?c(m,a-w,Math.min(l,w+E-a)):c(m,0,Math.min(E,a+l-w)),w+=E}},s.prototype.map=function(a){return this.reduce(function(l,c){return l.push(a(c)),l},[])},s.prototype.reduce=function(a,l){for(var c,d=this.iterator();c=d();)l=a(l,c);return l},s}();r.default=o},function(n,r,i){var o=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,m){f.__proto__=m}||function(f,m){for(var w in m)m.hasOwnProperty(w)&&(f[w]=m[w])};return function(f,m){h(f,m);function w(){this.constructor=f}f.prototype=m===null?Object.create(m):(w.prototype=m.prototype,new w)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(17),a=i(1),l={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},c=100,d=function(h){o(f,h);function f(m){var w=h.call(this,m)||this;return w.scroll=w,w.observer=new MutationObserver(function(_){w.update(_)}),w.observer.observe(w.domNode,l),w.attach(),w}return f.prototype.detach=function(){h.prototype.detach.call(this),this.observer.disconnect()},f.prototype.deleteAt=function(m,w){this.update(),m===0&&w===this.length()?this.children.forEach(function(_){_.remove()}):h.prototype.deleteAt.call(this,m,w)},f.prototype.formatAt=function(m,w,_,E){this.update(),h.prototype.formatAt.call(this,m,w,_,E)},f.prototype.insertAt=function(m,w,_){this.update(),h.prototype.insertAt.call(this,m,w,_)},f.prototype.optimize=function(m,w){var _=this;m===void 0&&(m=[]),w===void 0&&(w={}),h.prototype.optimize.call(this,w);for(var E=[].slice.call(this.observer.takeRecords());E.length>0;)m.push(E.pop());for(var g=function(k,N){N===void 0&&(N=!0),!(k==null||k===_)&&k.domNode.parentNode!=null&&(k.domNode[a.DATA_KEY].mutations==null&&(k.domNode[a.DATA_KEY].mutations=[]),N&&g(k.parent))},p=function(k){k.domNode[a.DATA_KEY]==null||k.domNode[a.DATA_KEY].mutations==null||(k instanceof s.default&&k.children.forEach(p),k.optimize(w))},v=m,y=0;v.length>0;y+=1){if(y>=c)throw new Error("[Parchment] Maximum optimize iterations reached");for(v.forEach(function(k){var N=a.find(k.target,!0);N!=null&&(N.domNode===k.target&&(k.type==="childList"?(g(a.find(k.previousSibling,!1)),[].forEach.call(k.addedNodes,function(S){var T=a.find(S,!1);g(T,!1),T instanceof s.default&&T.children.forEach(function(P){g(P,!1)})})):k.type==="attributes"&&g(N.prev)),g(N))}),this.children.forEach(p),v=[].slice.call(this.observer.takeRecords()),E=v.slice();E.length>0;)m.push(E.pop())}},f.prototype.update=function(m,w){var _=this;w===void 0&&(w={}),m=m||this.observer.takeRecords(),m.map(function(E){var g=a.find(E.target,!0);return g==null?null:g.domNode[a.DATA_KEY].mutations==null?(g.domNode[a.DATA_KEY].mutations=[E],g):(g.domNode[a.DATA_KEY].mutations.push(E),null)}).forEach(function(E){E==null||E===_||E.domNode[a.DATA_KEY]==null||E.update(E.domNode[a.DATA_KEY].mutations||[],w)}),this.domNode[a.DATA_KEY].mutations!=null&&h.prototype.update.call(this,this.domNode[a.DATA_KEY].mutations,w),this.optimize(m,w)},f.blotName="scroll",f.defaultChild="block",f.scope=a.Scope.BLOCK_BLOT,f.tagName="DIV",f}(s.default);r.default=d},function(n,r,i){var o=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,f){h.__proto__=f}||function(h,f){for(var m in f)f.hasOwnProperty(m)&&(h[m]=f[m])};return function(h,f){d(h,f);function m(){this.constructor=h}h.prototype=f===null?Object.create(f):(m.prototype=f.prototype,new m)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(18),a=i(1);function l(d,h){if(Object.keys(d).length!==Object.keys(h).length)return!1;for(var f in d)if(d[f]!==h[f])return!1;return!0}var c=function(d){o(h,d);function h(){return d!==null&&d.apply(this,arguments)||this}return h.formats=function(f){if(f.tagName!==h.tagName)return d.formats.call(this,f)},h.prototype.format=function(f,m){var w=this;f===this.statics.blotName&&!m?(this.children.forEach(function(_){_ instanceof s.default||(_=_.wrap(h.blotName,!0)),w.attributes.copy(_)}),this.unwrap()):d.prototype.format.call(this,f,m)},h.prototype.formatAt=function(f,m,w,_){if(this.formats()[w]!=null||a.query(w,a.Scope.ATTRIBUTE)){var E=this.isolate(f,m);E.format(w,_)}else d.prototype.formatAt.call(this,f,m,w,_)},h.prototype.optimize=function(f){d.prototype.optimize.call(this,f);var m=this.formats();if(Object.keys(m).length===0)return this.unwrap();var w=this.next;w instanceof h&&w.prev===this&&l(m,w.formats())&&(w.moveChildren(this),w.remove())},h.blotName="inline",h.scope=a.Scope.INLINE_BLOT,h.tagName="SPAN",h}(s.default);r.default=c},function(n,r,i){var o=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,h){d.__proto__=h}||function(d,h){for(var f in h)h.hasOwnProperty(f)&&(d[f]=h[f])};return function(d,h){c(d,h);function f(){this.constructor=d}d.prototype=h===null?Object.create(h):(f.prototype=h.prototype,new f)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(18),a=i(1),l=function(c){o(d,c);function d(){return c!==null&&c.apply(this,arguments)||this}return d.formats=function(h){var f=a.query(d.blotName).tagName;if(h.tagName!==f)return c.formats.call(this,h)},d.prototype.format=function(h,f){a.query(h,a.Scope.BLOCK)!=null&&(h===this.statics.blotName&&!f?this.replaceWith(d.blotName):c.prototype.format.call(this,h,f))},d.prototype.formatAt=function(h,f,m,w){a.query(m,a.Scope.BLOCK)!=null?this.format(m,w):c.prototype.formatAt.call(this,h,f,m,w)},d.prototype.insertAt=function(h,f,m){if(m==null||a.query(f,a.Scope.INLINE)!=null)c.prototype.insertAt.call(this,h,f,m);else{var w=this.split(h),_=a.create(f,m);w.parent.insertBefore(_,w)}},d.prototype.update=function(h,f){navigator.userAgent.match(/Trident/)?this.build():c.prototype.update.call(this,h,f)},d.blotName="block",d.scope=a.Scope.BLOCK_BLOT,d.tagName="P",d}(s.default);r.default=l},function(n,r,i){var o=this&&this.__extends||function(){var l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,d){c.__proto__=d}||function(c,d){for(var h in d)d.hasOwnProperty(h)&&(c[h]=d[h])};return function(c,d){l(c,d);function h(){this.constructor=c}c.prototype=d===null?Object.create(d):(h.prototype=d.prototype,new h)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(19),a=function(l){o(c,l);function c(){return l!==null&&l.apply(this,arguments)||this}return c.formats=function(d){},c.prototype.format=function(d,h){l.prototype.formatAt.call(this,0,this.length(),d,h)},c.prototype.formatAt=function(d,h,f,m){d===0&&h===this.length()?this.format(f,m):l.prototype.formatAt.call(this,d,h,f,m)},c.prototype.formats=function(){return this.statics.formats(this.domNode)},c}(s.default);r.default=a},function(n,r,i){var o=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,h){d.__proto__=h}||function(d,h){for(var f in h)h.hasOwnProperty(f)&&(d[f]=h[f])};return function(d,h){c(d,h);function f(){this.constructor=d}d.prototype=h===null?Object.create(h):(f.prototype=h.prototype,new f)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(19),a=i(1),l=function(c){o(d,c);function d(h){var f=c.call(this,h)||this;return f.text=f.statics.value(f.domNode),f}return d.create=function(h){return document.createTextNode(h)},d.value=function(h){var f=h.data;return f.normalize&&(f=f.normalize()),f},d.prototype.deleteAt=function(h,f){this.domNode.data=this.text=this.text.slice(0,h)+this.text.slice(h+f)},d.prototype.index=function(h,f){return this.domNode===h?f:-1},d.prototype.insertAt=function(h,f,m){m==null?(this.text=this.text.slice(0,h)+f+this.text.slice(h),this.domNode.data=this.text):c.prototype.insertAt.call(this,h,f,m)},d.prototype.length=function(){return this.text.length},d.prototype.optimize=function(h){c.prototype.optimize.call(this,h),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof d&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},d.prototype.position=function(h,f){return[this.domNode,h]},d.prototype.split=function(h,f){if(f===void 0&&(f=!1),!f){if(h===0)return this;if(h===this.length())return this.next}var m=a.create(this.domNode.splitText(h));return this.parent.insertBefore(m,this.next),this.text=this.statics.value(this.domNode),m},d.prototype.update=function(h,f){var m=this;h.some(function(w){return w.type==="characterData"&&w.target===m.domNode})&&(this.text=this.statics.value(this.domNode))},d.prototype.value=function(){return this.text},d.blotName="text",d.scope=a.Scope.INLINE_BLOT,d}(s.default);r.default=l},function(n,r,i){var o=document.createElement("div");if(o.classList.toggle("test-class",!1),o.classList.contains("test-class")){var s=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(a,l){return arguments.length>1&&!this.contains(a)==!l?l:s.call(this,a)}}String.prototype.startsWith||(String.prototype.startsWith=function(a,l){return l=l||0,this.substr(l,a.length)===a}),String.prototype.endsWith||(String.prototype.endsWith=function(a,l){var c=this.toString();(typeof l!="number"||!isFinite(l)||Math.floor(l)!==l||l>c.length)&&(l=c.length),l-=a.length;var d=c.indexOf(a,l);return d!==-1&&d===l}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(l){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof l!="function")throw new TypeError("predicate must be a function");for(var c=Object(this),d=c.length>>>0,h=arguments[1],f,m=0;m<d;m++)if(f=c[m],l.call(h,f,m,c))return f}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(n,r){var i=-1,o=1,s=0;function a(y,k,N){if(y==k)return y?[[s,y]]:[];(N<0||y.length<N)&&(N=null);var S=h(y,k),T=y.substring(0,S);y=y.substring(S),k=k.substring(S),S=f(y,k);var P=y.substring(y.length-S);y=y.substring(0,y.length-S),k=k.substring(0,k.length-S);var b=l(y,k);return T&&b.unshift([s,T]),P&&b.push([s,P]),w(b),N!=null&&(b=g(b,N)),b=p(b),b}function l(y,k){var N;if(!y)return[[o,k]];if(!k)return[[i,y]];var S=y.length>k.length?y:k,T=y.length>k.length?k:y,P=S.indexOf(T);if(P!=-1)return N=[[o,S.substring(0,P)],[s,T],[o,S.substring(P+T.length)]],y.length>k.length&&(N[0][0]=N[2][0]=i),N;if(T.length==1)return[[i,y],[o,k]];var b=m(y,k);if(b){var I=b[0],x=b[1],O=b[2],L=b[3],B=b[4],H=a(I,O),W=a(x,L);return H.concat([[s,B]],W)}return c(y,k)}function c(y,k){for(var N=y.length,S=k.length,T=Math.ceil((N+S)/2),P=T,b=2*T,I=new Array(b),x=new Array(b),O=0;O<b;O++)I[O]=-1,x[O]=-1;I[P+1]=0,x[P+1]=0;for(var L=N-S,B=L%2!=0,H=0,W=0,G=0,q=0,V=0;V<T;V++){for(var C=-V+H;C<=V-W;C+=2){var M=P+C,U;C==-V||C!=V&&I[M-1]<I[M+1]?U=I[M+1]:U=I[M-1]+1;for(var K=U-C;U<N&&K<S&&y.charAt(U)==k.charAt(K);)U++,K++;if(I[M]=U,U>N)W+=2;else if(K>S)H+=2;else if(B){var z=P+L-C;if(z>=0&&z<b&&x[z]!=-1){var j=N-x[z];if(U>=j)return d(y,k,U,K)}}}for(var $=-V+G;$<=V-q;$+=2){var z=P+$,j;$==-V||$!=V&&x[z-1]<x[z+1]?j=x[z+1]:j=x[z-1]+1;for(var Y=j-$;j<N&&Y<S&&y.charAt(N-j-1)==k.charAt(S-Y-1);)j++,Y++;if(x[z]=j,j>N)q+=2;else if(Y>S)G+=2;else if(!B){var M=P+L-$;if(M>=0&&M<b&&I[M]!=-1){var U=I[M],K=P+U-M;if(j=N-j,U>=j)return d(y,k,U,K)}}}}return[[i,y],[o,k]]}function d(y,k,N,S){var T=y.substring(0,N),P=k.substring(0,S),b=y.substring(N),I=k.substring(S),x=a(T,P),O=a(b,I);return x.concat(O)}function h(y,k){if(!y||!k||y.charAt(0)!=k.charAt(0))return 0;for(var N=0,S=Math.min(y.length,k.length),T=S,P=0;N<T;)y.substring(P,T)==k.substring(P,T)?(N=T,P=N):S=T,T=Math.floor((S-N)/2+N);return T}function f(y,k){if(!y||!k||y.charAt(y.length-1)!=k.charAt(k.length-1))return 0;for(var N=0,S=Math.min(y.length,k.length),T=S,P=0;N<T;)y.substring(y.length-T,y.length-P)==k.substring(k.length-T,k.length-P)?(N=T,P=N):S=T,T=Math.floor((S-N)/2+N);return T}function m(y,k){var N=y.length>k.length?y:k,S=y.length>k.length?k:y;if(N.length<4||S.length*2<N.length)return null;function T(W,G,q){for(var V=W.substring(q,q+Math.floor(W.length/4)),C=-1,M="",U,K,z,j;(C=G.indexOf(V,C+1))!=-1;){var $=h(W.substring(q),G.substring(C)),Y=f(W.substring(0,q),G.substring(0,C));M.length<Y+$&&(M=G.substring(C-Y,C)+G.substring(C,C+$),U=W.substring(0,q-Y),K=W.substring(q+$),z=G.substring(0,C-Y),j=G.substring(C+$))}return M.length*2>=W.length?[U,K,z,j,M]:null}var P=T(N,S,Math.ceil(N.length/4)),b=T(N,S,Math.ceil(N.length/2)),I;if(!P&&!b)return null;b?P?I=P[4].length>b[4].length?P:b:I=b:I=P;var x,O,L,B;y.length>k.length?(x=I[0],O=I[1],L=I[2],B=I[3]):(L=I[0],B=I[1],x=I[2],O=I[3]);var H=I[4];return[x,O,L,B,H]}function w(y){y.push([s,""]);for(var k=0,N=0,S=0,T="",P="",b;k<y.length;)switch(y[k][0]){case o:S++,P+=y[k][1],k++;break;case i:N++,T+=y[k][1],k++;break;case s:N+S>1?(N!==0&&S!==0&&(b=h(P,T),b!==0&&(k-N-S>0&&y[k-N-S-1][0]==s?y[k-N-S-1][1]+=P.substring(0,b):(y.splice(0,0,[s,P.substring(0,b)]),k++),P=P.substring(b),T=T.substring(b)),b=f(P,T),b!==0&&(y[k][1]=P.substring(P.length-b)+y[k][1],P=P.substring(0,P.length-b),T=T.substring(0,T.length-b))),N===0?y.splice(k-S,N+S,[o,P]):S===0?y.splice(k-N,N+S,[i,T]):y.splice(k-N-S,N+S,[i,T],[o,P]),k=k-N-S+(N?1:0)+(S?1:0)+1):k!==0&&y[k-1][0]==s?(y[k-1][1]+=y[k][1],y.splice(k,1)):k++,S=0,N=0,T="",P="";break}y[y.length-1][1]===""&&y.pop();var I=!1;for(k=1;k<y.length-1;)y[k-1][0]==s&&y[k+1][0]==s&&(y[k][1].substring(y[k][1].length-y[k-1][1].length)==y[k-1][1]?(y[k][1]=y[k-1][1]+y[k][1].substring(0,y[k][1].length-y[k-1][1].length),y[k+1][1]=y[k-1][1]+y[k+1][1],y.splice(k-1,1),I=!0):y[k][1].substring(0,y[k+1][1].length)==y[k+1][1]&&(y[k-1][1]+=y[k+1][1],y[k][1]=y[k][1].substring(y[k+1][1].length)+y[k+1][1],y.splice(k+1,1),I=!0)),k++;I&&w(y)}var _=a;_.INSERT=o,_.DELETE=i,_.EQUAL=s,n.exports=_;function E(y,k){if(k===0)return[s,y];for(var N=0,S=0;S<y.length;S++){var T=y[S];if(T[0]===i||T[0]===s){var P=N+T[1].length;if(k===P)return[S+1,y];if(k<P){y=y.slice();var b=k-N,I=[T[0],T[1].slice(0,b)],x=[T[0],T[1].slice(b)];return y.splice(S,1,I,x),[S+1,y]}else N=P}}throw new Error("cursor_pos is out of bounds!")}function g(y,k){var N=E(y,k),S=N[1],T=N[0],P=S[T],b=S[T+1];if(P==null)return y;if(P[0]!==s)return y;if(b!=null&&P[1]+b[1]===b[1]+P[1])return S.splice(T,2,b,P),v(S,T,2);if(b!=null&&b[1].indexOf(P[1])===0){S.splice(T,2,[b[0],P[1]],[0,P[1]]);var I=b[1].slice(P[1].length);return I.length>0&&S.splice(T+2,0,[b[0],I]),v(S,T,3)}else return y}function p(y){for(var k=!1,N=function(b){return b.charCodeAt(0)>=56320&&b.charCodeAt(0)<=57343},S=function(b){return b.charCodeAt(b.length-1)>=55296&&b.charCodeAt(b.length-1)<=56319},T=2;T<y.length;T+=1)y[T-2][0]===s&&S(y[T-2][1])&&y[T-1][0]===i&&N(y[T-1][1])&&y[T][0]===o&&N(y[T][1])&&(k=!0,y[T-1][1]=y[T-2][1].slice(-1)+y[T-1][1],y[T][1]=y[T-2][1].slice(-1)+y[T][1],y[T-2][1]=y[T-2][1].slice(0,-1));if(!k)return y;for(var P=[],T=0;T<y.length;T+=1)y[T][1].length>0&&P.push(y[T]);return P}function v(y,k,N){for(var S=k+N-1;S>=0&&S>=k-1;S--)if(S+1<y.length){var T=y[S],P=y[S+1];T[0]===P[1]&&y.splice(S,2,[T[0],T[1]+P[1]])}return y}},function(n,r){r=n.exports=typeof Object.keys=="function"?Object.keys:i,r.shim=i;function i(o){var s=[];for(var a in o)s.push(a);return s}},function(n,r){var i=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";r=n.exports=i?o:s,r.supported=o;function o(a){return Object.prototype.toString.call(a)=="[object Arguments]"}r.unsupported=s;function s(a){return a&&typeof a=="object"&&typeof a.length=="number"&&Object.prototype.hasOwnProperty.call(a,"callee")&&!Object.prototype.propertyIsEnumerable.call(a,"callee")||!1}},function(n,r){var i=Object.prototype.hasOwnProperty,o="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(o=!1));function a(c,d,h){this.fn=c,this.context=d,this.once=h||!1}function l(){this._events=new s,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],h,f;if(this._eventsCount===0)return d;for(f in h=this._events)i.call(h,f)&&d.push(o?f.slice(1):f);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(h)):d},l.prototype.listeners=function(d,h){var f=o?o+d:d,m=this._events[f];if(h)return!!m;if(!m)return[];if(m.fn)return[m.fn];for(var w=0,_=m.length,E=new Array(_);w<_;w++)E[w]=m[w].fn;return E},l.prototype.emit=function(d,h,f,m,w,_){var E=o?o+d:d;if(!this._events[E])return!1;var g=this._events[E],p=arguments.length,v,y;if(g.fn){switch(g.once&&this.removeListener(d,g.fn,void 0,!0),p){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,h),!0;case 3:return g.fn.call(g.context,h,f),!0;case 4:return g.fn.call(g.context,h,f,m),!0;case 5:return g.fn.call(g.context,h,f,m,w),!0;case 6:return g.fn.call(g.context,h,f,m,w,_),!0}for(y=1,v=new Array(p-1);y<p;y++)v[y-1]=arguments[y];g.fn.apply(g.context,v)}else{var k=g.length,N;for(y=0;y<k;y++)switch(g[y].once&&this.removeListener(d,g[y].fn,void 0,!0),p){case 1:g[y].fn.call(g[y].context);break;case 2:g[y].fn.call(g[y].context,h);break;case 3:g[y].fn.call(g[y].context,h,f);break;case 4:g[y].fn.call(g[y].context,h,f,m);break;default:if(!v)for(N=1,v=new Array(p-1);N<p;N++)v[N-1]=arguments[N];g[y].fn.apply(g[y].context,v)}}return!0},l.prototype.on=function(d,h,f){var m=new a(h,f||this),w=o?o+d:d;return this._events[w]?this._events[w].fn?this._events[w]=[this._events[w],m]:this._events[w].push(m):(this._events[w]=m,this._eventsCount++),this},l.prototype.once=function(d,h,f){var m=new a(h,f||this,!0),w=o?o+d:d;return this._events[w]?this._events[w].fn?this._events[w]=[this._events[w],m]:this._events[w].push(m):(this._events[w]=m,this._eventsCount++),this},l.prototype.removeListener=function(d,h,f,m){var w=o?o+d:d;if(!this._events[w])return this;if(!h)return--this._eventsCount===0?this._events=new s:delete this._events[w],this;var _=this._events[w];if(_.fn)_.fn===h&&(!m||_.once)&&(!f||_.context===f)&&(--this._eventsCount===0?this._events=new s:delete this._events[w]);else{for(var E=0,g=[],p=_.length;E<p;E++)(_[E].fn!==h||m&&!_[E].once||f&&_[E].context!==f)&&g.push(_[E]);g.length?this._events[w]=g.length===1?g[0]:g:--this._eventsCount===0?this._events=new s:delete this._events[w]}return this},l.prototype.removeAllListeners=function(d){var h;return d?(h=o?o+d:d,this._events[h]&&(--this._eventsCount===0?this._events=new s:delete this._events[h])):(this._events=new s,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prototype.setMaxListeners=function(){return this},l.prefixed=o,l.EventEmitter=l,typeof n<"u"&&(n.exports=l)},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.matchText=r.matchSpacing=r.matchNewline=r.matchBlot=r.matchAttributor=r.default=void 0;var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ee){return typeof ee}:function(ee){return ee&&typeof Symbol=="function"&&ee.constructor===Symbol&&ee!==Symbol.prototype?"symbol":typeof ee},s=function(){function ee(te,le){var ce=[],ie=!0,Te=!1,be=void 0;try{for(var Ie=te[Symbol.iterator](),Ce;!(ie=(Ce=Ie.next()).done)&&(ce.push(Ce.value),!(le&&ce.length===le));ie=!0);}catch(Ue){Te=!0,be=Ue}finally{try{!ie&&Ie.return&&Ie.return()}finally{if(Te)throw be}}return ce}return function(te,le){if(Array.isArray(te))return te;if(Symbol.iterator in Object(te))return ee(te,le);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function ee(te,le){for(var ce=0;ce<le.length;ce++){var ie=le[ce];ie.enumerable=ie.enumerable||!1,ie.configurable=!0,"value"in ie&&(ie.writable=!0),Object.defineProperty(te,ie.key,ie)}}return function(te,le,ce){return le&&ee(te.prototype,le),ce&&ee(te,ce),te}}(),l=i(3),c=x(l),d=i(2),h=x(d),f=i(0),m=x(f),w=i(5),_=x(w),E=i(10),g=x(E),p=i(9),v=x(p),y=i(36),k=i(37),N=i(13),S=x(N),T=i(26),P=i(38),b=i(39),I=i(40);function x(ee){return ee&&ee.__esModule?ee:{default:ee}}function O(ee,te,le){return te in ee?Object.defineProperty(ee,te,{value:le,enumerable:!0,configurable:!0,writable:!0}):ee[te]=le,ee}function L(ee,te){if(!(ee instanceof te))throw new TypeError("Cannot call a class as a function")}function B(ee,te){if(!ee)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return te&&(typeof te=="object"||typeof te=="function")?te:ee}function H(ee,te){if(typeof te!="function"&&te!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof te);ee.prototype=Object.create(te&&te.prototype,{constructor:{value:ee,enumerable:!1,writable:!0,configurable:!0}}),te&&(Object.setPrototypeOf?Object.setPrototypeOf(ee,te):ee.__proto__=te)}var W=(0,g.default)("quill:clipboard"),G="__ql-matcher",q=[[Node.TEXT_NODE,nt],[Node.TEXT_NODE,we],["br",Z],[Node.ELEMENT_NODE,we],[Node.ELEMENT_NODE,ne],[Node.ELEMENT_NODE,Se],[Node.ELEMENT_NODE,X],[Node.ELEMENT_NODE,mt],["li",me],["b",Y.bind(Y,"bold")],["i",Y.bind(Y,"italic")],["style",ue]],V=[y.AlignAttribute,P.DirectionAttribute].reduce(function(ee,te){return ee[te.keyName]=te,ee},{}),C=[y.AlignStyle,k.BackgroundStyle,T.ColorStyle,P.DirectionStyle,b.FontStyle,I.SizeStyle].reduce(function(ee,te){return ee[te.keyName]=te,ee},{}),M=function(ee){H(te,ee);function te(le,ce){L(this,te);var ie=B(this,(te.__proto__||Object.getPrototypeOf(te)).call(this,le,ce));return ie.quill.root.addEventListener("paste",ie.onPaste.bind(ie)),ie.container=ie.quill.addContainer("ql-clipboard"),ie.container.setAttribute("contenteditable",!0),ie.container.setAttribute("tabindex",-1),ie.matchers=[],q.concat(ie.options.matchers).forEach(function(Te){var be=s(Te,2),Ie=be[0],Ce=be[1];!ce.matchVisual&&Ce===Se||ie.addMatcher(Ie,Ce)}),ie}return a(te,[{key:"addMatcher",value:function(ce,ie){this.matchers.push([ce,ie])}},{key:"convert",value:function(ce){if(typeof ce=="string")return this.container.innerHTML=ce.replace(/\>\r?\n +\</g,"><"),this.convert();var ie=this.quill.getFormat(this.quill.selection.savedRange.index);if(ie[S.default.blotName]){var Te=this.container.innerText;return this.container.innerHTML="",new h.default().insert(Te,O({},S.default.blotName,ie[S.default.blotName]))}var be=this.prepareMatching(),Ie=s(be,2),Ce=Ie[0],Ue=Ie[1],Me=$(this.container,Ce,Ue);return z(Me,`
`)&&Me.ops[Me.ops.length-1].attributes==null&&(Me=Me.compose(new h.default().retain(Me.length()-1).delete(1))),W.log("convert",this.container.innerHTML,Me),this.container.innerHTML="",Me}},{key:"dangerouslyPasteHTML",value:function(ce,ie){var Te=arguments.length>2&&arguments[2]!==void 0?arguments[2]:_.default.sources.API;if(typeof ce=="string")this.quill.setContents(this.convert(ce),ie),this.quill.setSelection(0,_.default.sources.SILENT);else{var be=this.convert(ie);this.quill.updateContents(new h.default().retain(ce).concat(be),Te),this.quill.setSelection(ce+be.length(),_.default.sources.SILENT)}}},{key:"onPaste",value:function(ce){var ie=this;if(!(ce.defaultPrevented||!this.quill.isEnabled())){var Te=this.quill.getSelection(),be=new h.default().retain(Te.index),Ie=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(_.default.sources.SILENT),setTimeout(function(){be=be.concat(ie.convert()).delete(Te.length),ie.quill.updateContents(be,_.default.sources.USER),ie.quill.setSelection(be.length()-Te.length,_.default.sources.SILENT),ie.quill.scrollingContainer.scrollTop=Ie,ie.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var ce=this,ie=[],Te=[];return this.matchers.forEach(function(be){var Ie=s(be,2),Ce=Ie[0],Ue=Ie[1];switch(Ce){case Node.TEXT_NODE:Te.push(Ue);break;case Node.ELEMENT_NODE:ie.push(Ue);break;default:[].forEach.call(ce.container.querySelectorAll(Ce),function(Me){Me[G]=Me[G]||[],Me[G].push(Ue)});break}}),[ie,Te]}}]),te}(v.default);M.DEFAULTS={matchers:[],matchVisual:!0};function U(ee,te,le){return(typeof te>"u"?"undefined":o(te))==="object"?Object.keys(te).reduce(function(ce,ie){return U(ce,ie,te[ie])},ee):ee.reduce(function(ce,ie){return ie.attributes&&ie.attributes[te]?ce.push(ie):ce.insert(ie.insert,(0,c.default)({},O({},te,le),ie.attributes))},new h.default)}function K(ee){if(ee.nodeType!==Node.ELEMENT_NODE)return{};var te="__ql-computed-style";return ee[te]||(ee[te]=window.getComputedStyle(ee))}function z(ee,te){for(var le="",ce=ee.ops.length-1;ce>=0&&le.length<te.length;--ce){var ie=ee.ops[ce];if(typeof ie.insert!="string")break;le=ie.insert+le}return le.slice(-1*te.length)===te}function j(ee){if(ee.childNodes.length===0)return!1;var te=K(ee);return["block","list-item"].indexOf(te.display)>-1}function $(ee,te,le){return ee.nodeType===ee.TEXT_NODE?le.reduce(function(ce,ie){return ie(ee,ce)},new h.default):ee.nodeType===ee.ELEMENT_NODE?[].reduce.call(ee.childNodes||[],function(ce,ie){var Te=$(ie,te,le);return ie.nodeType===ee.ELEMENT_NODE&&(Te=te.reduce(function(be,Ie){return Ie(ie,be)},Te),Te=(ie[G]||[]).reduce(function(be,Ie){return Ie(ie,be)},Te)),ce.concat(Te)},new h.default):new h.default}function Y(ee,te,le){return U(le,ee,!0)}function X(ee,te){var le=m.default.Attributor.Attribute.keys(ee),ce=m.default.Attributor.Class.keys(ee),ie=m.default.Attributor.Style.keys(ee),Te={};return le.concat(ce).concat(ie).forEach(function(be){var Ie=m.default.query(be,m.default.Scope.ATTRIBUTE);Ie!=null&&(Te[Ie.attrName]=Ie.value(ee),Te[Ie.attrName])||(Ie=V[be],Ie!=null&&(Ie.attrName===be||Ie.keyName===be)&&(Te[Ie.attrName]=Ie.value(ee)||void 0),Ie=C[be],Ie!=null&&(Ie.attrName===be||Ie.keyName===be)&&(Ie=C[be],Te[Ie.attrName]=Ie.value(ee)||void 0))}),Object.keys(Te).length>0&&(te=U(te,Te)),te}function ne(ee,te){var le=m.default.query(ee);if(le==null)return te;if(le.prototype instanceof m.default.Embed){var ce={},ie=le.value(ee);ie!=null&&(ce[le.blotName]=ie,te=new h.default().insert(ce,le.formats(ee)))}else typeof le.formats=="function"&&(te=U(te,le.blotName,le.formats(ee)));return te}function Z(ee,te){return z(te,`
`)||te.insert(`
`),te}function ue(){return new h.default}function me(ee,te){var le=m.default.query(ee);if(le==null||le.blotName!=="list-item"||!z(te,`
`))return te;for(var ce=-1,ie=ee.parentNode;!ie.classList.contains("ql-clipboard");)(m.default.query(ie)||{}).blotName==="list"&&(ce+=1),ie=ie.parentNode;return ce<=0?te:te.compose(new h.default().retain(te.length()-1).retain(1,{indent:ce}))}function we(ee,te){return z(te,`
`)||(j(ee)||te.length()>0&&ee.nextSibling&&j(ee.nextSibling))&&te.insert(`
`),te}function Se(ee,te){if(j(ee)&&ee.nextElementSibling!=null&&!z(te,`

`)){var le=ee.offsetHeight+parseFloat(K(ee).marginTop)+parseFloat(K(ee).marginBottom);ee.nextElementSibling.offsetTop>ee.offsetTop+le*1.5&&te.insert(`
`)}return te}function mt(ee,te){var le={},ce=ee.style||{};return ce.fontStyle&&K(ee).fontStyle==="italic"&&(le.italic=!0),ce.fontWeight&&(K(ee).fontWeight.startsWith("bold")||parseInt(K(ee).fontWeight)>=700)&&(le.bold=!0),Object.keys(le).length>0&&(te=U(te,le)),parseFloat(ce.textIndent||0)>0&&(te=new h.default().insert("	").concat(te)),te}function nt(ee,te){var le=ee.data;if(ee.parentNode.tagName==="O:P")return te.insert(le.trim());if(le.trim().length===0&&ee.parentNode.classList.contains("ql-clipboard"))return te;if(!K(ee.parentNode).whiteSpace.startsWith("pre")){var ce=function(Te,be){return be=be.replace(/[^\u00a0]/g,""),be.length<1&&Te?" ":be};le=le.replace(/\r\n/g," ").replace(/\n/g," "),le=le.replace(/\s\s+/g,ce.bind(ce,!0)),(ee.previousSibling==null&&j(ee.parentNode)||ee.previousSibling!=null&&j(ee.previousSibling))&&(le=le.replace(/^\s+/,ce.bind(ce,!1))),(ee.nextSibling==null&&j(ee.parentNode)||ee.nextSibling!=null&&j(ee.nextSibling))&&(le=le.replace(/\s+$/,ce.bind(ce,!1)))}return te.insert(le)}r.default=M,r.matchAttributor=X,r.matchBlot=ne,r.matchNewline=we,r.matchSpacing=Se,r.matchText=nt},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function w(_,E){for(var g=0;g<E.length;g++){var p=E[g];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(_,p.key,p)}}return function(_,E,g){return E&&w(_.prototype,E),g&&w(_,g),_}}(),s=function w(_,E,g){_===null&&(_=Function.prototype);var p=Object.getOwnPropertyDescriptor(_,E);if(p===void 0){var v=Object.getPrototypeOf(_);return v===null?void 0:w(v,E,g)}else{if("value"in p)return p.value;var y=p.get;return y===void 0?void 0:y.call(g)}},a=i(6),l=c(a);function c(w){return w&&w.__esModule?w:{default:w}}function d(w,_){if(!(w instanceof _))throw new TypeError("Cannot call a class as a function")}function h(w,_){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:w}function f(w,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);w.prototype=Object.create(_&&_.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(w,_):w.__proto__=_)}var m=function(w){f(_,w);function _(){return d(this,_),h(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return o(_,[{key:"optimize",value:function(g){s(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"optimize",this).call(this,g),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return s(_.__proto__||Object.getPrototypeOf(_),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),_}(l.default);m.blotName="bold",m.tagName=["STRONG","B"],r.default=m},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.addControls=r.default=void 0;var o=function(){function I(x,O){var L=[],B=!0,H=!1,W=void 0;try{for(var G=x[Symbol.iterator](),q;!(B=(q=G.next()).done)&&(L.push(q.value),!(O&&L.length===O));B=!0);}catch(V){H=!0,W=V}finally{try{!B&&G.return&&G.return()}finally{if(H)throw W}}return L}return function(x,O){if(Array.isArray(x))return x;if(Symbol.iterator in Object(x))return I(x,O);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function I(x,O){for(var L=0;L<O.length;L++){var B=O[L];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(x,B.key,B)}}return function(x,O,L){return O&&I(x.prototype,O),L&&I(x,L),x}}(),a=i(2),l=g(a),c=i(0),d=g(c),h=i(5),f=g(h),m=i(10),w=g(m),_=i(9),E=g(_);function g(I){return I&&I.__esModule?I:{default:I}}function p(I,x,O){return x in I?Object.defineProperty(I,x,{value:O,enumerable:!0,configurable:!0,writable:!0}):I[x]=O,I}function v(I,x){if(!(I instanceof x))throw new TypeError("Cannot call a class as a function")}function y(I,x){if(!I)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:I}function k(I,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);I.prototype=Object.create(x&&x.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(I,x):I.__proto__=x)}var N=(0,w.default)("quill:toolbar"),S=function(I){k(x,I);function x(O,L){v(this,x);var B=y(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,O,L));if(Array.isArray(B.options.container)){var H=document.createElement("div");P(H,B.options.container),O.container.parentNode.insertBefore(H,O.container),B.container=H}else typeof B.options.container=="string"?B.container=document.querySelector(B.options.container):B.container=B.options.container;if(!(B.container instanceof HTMLElement)){var W;return W=N.error("Container required for toolbar",B.options),y(B,W)}return B.container.classList.add("ql-toolbar"),B.controls=[],B.handlers={},Object.keys(B.options.handlers).forEach(function(G){B.addHandler(G,B.options.handlers[G])}),[].forEach.call(B.container.querySelectorAll("button, select"),function(G){B.attach(G)}),B.quill.on(f.default.events.EDITOR_CHANGE,function(G,q){G===f.default.events.SELECTION_CHANGE&&B.update(q)}),B.quill.on(f.default.events.SCROLL_OPTIMIZE,function(){var G=B.quill.selection.getRange(),q=o(G,1),V=q[0];B.update(V)}),B}return s(x,[{key:"addHandler",value:function(L,B){this.handlers[L]=B}},{key:"attach",value:function(L){var B=this,H=[].find.call(L.classList,function(G){return G.indexOf("ql-")===0});if(H){if(H=H.slice(3),L.tagName==="BUTTON"&&L.setAttribute("type","button"),this.handlers[H]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[H]==null){N.warn("ignoring attaching to disabled format",H,L);return}if(d.default.query(H)==null){N.warn("ignoring attaching to nonexistent format",H,L);return}}var W=L.tagName==="SELECT"?"change":"click";L.addEventListener(W,function(G){var q=void 0;if(L.tagName==="SELECT"){if(L.selectedIndex<0)return;var V=L.options[L.selectedIndex];V.hasAttribute("selected")?q=!1:q=V.value||!1}else L.classList.contains("ql-active")?q=!1:q=L.value||!L.hasAttribute("value"),G.preventDefault();B.quill.focus();var C=B.quill.selection.getRange(),M=o(C,1),U=M[0];if(B.handlers[H]!=null)B.handlers[H].call(B,q);else if(d.default.query(H).prototype instanceof d.default.Embed){if(q=prompt("Enter "+H),!q)return;B.quill.updateContents(new l.default().retain(U.index).delete(U.length).insert(p({},H,q)),f.default.sources.USER)}else B.quill.format(H,q,f.default.sources.USER);B.update(U)}),this.controls.push([H,L])}}},{key:"update",value:function(L){var B=L==null?{}:this.quill.getFormat(L);this.controls.forEach(function(H){var W=o(H,2),G=W[0],q=W[1];if(q.tagName==="SELECT"){var V=void 0;if(L==null)V=null;else if(B[G]==null)V=q.querySelector("option[selected]");else if(!Array.isArray(B[G])){var C=B[G];typeof C=="string"&&(C=C.replace(/\"/g,'\\"')),V=q.querySelector('option[value="'+C+'"]')}V==null?(q.value="",q.selectedIndex=-1):V.selected=!0}else if(L==null)q.classList.remove("ql-active");else if(q.hasAttribute("value")){var M=B[G]===q.getAttribute("value")||B[G]!=null&&B[G].toString()===q.getAttribute("value")||B[G]==null&&!q.getAttribute("value");q.classList.toggle("ql-active",M)}else q.classList.toggle("ql-active",B[G]!=null)})}}]),x}(E.default);S.DEFAULTS={};function T(I,x,O){var L=document.createElement("button");L.setAttribute("type","button"),L.classList.add("ql-"+x),O!=null&&(L.value=O),I.appendChild(L)}function P(I,x){Array.isArray(x[0])||(x=[x]),x.forEach(function(O){var L=document.createElement("span");L.classList.add("ql-formats"),O.forEach(function(B){if(typeof B=="string")T(L,B);else{var H=Object.keys(B)[0],W=B[H];Array.isArray(W)?b(L,H,W):T(L,H,W)}}),I.appendChild(L)})}function b(I,x,O){var L=document.createElement("select");L.classList.add("ql-"+x),O.forEach(function(B){var H=document.createElement("option");B!==!1?H.setAttribute("value",B):H.setAttribute("selected","selected"),L.appendChild(H)}),I.appendChild(L)}S.DEFAULTS={container:null,handlers:{clean:function(){var x=this,O=this.quill.getSelection();if(O!=null)if(O.length==0){var L=this.quill.getFormat();Object.keys(L).forEach(function(B){d.default.query(B,d.default.Scope.INLINE)!=null&&x.quill.format(B,!1)})}else this.quill.removeFormat(O,f.default.sources.USER)},direction:function(x){var O=this.quill.getFormat().align;x==="rtl"&&O==null?this.quill.format("align","right",f.default.sources.USER):!x&&O==="right"&&this.quill.format("align",!1,f.default.sources.USER),this.quill.format("direction",x,f.default.sources.USER)},indent:function(x){var O=this.quill.getSelection(),L=this.quill.getFormat(O),B=parseInt(L.indent||0);if(x==="+1"||x==="-1"){var H=x==="+1"?1:-1;L.direction==="rtl"&&(H*=-1),this.quill.format("indent",B+H,f.default.sources.USER)}},link:function(x){x===!0&&(x=prompt("Enter link URL:")),this.quill.format("link",x,f.default.sources.USER)},list:function(x){var O=this.quill.getSelection(),L=this.quill.getFormat(O);x==="check"?L.list==="checked"||L.list==="unchecked"?this.quill.format("list",!1,f.default.sources.USER):this.quill.format("list","unchecked",f.default.sources.USER):this.quill.format("list",x,f.default.sources.USER)}}},r.default=S,r.addControls=P},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function w(_,E){for(var g=0;g<E.length;g++){var p=E[g];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(_,p.key,p)}}return function(_,E,g){return E&&w(_.prototype,E),g&&w(_,g),_}}(),s=function w(_,E,g){_===null&&(_=Function.prototype);var p=Object.getOwnPropertyDescriptor(_,E);if(p===void 0){var v=Object.getPrototypeOf(_);return v===null?void 0:w(v,E,g)}else{if("value"in p)return p.value;var y=p.get;return y===void 0?void 0:y.call(g)}},a=i(28),l=c(a);function c(w){return w&&w.__esModule?w:{default:w}}function d(w,_){if(!(w instanceof _))throw new TypeError("Cannot call a class as a function")}function h(w,_){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:w}function f(w,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);w.prototype=Object.create(_&&_.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(w,_):w.__proto__=_)}var m=function(w){f(_,w);function _(E,g){d(this,_);var p=h(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,E));return p.label.innerHTML=g,p.container.classList.add("ql-color-picker"),[].slice.call(p.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(v){v.classList.add("ql-primary")}),p}return o(_,[{key:"buildItem",value:function(g){var p=s(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"buildItem",this).call(this,g);return p.style.backgroundColor=g.getAttribute("value")||"",p}},{key:"selectItem",value:function(g,p){s(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"selectItem",this).call(this,g,p);var v=this.label.querySelector(".ql-color-label"),y=g&&g.getAttribute("data-value")||"";v&&(v.tagName==="line"?v.style.stroke=y:v.style.fill=y)}}]),_}(l.default);r.default=m},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function w(_,E){for(var g=0;g<E.length;g++){var p=E[g];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(_,p.key,p)}}return function(_,E,g){return E&&w(_.prototype,E),g&&w(_,g),_}}(),s=function w(_,E,g){_===null&&(_=Function.prototype);var p=Object.getOwnPropertyDescriptor(_,E);if(p===void 0){var v=Object.getPrototypeOf(_);return v===null?void 0:w(v,E,g)}else{if("value"in p)return p.value;var y=p.get;return y===void 0?void 0:y.call(g)}},a=i(28),l=c(a);function c(w){return w&&w.__esModule?w:{default:w}}function d(w,_){if(!(w instanceof _))throw new TypeError("Cannot call a class as a function")}function h(w,_){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:w}function f(w,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);w.prototype=Object.create(_&&_.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(w,_):w.__proto__=_)}var m=function(w){f(_,w);function _(E,g){d(this,_);var p=h(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,E));return p.container.classList.add("ql-icon-picker"),[].forEach.call(p.container.querySelectorAll(".ql-picker-item"),function(v){v.innerHTML=g[v.getAttribute("data-value")||""]}),p.defaultItem=p.container.querySelector(".ql-selected"),p.selectItem(p.defaultItem),p}return o(_,[{key:"selectItem",value:function(g,p){s(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"selectItem",this).call(this,g,p),g=g||this.defaultItem,this.label.innerHTML=g.innerHTML}}]),_}(l.default);r.default=m},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function l(c,d){for(var h=0;h<d.length;h++){var f=d[h];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}return function(c,d,h){return d&&l(c.prototype,d),h&&l(c,h),c}}();function s(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")}var a=function(){function l(c,d){var h=this;s(this,l),this.quill=c,this.boundsContainer=d||document.body,this.root=c.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){h.root.style.marginTop=-1*h.quill.root.scrollTop+"px"}),this.hide()}return o(l,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(d){var h=d.left+d.width/2-this.root.offsetWidth/2,f=d.bottom+this.quill.root.scrollTop;this.root.style.left=h+"px",this.root.style.top=f+"px",this.root.classList.remove("ql-flip");var m=this.boundsContainer.getBoundingClientRect(),w=this.root.getBoundingClientRect(),_=0;if(w.right>m.right&&(_=m.right-w.right,this.root.style.left=h+_+"px"),w.left<m.left&&(_=m.left-w.left,this.root.style.left=h+_+"px"),w.bottom>m.bottom){var E=w.bottom-w.top,g=d.bottom-d.top+E;this.root.style.top=f-g+"px",this.root.classList.add("ql-flip")}return _}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),l}();r.default=a},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function b(I,x){var O=[],L=!0,B=!1,H=void 0;try{for(var W=I[Symbol.iterator](),G;!(L=(G=W.next()).done)&&(O.push(G.value),!(x&&O.length===x));L=!0);}catch(q){B=!0,H=q}finally{try{!L&&W.return&&W.return()}finally{if(B)throw H}}return O}return function(I,x){if(Array.isArray(I))return I;if(Symbol.iterator in Object(I))return b(I,x);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function b(I,x,O){I===null&&(I=Function.prototype);var L=Object.getOwnPropertyDescriptor(I,x);if(L===void 0){var B=Object.getPrototypeOf(I);return B===null?void 0:b(B,x,O)}else{if("value"in L)return L.value;var H=L.get;return H===void 0?void 0:H.call(O)}},a=function(){function b(I,x){for(var O=0;O<x.length;O++){var L=x[O];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(I,L.key,L)}}return function(I,x,O){return x&&b(I.prototype,x),O&&b(I,O),I}}(),l=i(3),c=v(l),d=i(8),h=v(d),f=i(43),m=v(f),w=i(27),_=v(w),E=i(15),g=i(41),p=v(g);function v(b){return b&&b.__esModule?b:{default:b}}function y(b,I){if(!(b instanceof I))throw new TypeError("Cannot call a class as a function")}function k(b,I){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I&&(typeof I=="object"||typeof I=="function")?I:b}function N(b,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof I);b.prototype=Object.create(I&&I.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(b,I):b.__proto__=I)}var S=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],T=function(b){N(I,b);function I(x,O){y(this,I),O.modules.toolbar!=null&&O.modules.toolbar.container==null&&(O.modules.toolbar.container=S);var L=k(this,(I.__proto__||Object.getPrototypeOf(I)).call(this,x,O));return L.quill.container.classList.add("ql-snow"),L}return a(I,[{key:"extendToolbar",value:function(O){O.container.classList.add("ql-snow"),this.buildButtons([].slice.call(O.container.querySelectorAll("button")),p.default),this.buildPickers([].slice.call(O.container.querySelectorAll("select")),p.default),this.tooltip=new P(this.quill,this.options.bounds),O.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(L,B){O.handlers.link.call(O,!B.format.link)})}}]),I}(m.default);T.DEFAULTS=(0,c.default)(!0,{},m.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(I){if(I){var x=this.quill.getSelection();if(x==null||x.length==0)return;var O=this.quill.getText(x);/^\S+@\S+\.\S+$/.test(O)&&O.indexOf("mailto:")!==0&&(O="mailto:"+O);var L=this.quill.theme.tooltip;L.edit("link",O)}else this.quill.format("link",!1)}}}}});var P=function(b){N(I,b);function I(x,O){y(this,I);var L=k(this,(I.__proto__||Object.getPrototypeOf(I)).call(this,x,O));return L.preview=L.root.querySelector("a.ql-preview"),L}return a(I,[{key:"listen",value:function(){var O=this;s(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(L){O.root.classList.contains("ql-editing")?O.save():O.edit("link",O.preview.textContent),L.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(L){if(O.linkRange!=null){var B=O.linkRange;O.restoreFocus(),O.quill.formatText(B,"link",!1,h.default.sources.USER),delete O.linkRange}L.preventDefault(),O.hide()}),this.quill.on(h.default.events.SELECTION_CHANGE,function(L,B,H){if(L!=null){if(L.length===0&&H===h.default.sources.USER){var W=O.quill.scroll.descendant(_.default,L.index),G=o(W,2),q=G[0],V=G[1];if(q!=null){O.linkRange=new E.Range(L.index-V,q.length());var C=_.default.formats(q.domNode);O.preview.textContent=C,O.preview.setAttribute("href",C),O.show(),O.position(O.quill.getBounds(O.linkRange));return}}else delete O.linkRange;O.hide()}})}},{key:"show",value:function(){s(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),I}(f.BaseTooltip);P.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),r.default=T},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(29),s=ie(o),a=i(36),l=i(38),c=i(64),d=i(65),h=ie(d),f=i(66),m=ie(f),w=i(67),_=ie(w),E=i(37),g=i(26),p=i(39),v=i(40),y=i(56),k=ie(y),N=i(68),S=ie(N),T=i(27),P=ie(T),b=i(69),I=ie(b),x=i(70),O=ie(x),L=i(71),B=ie(L),H=i(72),W=ie(H),G=i(73),q=ie(G),V=i(13),C=ie(V),M=i(74),U=ie(M),K=i(75),z=ie(K),j=i(57),$=ie(j),Y=i(41),X=ie(Y),ne=i(28),Z=ie(ne),ue=i(59),me=ie(ue),we=i(60),Se=ie(we),mt=i(61),nt=ie(mt),ee=i(108),te=ie(ee),le=i(62),ce=ie(le);function ie(Te){return Te&&Te.__esModule?Te:{default:Te}}s.default.register({"attributors/attribute/direction":l.DirectionAttribute,"attributors/class/align":a.AlignClass,"attributors/class/background":E.BackgroundClass,"attributors/class/color":g.ColorClass,"attributors/class/direction":l.DirectionClass,"attributors/class/font":p.FontClass,"attributors/class/size":v.SizeClass,"attributors/style/align":a.AlignStyle,"attributors/style/background":E.BackgroundStyle,"attributors/style/color":g.ColorStyle,"attributors/style/direction":l.DirectionStyle,"attributors/style/font":p.FontStyle,"attributors/style/size":v.SizeStyle},!0),s.default.register({"formats/align":a.AlignClass,"formats/direction":l.DirectionClass,"formats/indent":c.IndentClass,"formats/background":E.BackgroundStyle,"formats/color":g.ColorStyle,"formats/font":p.FontClass,"formats/size":v.SizeClass,"formats/blockquote":h.default,"formats/code-block":C.default,"formats/header":m.default,"formats/list":_.default,"formats/bold":k.default,"formats/code":V.Code,"formats/italic":S.default,"formats/link":P.default,"formats/script":I.default,"formats/strike":O.default,"formats/underline":B.default,"formats/image":W.default,"formats/video":q.default,"formats/list/item":w.ListItem,"modules/formula":U.default,"modules/syntax":z.default,"modules/toolbar":$.default,"themes/bubble":te.default,"themes/snow":ce.default,"ui/icons":X.default,"ui/picker":Z.default,"ui/icon-picker":Se.default,"ui/color-picker":me.default,"ui/tooltip":nt.default},!0),r.default=s.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.IndentClass=void 0;var o=function(){function _(E,g){for(var p=0;p<g.length;p++){var v=g[p];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(E,v.key,v)}}return function(E,g,p){return g&&_(E.prototype,g),p&&_(E,p),E}}(),s=function _(E,g,p){E===null&&(E=Function.prototype);var v=Object.getOwnPropertyDescriptor(E,g);if(v===void 0){var y=Object.getPrototypeOf(E);return y===null?void 0:_(y,g,p)}else{if("value"in v)return v.value;var k=v.get;return k===void 0?void 0:k.call(p)}},a=i(0),l=c(a);function c(_){return _&&_.__esModule?_:{default:_}}function d(_,E){if(!(_ instanceof E))throw new TypeError("Cannot call a class as a function")}function h(_,E){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:_}function f(_,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);_.prototype=Object.create(E&&E.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(_,E):_.__proto__=E)}var m=function(_){f(E,_);function E(){return d(this,E),h(this,(E.__proto__||Object.getPrototypeOf(E)).apply(this,arguments))}return o(E,[{key:"add",value:function(p,v){if(v==="+1"||v==="-1"){var y=this.value(p)||0;v=v==="+1"?y+1:y-1}return v===0?(this.remove(p),!0):s(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"add",this).call(this,p,v)}},{key:"canAdd",value:function(p,v){return s(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"canAdd",this).call(this,p,v)||s(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"canAdd",this).call(this,p,parseInt(v))}},{key:"value",value:function(p){return parseInt(s(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"value",this).call(this,p))||void 0}}]),E}(l.default.Attributor.Class),w=new m("indent","ql-indent",{scope:l.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});r.IndentClass=w},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(4),s=a(o);function a(f){return f&&f.__esModule?f:{default:f}}function l(f,m){if(!(f instanceof m))throw new TypeError("Cannot call a class as a function")}function c(f,m){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:f}function d(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(f,m):f.__proto__=m)}var h=function(f){d(m,f);function m(){return l(this,m),c(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return m}(s.default);h.blotName="blockquote",h.tagName="blockquote",r.default=h},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function m(w,_){for(var E=0;E<_.length;E++){var g=_[E];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(w,g.key,g)}}return function(w,_,E){return _&&m(w.prototype,_),E&&m(w,E),w}}(),s=i(4),a=l(s);function l(m){return m&&m.__esModule?m:{default:m}}function c(m,w){if(!(m instanceof w))throw new TypeError("Cannot call a class as a function")}function d(m,w){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:m}function h(m,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);m.prototype=Object.create(w&&w.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(m,w):m.__proto__=w)}var f=function(m){h(w,m);function w(){return c(this,w),d(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return o(w,null,[{key:"formats",value:function(E){return this.tagName.indexOf(E.tagName)+1}}]),w}(a.default);f.blotName="header",f.tagName=["H1","H2","H3","H4","H5","H6"],r.default=f},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.ListItem=void 0;var o=function(){function y(k,N){for(var S=0;S<N.length;S++){var T=N[S];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(k,T.key,T)}}return function(k,N,S){return N&&y(k.prototype,N),S&&y(k,S),k}}(),s=function y(k,N,S){k===null&&(k=Function.prototype);var T=Object.getOwnPropertyDescriptor(k,N);if(T===void 0){var P=Object.getPrototypeOf(k);return P===null?void 0:y(P,N,S)}else{if("value"in T)return T.value;var b=T.get;return b===void 0?void 0:b.call(S)}},a=i(0),l=m(a),c=i(4),d=m(c),h=i(25),f=m(h);function m(y){return y&&y.__esModule?y:{default:y}}function w(y,k,N){return k in y?Object.defineProperty(y,k,{value:N,enumerable:!0,configurable:!0,writable:!0}):y[k]=N,y}function _(y,k){if(!(y instanceof k))throw new TypeError("Cannot call a class as a function")}function E(y,k){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:y}function g(y,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);y.prototype=Object.create(k&&k.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(y,k):y.__proto__=k)}var p=function(y){g(k,y);function k(){return _(this,k),E(this,(k.__proto__||Object.getPrototypeOf(k)).apply(this,arguments))}return o(k,[{key:"format",value:function(S,T){S===v.blotName&&!T?this.replaceWith(l.default.create(this.statics.scope)):s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"format",this).call(this,S,T)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(S,T){return this.parent.isolate(this.offset(this.parent),this.length()),S===this.parent.statics.blotName?(this.parent.replaceWith(S,T),this):(this.parent.unwrap(),s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"replaceWith",this).call(this,S,T))}}],[{key:"formats",value:function(S){return S.tagName===this.tagName?void 0:s(k.__proto__||Object.getPrototypeOf(k),"formats",this).call(this,S)}}]),k}(d.default);p.blotName="list-item",p.tagName="LI";var v=function(y){g(k,y),o(k,null,[{key:"create",value:function(S){var T=S==="ordered"?"OL":"UL",P=s(k.__proto__||Object.getPrototypeOf(k),"create",this).call(this,T);return(S==="checked"||S==="unchecked")&&P.setAttribute("data-checked",S==="checked"),P}},{key:"formats",value:function(S){if(S.tagName==="OL")return"ordered";if(S.tagName==="UL")return S.hasAttribute("data-checked")?S.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function k(N){_(this,k);var S=E(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,N)),T=function(b){if(b.target.parentNode===N){var I=S.statics.formats(N),x=l.default.find(b.target);I==="checked"?x.format("list","unchecked"):I==="unchecked"&&x.format("list","checked")}};return N.addEventListener("touchstart",T),N.addEventListener("mousedown",T),S}return o(k,[{key:"format",value:function(S,T){this.children.length>0&&this.children.tail.format(S,T)}},{key:"formats",value:function(){return w({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(S,T){if(S instanceof p)s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"insertBefore",this).call(this,S,T);else{var P=T==null?this.length():T.offset(this),b=this.split(P);b.parent.insertBefore(S,b)}}},{key:"optimize",value:function(S){s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"optimize",this).call(this,S);var T=this.next;T!=null&&T.prev===this&&T.statics.blotName===this.statics.blotName&&T.domNode.tagName===this.domNode.tagName&&T.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(T.moveChildren(this),T.remove())}},{key:"replace",value:function(S){if(S.statics.blotName!==this.statics.blotName){var T=l.default.create(this.statics.defaultChild);S.moveChildren(T),this.appendChild(T)}s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"replace",this).call(this,S)}}]),k}(f.default);v.blotName="list",v.scope=l.default.Scope.BLOCK_BLOT,v.tagName=["OL","UL"],v.defaultChild="list-item",v.allowedChildren=[p],r.ListItem=p,r.default=v},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(56),s=a(o);function a(f){return f&&f.__esModule?f:{default:f}}function l(f,m){if(!(f instanceof m))throw new TypeError("Cannot call a class as a function")}function c(f,m){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:f}function d(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(f,m):f.__proto__=m)}var h=function(f){d(m,f);function m(){return l(this,m),c(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return m}(s.default);h.blotName="italic",h.tagName=["EM","I"],r.default=h},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function w(_,E){for(var g=0;g<E.length;g++){var p=E[g];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(_,p.key,p)}}return function(_,E,g){return E&&w(_.prototype,E),g&&w(_,g),_}}(),s=function w(_,E,g){_===null&&(_=Function.prototype);var p=Object.getOwnPropertyDescriptor(_,E);if(p===void 0){var v=Object.getPrototypeOf(_);return v===null?void 0:w(v,E,g)}else{if("value"in p)return p.value;var y=p.get;return y===void 0?void 0:y.call(g)}},a=i(6),l=c(a);function c(w){return w&&w.__esModule?w:{default:w}}function d(w,_){if(!(w instanceof _))throw new TypeError("Cannot call a class as a function")}function h(w,_){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:w}function f(w,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);w.prototype=Object.create(_&&_.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(w,_):w.__proto__=_)}var m=function(w){f(_,w);function _(){return d(this,_),h(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return o(_,null,[{key:"create",value:function(g){return g==="super"?document.createElement("sup"):g==="sub"?document.createElement("sub"):s(_.__proto__||Object.getPrototypeOf(_),"create",this).call(this,g)}},{key:"formats",value:function(g){if(g.tagName==="SUB")return"sub";if(g.tagName==="SUP")return"super"}}]),_}(l.default);m.blotName="script",m.tagName=["SUB","SUP"],r.default=m},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(6),s=a(o);function a(f){return f&&f.__esModule?f:{default:f}}function l(f,m){if(!(f instanceof m))throw new TypeError("Cannot call a class as a function")}function c(f,m){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:f}function d(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(f,m):f.__proto__=m)}var h=function(f){d(m,f);function m(){return l(this,m),c(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return m}(s.default);h.blotName="strike",h.tagName="S",r.default=h},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(6),s=a(o);function a(f){return f&&f.__esModule?f:{default:f}}function l(f,m){if(!(f instanceof m))throw new TypeError("Cannot call a class as a function")}function c(f,m){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:f}function d(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(f,m):f.__proto__=m)}var h=function(f){d(m,f);function m(){return l(this,m),c(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return m}(s.default);h.blotName="underline",h.tagName="U",r.default=h},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function E(g,p){for(var v=0;v<p.length;v++){var y=p[v];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(g,y.key,y)}}return function(g,p,v){return p&&E(g.prototype,p),v&&E(g,v),g}}(),s=function E(g,p,v){g===null&&(g=Function.prototype);var y=Object.getOwnPropertyDescriptor(g,p);if(y===void 0){var k=Object.getPrototypeOf(g);return k===null?void 0:E(k,p,v)}else{if("value"in y)return y.value;var N=y.get;return N===void 0?void 0:N.call(v)}},a=i(0),l=d(a),c=i(27);function d(E){return E&&E.__esModule?E:{default:E}}function h(E,g){if(!(E instanceof g))throw new TypeError("Cannot call a class as a function")}function f(E,g){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:E}function m(E,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);E.prototype=Object.create(g&&g.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(E,g):E.__proto__=g)}var w=["alt","height","width"],_=function(E){m(g,E);function g(){return h(this,g),f(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return o(g,[{key:"format",value:function(v,y){w.indexOf(v)>-1?y?this.domNode.setAttribute(v,y):this.domNode.removeAttribute(v):s(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"format",this).call(this,v,y)}}],[{key:"create",value:function(v){var y=s(g.__proto__||Object.getPrototypeOf(g),"create",this).call(this,v);return typeof v=="string"&&y.setAttribute("src",this.sanitize(v)),y}},{key:"formats",value:function(v){return w.reduce(function(y,k){return v.hasAttribute(k)&&(y[k]=v.getAttribute(k)),y},{})}},{key:"match",value:function(v){return/\.(jpe?g|gif|png)$/.test(v)||/^data:image\/.+;base64/.test(v)}},{key:"sanitize",value:function(v){return(0,c.sanitize)(v,["http","https","data"])?v:"//:0"}},{key:"value",value:function(v){return v.getAttribute("src")}}]),g}(l.default.Embed);_.blotName="image",_.tagName="IMG",r.default=_},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function E(g,p){for(var v=0;v<p.length;v++){var y=p[v];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(g,y.key,y)}}return function(g,p,v){return p&&E(g.prototype,p),v&&E(g,v),g}}(),s=function E(g,p,v){g===null&&(g=Function.prototype);var y=Object.getOwnPropertyDescriptor(g,p);if(y===void 0){var k=Object.getPrototypeOf(g);return k===null?void 0:E(k,p,v)}else{if("value"in y)return y.value;var N=y.get;return N===void 0?void 0:N.call(v)}},a=i(4),l=i(27),c=d(l);function d(E){return E&&E.__esModule?E:{default:E}}function h(E,g){if(!(E instanceof g))throw new TypeError("Cannot call a class as a function")}function f(E,g){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:E}function m(E,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);E.prototype=Object.create(g&&g.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(E,g):E.__proto__=g)}var w=["height","width"],_=function(E){m(g,E);function g(){return h(this,g),f(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return o(g,[{key:"format",value:function(v,y){w.indexOf(v)>-1?y?this.domNode.setAttribute(v,y):this.domNode.removeAttribute(v):s(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"format",this).call(this,v,y)}}],[{key:"create",value:function(v){var y=s(g.__proto__||Object.getPrototypeOf(g),"create",this).call(this,v);return y.setAttribute("frameborder","0"),y.setAttribute("allowfullscreen",!0),y.setAttribute("src",this.sanitize(v)),y}},{key:"formats",value:function(v){return w.reduce(function(y,k){return v.hasAttribute(k)&&(y[k]=v.getAttribute(k)),y},{})}},{key:"sanitize",value:function(v){return c.default.sanitize(v)}},{key:"value",value:function(v){return v.getAttribute("src")}}]),g}(a.BlockEmbed);_.blotName="video",_.className="ql-video",_.tagName="IFRAME",r.default=_},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.FormulaBlot=void 0;var o=function(){function v(y,k){for(var N=0;N<k.length;N++){var S=k[N];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(y,S.key,S)}}return function(y,k,N){return k&&v(y.prototype,k),N&&v(y,N),y}}(),s=function v(y,k,N){y===null&&(y=Function.prototype);var S=Object.getOwnPropertyDescriptor(y,k);if(S===void 0){var T=Object.getPrototypeOf(y);return T===null?void 0:v(T,k,N)}else{if("value"in S)return S.value;var P=S.get;return P===void 0?void 0:P.call(N)}},a=i(35),l=m(a),c=i(5),d=m(c),h=i(9),f=m(h);function m(v){return v&&v.__esModule?v:{default:v}}function w(v,y){if(!(v instanceof y))throw new TypeError("Cannot call a class as a function")}function _(v,y){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:v}function E(v,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);v.prototype=Object.create(y&&y.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(v,y):v.__proto__=y)}var g=function(v){E(y,v);function y(){return w(this,y),_(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return o(y,null,[{key:"create",value:function(N){var S=s(y.__proto__||Object.getPrototypeOf(y),"create",this).call(this,N);return typeof N=="string"&&(window.katex.render(N,S,{throwOnError:!1,errorColor:"#f00"}),S.setAttribute("data-value",N)),S}},{key:"value",value:function(N){return N.getAttribute("data-value")}}]),y}(l.default);g.blotName="formula",g.className="ql-formula",g.tagName="SPAN";var p=function(v){E(y,v),o(y,null,[{key:"register",value:function(){d.default.register(g,!0)}}]);function y(){w(this,y);var k=_(this,(y.__proto__||Object.getPrototypeOf(y)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return k}return y}(f.default);r.FormulaBlot=g,r.default=p},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.CodeToken=r.CodeBlock=void 0;var o=function(){function N(S,T){for(var P=0;P<T.length;P++){var b=T[P];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(S,b.key,b)}}return function(S,T,P){return T&&N(S.prototype,T),P&&N(S,P),S}}(),s=function N(S,T,P){S===null&&(S=Function.prototype);var b=Object.getOwnPropertyDescriptor(S,T);if(b===void 0){var I=Object.getPrototypeOf(S);return I===null?void 0:N(I,T,P)}else{if("value"in b)return b.value;var x=b.get;return x===void 0?void 0:x.call(P)}},a=i(0),l=_(a),c=i(5),d=_(c),h=i(9),f=_(h),m=i(13),w=_(m);function _(N){return N&&N.__esModule?N:{default:N}}function E(N,S){if(!(N instanceof S))throw new TypeError("Cannot call a class as a function")}function g(N,S){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:N}function p(N,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);N.prototype=Object.create(S&&S.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(N,S):N.__proto__=S)}var v=function(N){p(S,N);function S(){return E(this,S),g(this,(S.__proto__||Object.getPrototypeOf(S)).apply(this,arguments))}return o(S,[{key:"replaceWith",value:function(P){this.domNode.textContent=this.domNode.textContent,this.attach(),s(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"replaceWith",this).call(this,P)}},{key:"highlight",value:function(P){var b=this.domNode.textContent;this.cachedText!==b&&((b.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=P(b),this.domNode.normalize(),this.attach()),this.cachedText=b)}}]),S}(w.default);v.className="ql-syntax";var y=new l.default.Attributor.Class("token","hljs",{scope:l.default.Scope.INLINE}),k=function(N){p(S,N),o(S,null,[{key:"register",value:function(){d.default.register(y,!0),d.default.register(v,!0)}}]);function S(T,P){E(this,S);var b=g(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,T,P));if(typeof b.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var I=null;return b.quill.on(d.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(I),I=setTimeout(function(){b.highlight(),I=null},b.options.interval)}),b.highlight(),b}return o(S,[{key:"highlight",value:function(){var P=this;if(!this.quill.selection.composing){this.quill.update(d.default.sources.USER);var b=this.quill.getSelection();this.quill.scroll.descendants(v).forEach(function(I){I.highlight(P.options.highlight)}),this.quill.update(d.default.sources.SILENT),b!=null&&this.quill.setSelection(b,d.default.sources.SILENT)}}}]),S}(f.default);k.DEFAULTS={highlight:function(){return window.hljs==null?null:function(N){var S=window.hljs.highlightAuto(N);return S.value}}(),interval:1e3},r.CodeBlock=v,r.CodeToken=y,r.default=k},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(n,r){n.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(n,r){n.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(n,r){n.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(n,r){n.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BubbleTooltip=void 0;var o=function S(T,P,b){T===null&&(T=Function.prototype);var I=Object.getOwnPropertyDescriptor(T,P);if(I===void 0){var x=Object.getPrototypeOf(T);return x===null?void 0:S(x,P,b)}else{if("value"in I)return I.value;var O=I.get;return O===void 0?void 0:O.call(b)}},s=function(){function S(T,P){for(var b=0;b<P.length;b++){var I=P[b];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(T,I.key,I)}}return function(T,P,b){return P&&S(T.prototype,P),b&&S(T,b),T}}(),a=i(3),l=E(a),c=i(8),d=E(c),h=i(43),f=E(h),m=i(15),w=i(41),_=E(w);function E(S){return S&&S.__esModule?S:{default:S}}function g(S,T){if(!(S instanceof T))throw new TypeError("Cannot call a class as a function")}function p(S,T){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:S}function v(S,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);S.prototype=Object.create(T&&T.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(S,T):S.__proto__=T)}var y=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],k=function(S){v(T,S);function T(P,b){g(this,T),b.modules.toolbar!=null&&b.modules.toolbar.container==null&&(b.modules.toolbar.container=y);var I=p(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,P,b));return I.quill.container.classList.add("ql-bubble"),I}return s(T,[{key:"extendToolbar",value:function(b){this.tooltip=new N(this.quill,this.options.bounds),this.tooltip.root.appendChild(b.container),this.buildButtons([].slice.call(b.container.querySelectorAll("button")),_.default),this.buildPickers([].slice.call(b.container.querySelectorAll("select")),_.default)}}]),T}(f.default);k.DEFAULTS=(0,l.default)(!0,{},f.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(T){T?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var N=function(S){v(T,S);function T(P,b){g(this,T);var I=p(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,P,b));return I.quill.on(d.default.events.EDITOR_CHANGE,function(x,O,L,B){if(x===d.default.events.SELECTION_CHANGE)if(O!=null&&O.length>0&&B===d.default.sources.USER){I.show(),I.root.style.left="0px",I.root.style.width="",I.root.style.width=I.root.offsetWidth+"px";var H=I.quill.getLines(O.index,O.length);if(H.length===1)I.position(I.quill.getBounds(O));else{var W=H[H.length-1],G=I.quill.getIndex(W),q=Math.min(W.length()-1,O.index+O.length-G),V=I.quill.getBounds(new m.Range(G,q));I.position(V)}}else document.activeElement!==I.textbox&&I.quill.hasFocus()&&I.hide()}),I}return s(T,[{key:"listen",value:function(){var b=this;o(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){b.root.classList.remove("ql-editing")}),this.quill.on(d.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!b.root.classList.contains("ql-hidden")){var I=b.quill.getSelection();I!=null&&b.position(b.quill.getBounds(I))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(b){var I=o(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"position",this).call(this,b),x=this.root.querySelector(".ql-tooltip-arrow");if(x.style.marginLeft="",I===0)return I;x.style.marginLeft=-1*I-x.offsetWidth/2+"px"}}]),T}(h.BaseTooltip);N.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),r.BubbleTooltip=N,r.default=k},function(n,r,i){n.exports=i(63)}]).default})})(kw);var wM=kw.exports,TM=Yt&&Yt.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),vu=Yt&&Yt.__assign||function(){return vu=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},vu.apply(this,arguments)},bM=Yt&&Yt.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r},ac=Yt&&Yt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},In=ac(de),IM=ac(U0),rs=ac(EM),Sv=ac(wM),AM=function(t){TM(e,t);function e(n){var r=t.call(this,n)||this;r.dirtyProps=["modules","formats","bounds","theme","children"],r.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],r.state={generation:0},r.selection=null,r.onEditorChange=function(o,s,a,l){var c,d,h,f;o==="text-change"?(d=(c=r).onEditorChangeText)===null||d===void 0||d.call(c,r.editor.root.innerHTML,s,l,r.unprivilegedEditor):o==="selection-change"&&((f=(h=r).onEditorChangeSelection)===null||f===void 0||f.call(h,s,l,r.unprivilegedEditor))};var i=r.isControlled()?n.value:n.defaultValue;return r.value=i??"",r}return e.prototype.validateProps=function(n){var r;if(In.default.Children.count(n.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(In.default.Children.count(n.children)){var i=In.default.Children.only(n.children);if(((r=i)===null||r===void 0?void 0:r.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&n.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},e.prototype.shouldComponentUpdate=function(n,r){var i=this,o;if(this.validateProps(n),!this.editor||this.state.generation!==r.generation)return!0;if("value"in n){var s=this.getEditorContents(),a=(o=n.value,o??"");this.isEqualValue(a,s)||this.setEditorContents(this.editor,a)}return n.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,n.readOnly),bM(this.cleanProps,this.dirtyProps).some(function(l){return!rs.default(n[l],i.props[l])})},e.prototype.shouldComponentRegenerate=function(n){var r=this;return this.dirtyProps.some(function(i){return!rs.default(n[i],r.props[i])})},e.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},e.prototype.componentWillUnmount=function(){this.destroyEditor()},e.prototype.componentDidUpdate=function(n,r){var i=this;if(this.editor&&this.shouldComponentRegenerate(n)){var o=this.editor.getContents(),s=this.editor.getSelection();this.regenerationSnapshot={delta:o,selection:s},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==r.generation){var a=this.regenerationSnapshot,o=a.delta,l=a.selection;delete this.regenerationSnapshot,this.instantiateEditor();var c=this.editor;c.setContents(o),kv(function(){return i.setEditorSelection(c,l)})}},e.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},e.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},e.prototype.isControlled=function(){return"value"in this.props},e.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},e.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},e.prototype.createEditor=function(n,r){var i=new Sv.default(n,r);return r.tabIndex!=null&&this.setEditorTabIndex(i,r.tabIndex),this.hookEditor(i),i},e.prototype.hookEditor=function(n){this.unprivilegedEditor=this.makeUnprivilegedEditor(n),n.on("editor-change",this.onEditorChange)},e.prototype.unhookEditor=function(n){n.off("editor-change",this.onEditorChange)},e.prototype.getEditorContents=function(){return this.value},e.prototype.getEditorSelection=function(){return this.selection},e.prototype.isDelta=function(n){return n&&n.ops},e.prototype.isEqualValue=function(n,r){return this.isDelta(n)&&this.isDelta(r)?rs.default(n.ops,r.ops):rs.default(n,r)},e.prototype.setEditorContents=function(n,r){var i=this;this.value=r;var o=this.getEditorSelection();typeof r=="string"?n.setContents(n.clipboard.convert(r)):n.setContents(r),kv(function(){return i.setEditorSelection(n,o)})},e.prototype.setEditorSelection=function(n,r){if(this.selection=r,r){var i=n.getLength();r.index=Math.max(0,Math.min(r.index,i-1)),r.length=Math.max(0,Math.min(r.length,i-1-r.index)),n.setSelection(r)}},e.prototype.setEditorTabIndex=function(n,r){var i,o;!((o=(i=n)===null||i===void 0?void 0:i.scroll)===null||o===void 0)&&o.domNode&&(n.scroll.domNode.tabIndex=r)},e.prototype.setEditorReadOnly=function(n,r){r?n.disable():n.enable()},e.prototype.makeUnprivilegedEditor=function(n){var r=n;return{getHTML:function(){return r.root.innerHTML},getLength:r.getLength.bind(r),getText:r.getText.bind(r),getContents:r.getContents.bind(r),getSelection:r.getSelection.bind(r),getBounds:r.getBounds.bind(r)}},e.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var n=IM.default.findDOMNode(this.editingArea);if(!n)throw new Error("Cannot find element for editing area");if(n.nodeType===3)throw new Error("Editing area cannot be a text node");return n},e.prototype.renderEditingArea=function(){var n=this,r=this.props,i=r.children,o=r.preserveWhitespace,s=this.state.generation,a={key:s,ref:function(l){n.editingArea=l}};return In.default.Children.count(i)?In.default.cloneElement(In.default.Children.only(i),a):o?In.default.createElement("pre",vu({},a)):In.default.createElement("div",vu({},a))},e.prototype.render=function(){var n;return In.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(n=this.props.className,n??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},e.prototype.onEditorChangeText=function(n,r,i,o){var s,a;if(this.editor){var l=this.isDelta(this.value)?o.getContents():o.getHTML();l!==this.getEditorContents()&&(this.lastDeltaChangeSet=r,this.value=l,(a=(s=this.props).onChange)===null||a===void 0||a.call(s,n,r,i,o))}},e.prototype.onEditorChangeSelection=function(n,r,i){var o,s,a,l,c,d;if(this.editor){var h=this.getEditorSelection(),f=!h&&n,m=h&&!n;rs.default(n,h)||(this.selection=n,(s=(o=this.props).onChangeSelection)===null||s===void 0||s.call(o,n,r,i),f?(l=(a=this.props).onFocus)===null||l===void 0||l.call(a,n,r,i):m&&((d=(c=this.props).onBlur)===null||d===void 0||d.call(c,h,r,i)))}},e.prototype.focus=function(){this.editor&&this.editor.focus()},e.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},e.displayName="React Quill",e.Quill=Sv.default,e.defaultProps={theme:"snow",modules:{},readOnly:!1},e}(In.default.Component);function kv(t){Promise.resolve().then(t)}var SM=AM;const kM=eT(SM),PM=t=>{t||(t=0);const e=Math.floor(t/3600);return t%=3600,[e,Math.floor(t/60),t%60].map(n=>n<10?"0"+n:n).join(":")},xM=t=>{if(!t)return null;const e=new Date,n=t.toDate?t.toDate():new Date(t),r=n-e;if(r<0)return{text:"Overdue",isPast:!0};const i=r/36e5;return i<24?{text:`${Math.floor(i)}h ${Math.floor(i%1*60)}m left`,isPast:!1}:{text:`${Math.ceil(i/24)} days left`,isPast:!1}},Pw=({isOpen:t,onClose:e,task:n,columnId:r,userId:i,doneColumnId:o})=>{const[s,a]=de.useState(""),[l,c]=de.useState(""),[d,h]=de.useState("Medium"),[f,m]=de.useState(""),[w,_]=de.useState(""),[E,g]=de.useState([]),[p,v]=de.useState(""),[y,k]=de.useState(0),[N,S]=de.useState(!1),[T,P]=de.useState([]),[b,I]=de.useState(""),[x,O]=de.useState(!1),[L,B]=de.useState(!1),[H,W]=de.useState(!1),G={High:"bg-red-500",Medium:"bg-yellow-500",Low:"bg-blue-500"};de.useEffect(()=>{if(t&&(n!=null&&n.id)){const Z=et.onCommentsSnapshot(i,n.id,P);return()=>Z()}},[t,n==null?void 0:n.id,i]),de.useEffect(()=>{var Z;if(t){a(n?n.title:""),c(n&&n.description||""),h(n&&n.priority||"Medium"),m(n&&n.coverImage||""),g(n?n.checklist||[]:[]),S((n==null?void 0:n.isTracking)||!1),k((n==null?void 0:n.timeTracked)||0),O(!1),B(!1),W(!1);const ue=(Z=n==null?void 0:n.dueDate)!=null&&Z.toDate?n.dueDate.toDate():n==null?void 0:n.dueDate;if(ue){const me=new Date(ue.getTime()-ue.getTimezoneOffset()*6e4).toISOString().slice(0,16);_(me)}else _("")}},[n,t]),de.useEffect(()=>{let Z=null;return t&&N?Z=setInterval(()=>{var Se;const ue=new Date,me=((Se=n.lastStarted)==null?void 0:Se.toDate())||ue,we=(ue.getTime()-me.getTime())/1e3;k((n.timeTracked||0)+we)},1e3):k((n==null?void 0:n.timeTracked)||0),()=>clearInterval(Z)},[t,N,n==null?void 0:n.lastStarted,n==null?void 0:n.timeTracked]);const q=async()=>{var Z;if(n)if(S(!N),n.isTracking){const ue=new Date,me=((Z=n.lastStarted)==null?void 0:Z.toDate())||ue,we=Math.round((ue.getTime()-me.getTime())/1e3);await et.stopTimer(i,n.id,we)}else await et.startTimer(i,n.id)},V=async Z=>{g(Z),n&&await et.updateTask(i,n.id,{checklist:Z})},C=()=>{if(!p.trim())return;const Z={id:Date.now().toString(),text:p,completed:!1};V([...E,Z]),v("")},M=Z=>{const ue=E.map(me=>me.id===Z?{...me,completed:!me.completed}:me);V(ue)},U=Z=>{const ue=E.filter(me=>me.id!==Z);V(ue)},K=async Z=>{if(Z.preventDefault(),!s.trim())return;const ue={title:s,description:l,columnId:r,priority:d,coverImage:f,dueDate:w?new Date(w):null,checklist:E};n&&n.id?await et.updateTask(i,n.id,ue):await et.addTask(i,ue),e()},z=async()=>{!n||!o||(await et.moveTask(i,n.id,o,0),e())},j=async Z=>{if(Z.preventDefault(),!b.trim()||!(n!=null&&n.id))return;const ue={text:b,authorId:zi.currentUser.uid,authorEmail:zi.currentUser.email};try{await et.addComment(i,n.id,ue),I("")}catch(me){console.error("Failed to add comment:",me),alert("Error: Could not post your comment.")}},$=xM(n==null?void 0:n.dueDate),Y=E||[],X=Y.filter(Z=>Z.completed).length,ne=Y.length>0&&X===Y.length;return F.jsx(Op,{isOpen:t,onClose:e,children:F.jsxs("form",{onSubmit:K,className:"flex flex-col h-full",children:[F.jsxs("div",{className:"flex-shrink-0 p-6",children:[f&&F.jsxs("div",{className:"relative mb-6 -mx-6 -mt-6 group",children:[F.jsx("img",{src:f,alt:"Cover",className:"w-full h-48 object-cover rounded-t-lg"}),F.jsx("button",{type:"button",onClick:()=>O(!x),className:"absolute top-2 right-2 bg-black/50 text-white p-2 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:F.jsx(fw,{size:16})})]}),F.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[F.jsx("span",{className:`w-6 h-6 rounded-full flex-shrink-0 ${G[d]}`}),F.jsx("input",{type:"text",value:s,onChange:Z=>a(Z.target.value),className:"w-full bg-transparent text-3xl font-bold text-white border-none focus:ring-0 p-0",placeholder:"Task Title",required:!0})]}),F.jsxs("div",{className:"flex items-center flex-wrap gap-x-4 gap-y-2 text-sm text-gray-400",children:[H?F.jsxs("select",{value:d,onChange:Z=>h(Z.target.value),onBlur:()=>W(!1),autoFocus:!0,className:"bg-gray-700 border border-gray-600 rounded-lg px-3 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[F.jsx("option",{children:"Low"}),F.jsx("option",{children:"Medium"}),F.jsx("option",{children:"High"})]}):F.jsxs("button",{type:"button",onClick:()=>W(!0),className:"flex items-center space-x-2 p-1 rounded-md hover:bg-gray-700",children:[F.jsx(UO,{size:16}),F.jsxs("span",{children:[d," Priority"]})]}),L?F.jsx("input",{type:"datetime-local",value:w,onChange:Z=>_(Z.target.value),onBlur:()=>B(!1),autoFocus:!0,className:"bg-gray-700 border border-gray-600 rounded-lg px-3 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500"}):F.jsxs("button",{type:"button",onClick:()=>B(!0),className:`flex items-center space-x-2 p-1 rounded-md hover:bg-gray-700 ${$!=null&&$.isPast?"text-red-400":""}`,children:[F.jsx(kp,{size:16}),F.jsx("span",{children:$?$.text:"Set Due Date"})]}),n&&n.id&&F.jsxs("div",{className:"flex items-center space-x-2",children:[F.jsx(xO,{size:16}),F.jsx("span",{className:"font-mono",children:PM(y)})]}),n&&n.id&&F.jsxs("button",{type:"button",onClick:q,className:"flex items-center space-x-2 p-1 hover:bg-gray-700 rounded-full",children:[N?F.jsx(cw,{size:16,className:"text-yellow-400"}):F.jsx(hw,{size:16}),F.jsxs("span",{children:[N?"Pause":"Start"," Timer"]})]})]})]}),F.jsxs("div",{className:"flex-grow grid grid-cols-1 md:grid-cols-3 gap-8 px-6 overflow-y-auto custom-scrollbar",children:[F.jsxs("div",{className:"md:col-span-2",children:[x&&F.jsxs("div",{className:"mb-6",children:[F.jsxs("label",{className:"flex items-center space-x-2 text-sm font-medium text-gray-400 mb-2",children:[F.jsx(Zy,{size:16}),F.jsx("span",{children:"Cover Image URL"})]}),F.jsx("input",{type:"url",value:f,onChange:Z=>m(Z.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),F.jsxs("div",{className:"mb-6",children:[F.jsxs("label",{className:"flex items-center space-x-2 text-sm font-medium text-gray-400 mb-2",children:[F.jsx(IO,{size:16}),F.jsx("span",{children:"Description"})]}),F.jsx(kM,{theme:"snow",value:l,onChange:c,className:"bg-gray-700 rounded-lg"})]}),F.jsxs("div",{className:"mb-6",children:[F.jsxs("label",{className:"flex items-center space-x-2 text-sm font-medium text-gray-400 mb-2",children:[F.jsx(Ch,{size:16}),F.jsx("span",{children:"Checklist"})]}),E.length>0&&F.jsx("div",{className:"w-full bg-gray-900 rounded-full h-2 mb-3",children:F.jsx("div",{className:"bg-indigo-500 h-2 rounded-full",style:{width:`${X/E.length*100}%`}})}),F.jsx("div",{className:"space-y-2",children:E.map(Z=>F.jsxs("div",{className:"flex items-center justify-between bg-gray-700 p-2 rounded-md hover:bg-gray-600",children:[F.jsxs("div",{className:"flex items-center",children:[F.jsx("input",{type:"checkbox",checked:Z.completed,onChange:()=>M(Z.id),className:"w-4 h-4 text-indigo-600 bg-gray-900 border-gray-600 rounded focus:ring-indigo-500"}),F.jsx("span",{className:`ml-3 text-sm ${Z.completed?"line-through text-gray-500":"text-gray-300"}`,children:Z.text})]}),F.jsx("button",{type:"button",onClick:()=>U(Z.id),className:"text-gray-500 hover:text-red-500",children:F.jsx(xp,{size:16})})]},Z.id))}),F.jsxs("div",{className:"flex items-center mt-3",children:[F.jsx("input",{type:"text",value:p,onChange:Z=>v(Z.target.value),placeholder:"Add an item",className:"w-full bg-gray-700 border-gray-600 rounded-l-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500"}),F.jsx("button",{type:"button",onClick:C,className:"bg-indigo-600 hover:bg-indigo-700 text-white font-bold p-2 rounded-r-md",children:F.jsx(Pp,{size:20})})]})]})]}),F.jsxs("div",{className:"md:col-span-1 space-y-4",children:[n&&n.id&&ne&&n.columnId!==o&&F.jsxs("button",{type:"button",onClick:z,className:"w-full flex items-center justify-center space-x-2 bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg",children:[F.jsx(Ch,{size:16}),F.jsx("span",{children:"Mark as Complete"})]}),!f&&F.jsxs("button",{type:"button",onClick:()=>O(!0),className:"w-full flex items-center justify-center space-x-2 bg-gray-700 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg",children:[F.jsx(Zy,{size:16}),F.jsx("span",{children:"Add Cover"})]}),n&&n.id&&F.jsxs("div",{children:[F.jsxs("label",{className:"flex items-center space-x-2 text-sm font-medium text-gray-400 mb-2",children:[F.jsx(DO,{size:16}),F.jsx("span",{children:"Activity"})]}),F.jsxs("div",{className:"space-y-4",children:[F.jsxs("div",{className:"flex items-center space-x-2",children:[F.jsx("input",{type:"text",value:b,onChange:Z=>I(Z.target.value),onKeyDown:Z=>{Z.key==="Enter"&&j(Z)},placeholder:"Write a comment...",className:"w-full bg-gray-700 border-gray-600 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500"}),F.jsx("button",{type:"button",onClick:j,className:"p-2 bg-indigo-600 rounded-lg hover:bg-indigo-700",children:F.jsx(VO,{size:16})})]}),F.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto custom-scrollbar-thin",children:T.map(Z=>{var ue;return F.jsxs("div",{className:"text-sm",children:[F.jsx("p",{className:"font-semibold text-gray-300",children:Z.authorEmail}),F.jsx("p",{className:"text-gray-400",children:Z.text}),F.jsx("p",{className:"text-xs text-gray-500 mt-1",children:(ue=Z.createdAt)==null?void 0:ue.toDate().toLocaleString()})]},Z.id)})})]})]})]})]}),F.jsxs("div",{className:"flex-shrink-0 flex justify-end space-x-3 pt-4 mt-auto px-6 pb-6 border-t border-gray-700",children:[F.jsx("button",{type:"button",onClick:e,className:"bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded-lg",children:"Cancel"}),F.jsx("button",{type:"submit",className:"bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-lg",children:n&&n.id?"Save Changes":"Add Task"})]})]})})},OM=({column:t,tasks:e,userId:n,draggedTask:r,setDraggedTask:i,doneColumnId:o,onColumnDragStart:s,onColumnDragEnter:a,onColumnDrop:l,isColumnDragged:c})=>{const[d,h]=de.useState(!1),[f,m]=de.useState(!1),[w,_]=de.useState(null),E=["To Do","In Progress","Done"],g=(y=null)=>{_(y),m(!0)},p=async()=>{window.confirm(`Delete "${t.title}" and all its tasks?`)&&await et.deleteColumn(n,t.id,e)},v=async y=>{if(y.preventDefault(),h(!1),!r)return;const k=t.id;if(r.columnId===k){const S=[...y.currentTarget.querySelectorAll(".task-card")].findIndex(I=>{const x=I.getBoundingClientRect();return y.clientY<x.top+x.height/2}),T=[...e],[P]=T.splice(T.findIndex(I=>I.id===r.id),1);S===-1?T.push(P):T.splice(S,0,P);const b=T.map((I,x)=>({id:I.id,order:x}));await et.reorderTasks(n,b)}else{const S=(e||[]).length;await et.moveTask(n,r.id,k,S)}};return F.jsxs(F.Fragment,{children:[F.jsxs("div",{onDragEnter:a,onDragEnd:l,onDragOver:y=>y.preventDefault(),className:`flex-shrink-0 w-80 bg-gray-200 dark:bg-gray-800 rounded-lg flex flex-col max-h-[calc(100vh-10rem)] ${c?"opacity-50":""}`,children:[F.jsxs("div",{draggable:!0,onDragStart:s,className:"flex justify-between items-center p-4 flex-shrink-0 cursor-grab",children:[F.jsxs("div",{className:"flex items-center",children:[F.jsx(RO,{size:18,className:"mr-2 text-gray-500"}),F.jsx("h3",{className:"font-semibold text-lg",children:t.title})]}),!E.includes(t.title)&&F.jsx("button",{onClick:p,className:"text-gray-500 hover:text-red-500",children:F.jsx(xp,{size:16})})]}),F.jsx("div",{className:`task-list flex-grow space-y-3 px-4 overflow-y-auto transition-colors min-h-20 ${d?"bg-gray-700/50":""}`,onDrop:v,onDragOver:y=>{y.preventDefault(),h(!0)},onDragLeave:()=>h(!1),children:e.map(y=>F.jsx(KO,{task:y,setDraggedTask:i,onEdit:()=>g(y),userId:n,doneColumnId:o},y.id))}),F.jsx("div",{className:"px-4 pb-3 pt-2 flex-shrink-0",children:F.jsxs("button",{onClick:()=>g(),className:"text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white flex items-center space-x-2 transition-colors",children:[F.jsx(Pp,{size:16}),F.jsx("span",{className:"text-sm",children:"Add a card"})]})})]}),F.jsx(Pw,{isOpen:f,onClose:()=>m(!1),task:w,columnId:t.id,userId:n,doneColumnId:o})]})},RM=({columns:t,setColumns:e,tasks:n,userId:r,doneColumnId:i})=>{const[o,s]=de.useState(null),[a,l]=de.useState(null),[c,d]=de.useState(!1),[h,f]=de.useState(""),m=async g=>{if(g.preventDefault(),!!h.trim())try{await et.addColumn(r,h,t.length),f(""),d(!1)}catch(p){console.error("Failed to add column:",p),alert("Error: Could not add the new column.")}},w=(g,p)=>{l(p)},_=(g,p)=>{if(!a||a.id===p.id)return;const v=[...t],y=v.findIndex(S=>S.id===a.id),k=v.findIndex(S=>S.id===p.id),[N]=v.splice(y,1);v.splice(k,0,N),e(v)},E=async()=>{if(a)try{const g=t.map((p,v)=>({id:p.id,order:v}));await et.reorderColumns(r,g)}catch(g){console.error("Failed to reorder columns:",g)}finally{l(null)}};return F.jsxs(F.Fragment,{children:[F.jsxs("main",{className:"flex-1 flex items-start overflow-x-auto p-4 space-x-4 bg-gray-100 dark:bg-gray-900",children:[t&&t.map(g=>F.jsx(OM,{column:g,tasks:n[g.id]||[],userId:r,draggedTask:o,setDraggedTask:s,doneColumnId:i,onColumnDragStart:p=>w(p,g),onColumnDragEnter:p=>_(p,g),onColumnDrop:E,isColumnDragged:(a==null?void 0:a.id)===g.id},g.id)),F.jsx("div",{className:"flex-shrink-0 w-80",children:F.jsxs("button",{onClick:()=>d(!0),className:"w-full p-2 bg-black/10 dark:bg-white/10 hover:bg-black/20 dark:hover:bg-white/20 rounded-lg flex items-center text-gray-600 dark:text-gray-400 transition-colors",children:[F.jsx(Pp,{size:16,className:"mr-2"}),"Add another list"]})})]}),F.jsx(Op,{isOpen:c,onClose:()=>d(!1),title:"Add New Column",children:F.jsxs("form",{onSubmit:m,children:[F.jsx("input",{type:"text",value:h,onChange:g=>f(g.target.value),placeholder:"Enter list title...",className:"w-full bg-gray-200 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500",required:!0}),F.jsx("div",{className:"flex justify-end mt-4",children:F.jsx("button",{type:"submit",className:"bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-lg",children:"Add List"})})]})})]})},NM=({task:t,onTaskClick:e})=>{const n={High:"bg-red-500",Medium:"bg-yellow-500",Low:"bg-blue-500"},r=t.checklist||[],i=r.filter(a=>a.completed).length,o=r.length,s=o>0?i/o*100:0;return F.jsxs("div",{onClick:a=>e(a,t),className:"bg-gray-700 dark:bg-gray-700 p-2 rounded-md mb-2 cursor-pointer hover:bg-indigo-600 transition-colors group",children:[F.jsxs("div",{className:"flex items-center space-x-2",children:[F.jsx("span",{className:`w-2 h-2 rounded-full ${n[t.priority]||"bg-gray-400"}`}),F.jsx("p",{className:"text-xs text-white truncate group-hover:text-white",children:t.title})]}),o>0&&F.jsx("div",{className:"mt-2",children:F.jsx("div",{className:"w-full bg-gray-600 dark:bg-gray-600 rounded-full h-1",children:F.jsx("div",{className:`h-1 rounded-full ${s===100?"bg-green-500":"bg-indigo-400"}`,style:{width:`${s}%`}})})})]})},CM=({tasks:t,userId:e,columns:n})=>{const[r,i]=de.useState(new Date),[o,s]=de.useState(!1),[a,l]=de.useState(null),[c,d]=de.useState("All"),h=de.useMemo(()=>c==="All"?t:t.filter(P=>P.priority===c),[t,c]),f=(P,b)=>{P.stopPropagation(),l(b),s(!0)},m=P=>{const b=n.find(I=>I.title==="To Do");if(!b){alert("Could not find the 'To Do' column. Please create one if it was deleted.");return}l({dueDate:P,columnId:b.id}),s(!0)},w=new Date(r.getFullYear(),r.getMonth(),1),_=new Date(r.getFullYear(),r.getMonth()+1,0),E=w.getDay(),g=_.getDate(),p=h.reduce((P,b)=>{if(b.dueDate){const I=b.dueDate.toDate().toISOString().split("T")[0];P[I]||(P[I]=[]),P[I].push(b)}return P},{}),v=[];for(let P=0;P<E;P++)v.push(F.jsx("div",{className:"border-r border-b border-gray-200 dark:border-gray-700 bg-gray-100 dark:bg-gray-800"},`empty-start-${P}`));for(let P=1;P<=g;P++){const b=new Date(r.getFullYear(),r.getMonth(),P),I=b.getDay(),x=b.toISOString().split("T")[0],O=p[x]||[],L=new Date().toISOString().split("T")[0]===x,B=I===0||I===6;v.push(F.jsxs("div",{className:`border-r border-b border-gray-200 dark:border-gray-700 p-2 flex flex-col relative min-h-[120px] cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700/50 transition-colors ${B?"bg-gray-100 dark:bg-gray-800":""}`,onClick:()=>m(b),children:[F.jsx("span",{className:`font-bold text-sm mb-2 ${L?"text-indigo-500 dark:text-indigo-400":""}`,children:P}),F.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar-thin",children:O.map(H=>F.jsx(NM,{task:H,onTaskClick:f},H.id))})]},P))}const k=(7-(E+g)%7)%7;for(let P=0;P<k;P++){const b=(E+g+P)%7,I=b===0||b===6;v.push(F.jsx("div",{className:`border-r border-b border-gray-200 dark:border-gray-700 ${I?"bg-gray-100 dark:bg-gray-800":""}`},`empty-end-${P}`))}const N=()=>i(new Date(r.getFullYear(),r.getMonth()+1,1)),S=()=>i(new Date(r.getFullYear(),r.getMonth()-1,1)),T=()=>i(new Date);return F.jsxs(F.Fragment,{children:[F.jsxs("div",{className:"flex flex-col flex-grow p-4",children:[F.jsxs("div",{className:"flex items-center justify-between mb-4",children:[F.jsxs("div",{className:"flex items-center space-x-4",children:[F.jsx("h2",{className:"text-xl font-bold",children:r.toLocaleString("default",{month:"long",year:"numeric"})}),F.jsx("button",{onClick:T,className:"px-3 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-200 dark:hover:bg-gray-700",children:"Today"})]}),F.jsxs("div",{className:"flex items-center space-x-2",children:[F.jsxs("div",{className:"relative",children:[F.jsx(OO,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),F.jsxs("select",{value:c,onChange:P=>d(P.target.value),className:"pl-9 pr-4 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-200 dark:hover:bg-gray-700 bg-transparent focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[F.jsx("option",{value:"All",children:"All Priorities"}),F.jsx("option",{value:"High",children:"High"}),F.jsx("option",{value:"Medium",children:"Medium"}),F.jsx("option",{value:"Low",children:"Low"})]})]}),F.jsx("button",{onClick:S,className:"p-2 rounded-md hover:bg-gray-200 dark:hover:bg-gray-700",children:F.jsx(kO,{})}),F.jsx("button",{onClick:N,className:"p-2 rounded-md hover:bg-gray-200 dark:hover:bg-gray-700",children:F.jsx(PO,{})})]})]}),F.jsxs("div",{className:"grid grid-cols-7 flex-grow border-t border-l border-gray-200 dark:border-gray-700",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map((P,b)=>F.jsx("div",{className:`text-center font-semibold text-xs text-gray-500 dark:text-gray-400 p-2 border-r border-b border-gray-200 dark:border-gray-700 ${b===0||b===6?"bg-gray-100 dark:bg-gray-800":"bg-white dark:bg-gray-800/50"}`,children:P},P)),v]})]}),o&&F.jsx(Pw,{isOpen:o,onClose:()=>s(!1),task:a,columnId:a==null?void 0:a.columnId,userId:e})]})},DM=({user:t,theme:e,setTheme:n})=>{const[r,i]=de.useState([]),[o,s]=de.useState({}),[a,l]=de.useState(!0),[c,d]=de.useState("board"),[h,f]=de.useState(""),m=de.useRef(!1);de.useEffect(()=>{m.current||(et.initializeBoard(t.uid),m.current=!0);const g=et.onColumnsSnapshot(t.uid,v=>{i(v),l(!1)}),p=et.onTasksSnapshot(t.uid,v=>{for(const y in v)v[y].sort((k,N)=>k.order-N.order);s(v)});return()=>{g(),p()}},[t.uid]);const w=de.useMemo(()=>{if(!h)return o;const g=h.toLowerCase(),p={};for(const v in o)p[v]=o[v].filter(y=>y.title.toLowerCase().includes(g));return p},[o,h]);if(a)return F.jsx("div",{className:"bg-white dark:bg-gray-900 text-gray-900 dark:text-white h-screen flex items-center justify-center",children:F.jsx("p",{children:"Loading Board..."})});const _=Object.values(o).flat(),E=r.find(g=>g.title==="Done");return F.jsxs("div",{className:"bg-white dark:bg-gray-900 text-gray-900 dark:text-white h-screen flex flex-col font-sans",children:[F.jsx(zO,{user:t,currentView:c,setCurrentView:d,theme:e,setTheme:n,searchTerm:h,setSearchTerm:f}),c==="board"?F.jsx(RM,{columns:r,setColumns:i,tasks:w,userId:t.uid,doneColumnId:E==null?void 0:E.id}):F.jsx(CM,{tasks:_,userId:t.uid,columns:r})]})},LM=`
  /* Light Mode Quill Styles */
  .light .ql-editor { color: #111827; }
  .light .ql-toolbar { background-color: #f3f4f6; border-color: #d1d5db !important; }
  .light .ql-container { background-color: #f9fafb; border-color: #d1d5db !important; }
  .light .ql-toolbar .ql-stroke { stroke: #4b5563; }
  .light .ql-toolbar .ql-fill { fill: #4b5563; }
  .light .ql-toolbar .ql-picker-label { color: #4b5563; }

  /* Dark Mode Quill Styles */
  .dark .ql-editor { color: #e5e7eb; }
  .dark .ql-toolbar { background-color: #4b5563; border-color: #374151 !important; }
  .dark .ql-container { background-color: #374151; border-color: #374151 !important; }
  .dark .ql-toolbar .ql-stroke { stroke: #d1d5db; }
  .dark .ql-toolbar .ql-fill { fill: #d1d5db; }
  .dark .ql-toolbar .ql-picker-label { color: #d1d5db; }
`;function MM(){const[t,e]=de.useState(null),[n,r]=de.useState(!0),[i,o]=de.useState(localStorage.getItem("theme")||"dark");return de.useEffect(()=>{const s=window.document.documentElement;s.classList.remove(i==="dark"?"light":"dark"),s.classList.add(i),localStorage.setItem("theme",i)},[i]),de.useEffect(()=>{const s=to.onAuthChange(a=>{e(a),r(!1)});return()=>s()},[]),n?F.jsx("div",{className:"bg-white dark:bg-gray-900 h-screen flex items-center justify-center",children:F.jsx("p",{className:"text-gray-900 dark:text-white",children:"Loading..."})}):F.jsxs(F.Fragment,{children:[F.jsx("style",{children:LM}),F.jsx("div",{className:i,children:t?F.jsx(DM,{user:t,theme:i,setTheme:o}):F.jsx(EO,{})})]})}B0(document.getElementById("root")).render(F.jsx(de.StrictMode,{children:F.jsx(MM,{})}));
