import{r as l,a as Pe}from"./vendor-BECWLT86.js";import{i as Ie,g as Ee,a as Le,o as ze,s as Ae,c as Re,b as Oe,u as $e,q as ee,d as ue,e as $,f as te,h as se,j as R,k as W,l as qe,w as Y,m as Fe,n as Ue,p as G}from"./firebase-CK4evg2E.js";import{X as Be,U as _e,C as He,L as We,a as ae,S as Ye,b as Ge,M as Qe,R as Je,c as Ke,d as re,e as Ve,P as xe,f as he,g as pe,T as oe,h as Xe,i as Ze,I as ge,A as et,j as tt,k as ne,l as st,m as rt,G as at,F as ot,n as nt,o as lt}from"./ui-CBeWMhFO.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function s(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerPolicy&&(n.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?n.credentials="include":a.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(a){if(a.ep)return;a.ep=!0;const n=s(a);fetch(a.href,n)}})();var fe={exports:{}},Q={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var it=l,ct=Symbol.for("react.element"),dt=Symbol.for("react.fragment"),ut=Object.prototype.hasOwnProperty,gt=it.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,mt={key:!0,ref:!0,__self:!0,__source:!0};function be(t,o,s){var r,a={},n=null,i=null;s!==void 0&&(n=""+s),o.key!==void 0&&(n=""+o.key),o.ref!==void 0&&(i=o.ref);for(r in o)ut.call(o,r)&&!mt.hasOwnProperty(r)&&(a[r]=o[r]);if(t&&t.defaultProps)for(r in o=t.defaultProps,o)a[r]===void 0&&(a[r]=o[r]);return{$$typeof:ct,type:t,key:n,ref:i,props:a,_owner:gt.current}}Q.Fragment=dt;Q.jsx=be;Q.jsxs=be;fe.exports=Q;var e=fe.exports,ye,me=Pe;ye=me.createRoot,me.hydrateRoot;const xt={apiKey:"AIzaSyBGFHAw9HtFGd5AU6LuMRDN3GkJIZDR7eY",authDomain:"workflow-1e6ed.firebaseapp.com",projectId:"workflow-1e6ed",storageBucket:"workflow-1e6ed.appspot.com",messagingSenderId:"475146109664",appId:"1:475146109664:web:20debe12f06c666ff88685",measurementId:"G-BHZX95WXJJ"},je=Ie(xt),q=Ee(je),k=Le(je),F={onAuthChange:t=>ze(q,t),login:(t,o)=>Oe(q,t,o),register:(t,o)=>Re(q,t,o),logout:()=>Ae(q),updateUserProfile:(t,o)=>$e(t,o)},E=t=>`users/${t}`,w={initializeBoard:async t=>{const o=$(k,E(t),"columns");if((await Ue(o)).empty){const r=Y(k);[{title:"To Do",order:0},{title:"In Progress",order:1},{title:"Done",order:2}].forEach(n=>{const i=R(o);r.set(i,n)}),await r.commit()}},onColumnsSnapshot:(t,o)=>{const s=ee($(k,E(t),"columns"),ue("order"));return te(s,r=>{const a=r.docs.map(n=>({id:n.id,...n.data()}));o(a)})},onTasksSnapshot:(t,o)=>{const s=ee($(k,E(t),"tasks"));return te(s,r=>{const a={};r.docs.forEach(n=>{const i={id:n.id,...n.data()};a[i.columnId]||(a[i.columnId]=[]),a[i.columnId].push(i)}),o(a)})},addColumn:(t,o,s)=>{const r=$(k,E(t),"columns");return se(r,{title:o,order:s,createdAt:G()})},deleteColumn:(t,o,s)=>{const r=E(t),a=Y(k);return s.forEach(n=>a.delete(R(k,r,"tasks",n.id))),a.delete(R(k,r,"columns",o)),a.commit()},addTask:(t,o)=>{const s=$(k,E(t),"tasks"),r={...o,order:0,timeTracked:0,isTracking:!1,lastStarted:null,createdAt:G()};return se(s,r)},updateTask:(t,o,s)=>{const r=R(k,E(t),"tasks",o);return W(r,s)},deleteTask:(t,o)=>{const s=R(k,E(t),"tasks",o);return Fe(s)},moveTask:(t,o,s,r)=>{const a=R(k,E(t),"tasks",o);return W(a,{columnId:s,order:r})},reorderTasks:(t,o)=>{const s=Y(k);return o.forEach(r=>{const a=R(k,E(t),"tasks",r.id);s.update(a,{order:r.order})}),s.commit()},reorderColumns:(t,o)=>{const s=Y(k);return o.forEach(r=>{const a=R(k,E(t),"columns",r.id);s.update(a,{order:r.order})}),s.commit()},startTimer:(t,o)=>{const s=R(k,E(t),"tasks",o);return W(s,{isTracking:!0,lastStarted:G()})},stopTimer:(t,o,s)=>{const r=R(k,E(t),"tasks",o);return W(r,{isTracking:!1,lastStarted:null,timeTracked:qe(s)})},addComment:(t,o,s)=>{const r=$(k,E(t),"tasks",o,"comments");return se(r,{...s,createdAt:G()})},onCommentsSnapshot:(t,o,s)=>{const r=ee($(k,E(t),"tasks",o,"comments"),ue("createdAt","desc"));return te(r,a=>{const n=a.docs.map(i=>({id:i.id,...i.data()}));s(n)})}},ht=()=>{const[t,o]=l.useState(!0),[s,r]=l.useState(""),[a,n]=l.useState(""),[i,m]=l.useState(""),[N,j]=l.useState(""),b=async h=>{h.preventDefault(),j("");try{if(t)await F.login(s,a);else{const{user:y}=await F.register(s,a);await F.updateUserProfile(y,{displayName:i}),await w.createUserProfileDocument(y,{displayName:i})}}catch(y){j(y.message)}};return e.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center text-white",children:e.jsxs("div",{className:"w-full max-w-md p-8 space-y-8 bg-gray-800 rounded-lg shadow-lg",children:[e.jsx("h2",{className:"text-3xl font-bold text-center",children:t?"Login":"Sign Up"}),e.jsxs("form",{onSubmit:b,className:"space-y-6",children:[!t&&e.jsx("input",{type:"text",value:i,onChange:h=>m(h.target.value),placeholder:"Display Name",className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",required:!0}),e.jsx("input",{type:"email",value:s,onChange:h=>r(h.target.value),placeholder:"Email Address",className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",required:!0}),e.jsx("input",{type:"password",value:a,onChange:h=>n(h.target.value),placeholder:"Password",className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",required:!0}),N&&e.jsx("p",{className:"text-red-500 text-sm",children:N}),e.jsx("button",{type:"submit",className:"w-full py-2 px-4 bg-indigo-600 hover:bg-indigo-700 rounded-md font-semibold transition-colors",children:t?"Login":"Create Account"})]}),e.jsxs("p",{className:"text-center text-sm text-gray-400",children:[t?"Don't have an account?":"Already have an account?",e.jsx("button",{onClick:()=>o(!t),className:"ml-2 font-semibold text-indigo-400 hover:text-indigo-300",children:t?"Sign Up":"Login"})]})]})})},le=({isOpen:t,onClose:o,children:s})=>t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-5xl relative flex flex-col",style:{height:"90vh",maxHeight:"800px"},children:[e.jsx("button",{onClick:o,className:"absolute top-4 right-4 text-gray-400 hover:text-white z-20",children:e.jsx(Be,{size:24})}),s]})}):null,pt=({user:t,isOpen:o,onClose:s})=>{const[r,a]=l.useState(""),[n,i]=l.useState(""),[m,N]=l.useState(""),[j,b]=l.useState(""),[h,y]=l.useState(""),[T,M]=l.useState("");l.useEffect(()=>{t&&(a(t.displayName||""),i(t.photoURL||""),N("Alex"),b("Buchanan"),y("Product Manager"),M("Leading product strategy and development for innovative tech solutions."))},[t]);const I=async u=>{u.preventDefault();try{await F.updateUserProfile(t,{displayName:r,photoURL:n}),alert("Profile updated successfully!"),s()}catch(g){console.error("Error updating profile:",g),alert("Failed to update profile.")}};return e.jsx(le,{isOpen:o,onClose:s,children:e.jsxs("div",{className:"p-2",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"My Profile"}),e.jsxs("form",{onSubmit:I,children:[e.jsxs("div",{className:"flex items-center space-x-6 mb-8",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-24 h-24 bg-gray-700 rounded-full flex items-center justify-center",children:n?e.jsx("img",{src:n,alt:r,className:"w-full h-full rounded-full object-cover"}):e.jsx(_e,{size:48,className:"text-gray-500"})}),e.jsx("button",{type:"button",className:"absolute bottom-0 right-0 bg-indigo-600 p-2 rounded-full hover:bg-indigo-700",children:e.jsx(He,{size:16,className:"text-white"})})]}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Photo URL"}),e.jsx("input",{type:"url",value:n,onChange:u=>i(u.target.value),placeholder:"https://example.com/image.png",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"First Name"}),e.jsx("input",{type:"text",value:m,onChange:u=>N(u.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Last Name"}),e.jsx("input",{type:"text",value:j,onChange:u=>b(u.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Display Name"}),e.jsx("input",{type:"text",value:r,onChange:u=>a(u.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Position"}),e.jsx("input",{type:"text",value:h,onChange:u=>y(u.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Bio"}),e.jsx("textarea",{value:T,onChange:u=>M(u.target.value),rows:"3",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Skills"}),e.jsx("input",{type:"text",placeholder:"e.g., React, Node.js, UI/UX Design",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-700",children:[e.jsx("button",{type:"button",onClick:s,className:"bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded-lg",children:"Cancel"}),e.jsx("button",{type:"submit",className:"bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-lg",children:"Save Changes"})]})]})]})})},ft=({user:t,currentView:o,setCurrentView:s,theme:r,setTheme:a,searchTerm:n,setSearchTerm:i})=>{const[m,N]=l.useState(!1),j=h=>`p-2 rounded-md flex items-center space-x-2 text-sm transition-colors ${o===h?"bg-indigo-600 text-white":"bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600"}`,b=async()=>{window.confirm("Are you sure you want to reset all your data?")&&(await w.resetData(t.uid),alert("Your data has been reset."))};return e.jsxs(e.Fragment,{children:[e.jsxs("header",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700 flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"TaskFlow"}),e.jsxs("div",{className:"flex items-center space-x-1 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg",children:[e.jsxs("button",{onClick:()=>s("board"),className:j("board"),children:[e.jsx(We,{size:16}),e.jsx("span",{children:"Board"})]}),e.jsxs("button",{onClick:()=>s("calendar"),className:j("calendar"),children:[e.jsx(ae,{size:16}),e.jsx("span",{children:"Calendar"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Ye,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search tasks...",value:n,onChange:h=>i(h.target.value),className:"bg-gray-200 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg pl-10 pr-4 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500"})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-300 hidden md:block",children:t.email}),e.jsx("button",{onClick:()=>a(r==="dark"?"light":"dark"),className:"p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700",title:"Toggle Theme",children:r==="dark"?e.jsx(Ge,{size:20}):e.jsx(Qe,{size:20})}),e.jsx("button",{onClick:b,className:"p-2 rounded-lg bg-yellow-500 hover:bg-yellow-600 text-white",title:"Reset All Data",children:e.jsx(Je,{size:20})}),e.jsx("button",{onClick:()=>N(!0),className:"w-10 h-10 bg-gray-200 dark:bg-gray-700 rounded-full flex items-center justify-center hover:ring-2 hover:ring-indigo-500",children:t.photoURL?e.jsx("img",{src:t.photoURL,alt:t.displayName||"User",className:"w-full h-full rounded-full object-cover"}):e.jsx("span",{className:"font-bold text-lg",children:t.displayName?t.displayName.charAt(0).toUpperCase():t.email.charAt(0).toUpperCase()})}),e.jsx("button",{onClick:F.logout,className:"p-2 rounded-lg bg-red-600 hover:bg-red-700 text-white",title:"Logout",children:e.jsx(Ke,{size:20})})]})]}),e.jsx(pt,{user:t,isOpen:m,onClose:()=>N(!1)})]})},bt=t=>{(isNaN(t)||t<0)&&(t=0);const o=Math.floor(t/3600),s=Math.floor(t%3600/60),r=Math.floor(t%60);return[o,s,r].map(a=>a<10?"0"+a:a).join(":")},yt=t=>{if(!t||!t.toDate)return null;const o=new Date,r=t.toDate().getTime()-o.getTime();if(r<0)return{text:"Overdue",isPast:!0};const a=r/(1e3*60*60);if(a<24){const i=Math.floor(a),m=Math.floor((a-i)*60);return{text:`${i}h ${m}m left`,isPast:!1}}return{text:`${Math.ceil(r/(1e3*60*60*24))} days left`,isPast:!1}},jt=({task:t,setDraggedTask:o,onEdit:s,userId:r,doneColumnId:a})=>{const[n,i]=l.useState(t.timeTracked||0),m={Low:"bg-blue-600 text-blue-100",Medium:"bg-yellow-600 text-yellow-100",High:"bg-red-600 text-red-100"};l.useEffect(()=>{let d=null;return t.isTracking?d=setInterval(()=>{var S;const p=new Date,f=((S=t.lastStarted)==null?void 0:S.toDate())||p,P=(p.getTime()-f.getTime())/1e3;i((t.timeTracked||0)+P)},1e3):i(t.timeTracked||0),()=>clearInterval(d)},[t.isTracking,t.lastStarted,t.timeTracked]);const N=async d=>{var p;if(d.stopPropagation(),!!r)if(t.isTracking){const f=new Date,P=((p=t.lastStarted)==null?void 0:p.toDate())||f,S=(f.getTime()-P.getTime())/1e3;await w.stopTimer(r,t.id,S)}else await w.startTimer(r,t.id)},j=async d=>{d.stopPropagation(),a&&await w.moveTask(r,t.id,a,0)},b=yt(t.dueDate),h=t.checklist||[],y=h.filter(d=>d.completed).length,T=h.length,M=T>0&&y===T,I=t.columnId===a,u=async d=>{d.stopPropagation(),!(!r||!window.confirm("Delete this task?"))&&await w.deleteTask(r,t.id)},g=d=>{d.stopPropagation(),s()};return e.jsxs("div",{draggable:!0,onDragStart:()=>o(t),onClick:s,className:"task-card bg-white dark:bg-gray-700 rounded-lg shadow-md cursor-pointer hover:ring-2 hover:ring-indigo-500 group",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:t.coverImage||"https://developers.elementor.com/docs/assets/img/elementor-placeholder-image.png",alt:"Task cover",className:"w-full h-32 object-cover rounded-t-lg",onError:d=>{d.currentTarget.src="https://developers.elementor.com/docs/assets/img/elementor-placeholder-image.png"}}),b&&e.jsxs("span",{className:`absolute top-2 left-2 flex items-center space-x-1 text-xs px-2 py-1 rounded-full text-white ${b.isPast?"bg-red-600":"bg-black/50"}`,children:[e.jsx(ae,{size:14}),e.jsx("span",{children:b.text})]}),M&&e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-1 bg-green-500",title:"Checklist complete!"})]}),e.jsxs("div",{className:"p-3",children:[t.priority&&e.jsx("span",{className:`px-2 py-1 mb-2 inline-block text-xs font-semibold rounded-full ${m[t.priority]||"bg-gray-500"}`,children:t.priority}),e.jsx("p",{className:"font-semibold text-gray-800 dark:text-gray-200 mb-2",children:t.title}),e.jsxs("div",{className:"flex justify-between items-center text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center flex-wrap gap-2",children:[T>0&&e.jsxs("span",{className:`flex items-center space-x-1 text-xs px-2 py-1 rounded-md ${M?"bg-green-600 text-green-100":"bg-gray-300 dark:bg-gray-600"}`,children:[e.jsx(re,{size:14}),e.jsxs("span",{children:[y,"/",T]})]}),e.jsx("span",{className:"text-xs font-mono bg-gray-300 dark:bg-gray-600 px-2 py-1 rounded-md",children:bt(n)})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[!I&&e.jsx("button",{onClick:j,title:"Mark as complete",className:"p-1 hover:bg-green-600 rounded-full text-gray-500 dark:text-gray-400 hover:text-white",children:e.jsx(Ve,{size:16})}),e.jsx("button",{onClick:N,className:"p-1 hover:bg-gray-300 dark:hover:bg-gray-600 rounded-full",children:t.isTracking?e.jsx(xe,{size:16,className:"text-yellow-400"}):e.jsx(he,{size:16})}),e.jsxs("div",{className:"flex items-center space-x-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:g,className:"p-1 hover:bg-gray-300 dark:hover:bg-gray-600 rounded-full",children:e.jsx(pe,{size:14})}),e.jsx("button",{onClick:u,className:"p-1 hover:bg-gray-300 dark:hover:bg-gray-600 rounded-full",children:e.jsx(oe,{size:14})})]})]})]})]})]})},vt=t=>{t||(t=0);const o=Math.floor(t/3600);return t%=3600,[o,Math.floor(t/60),t%60].map(s=>s<10?"0"+s:s).join(":")},Nt=t=>{if(!t)return null;const o=new Date,s=t.toDate?t.toDate():new Date(t),r=s-o;if(r<0)return{text:"Overdue",isPast:!0};const a=r/36e5;return a<24?{text:`${Math.floor(a)}h ${Math.floor(a%1*60)}m left`,isPast:!1}:{text:`${Math.ceil(a/24)} days left`,isPast:!1}},ve=({isOpen:t,onClose:o,task:s,columnId:r,userId:a,doneColumnId:n})=>{const[i,m]=l.useState(""),[N,j]=l.useState(""),[b,h]=l.useState("Medium"),[y,T]=l.useState(""),[M,I]=l.useState(""),[u,g]=l.useState([]),[d,p]=l.useState(""),[f,P]=l.useState(0),[S,z]=l.useState(!1),[O,x]=l.useState([]),[v,D]=l.useState(""),[A,U]=l.useState(!1),[J,B]=l.useState(!1),[H,K]=l.useState(!1),Ne={High:"bg-red-500",Medium:"bg-yellow-500",Low:"bg-blue-500"};l.useEffect(()=>{if(t&&(s!=null&&s.id)){const c=w.onCommentsSnapshot(a,s.id,x);return()=>c()}},[t,s==null?void 0:s.id,a]),l.useEffect(()=>{var c;if(t){m(s?s.title:""),j(s&&s.description||""),h(s&&s.priority||"Medium"),T(s&&s.coverImage||""),g(s?s.checklist||[]:[]),z((s==null?void 0:s.isTracking)||!1),P((s==null?void 0:s.timeTracked)||0),U(!1),B(!1),K(!1);const C=(c=s==null?void 0:s.dueDate)!=null&&c.toDate?s.dueDate.toDate():s==null?void 0:s.dueDate;if(C){const L=new Date(C.getTime()-C.getTimezoneOffset()*6e4).toISOString().slice(0,16);I(L)}else I("")}},[s,t]),l.useEffect(()=>{let c=null;return t&&S?c=setInterval(()=>{var de;const C=new Date,L=((de=s.lastStarted)==null?void 0:de.toDate())||C,Z=(C.getTime()-L.getTime())/1e3;P((s.timeTracked||0)+Z)},1e3):P((s==null?void 0:s.timeTracked)||0),()=>clearInterval(c)},[t,S,s==null?void 0:s.lastStarted,s==null?void 0:s.timeTracked]);const we=async()=>{var c;if(s)if(z(!S),s.isTracking){const C=new Date,L=((c=s.lastStarted)==null?void 0:c.toDate())||C,Z=Math.round((C.getTime()-L.getTime())/1e3);await w.stopTimer(a,s.id,Z)}else await w.startTimer(a,s.id)},V=async c=>{g(c),s&&await w.updateTask(a,s.id,{checklist:c})},Ce=()=>{if(!d.trim())return;const c={id:Date.now().toString(),text:d,completed:!1};V([...u,c]),p("")},ke=c=>{const C=u.map(L=>L.id===c?{...L,completed:!L.completed}:L);V(C)},Te=c=>{const C=u.filter(L=>L.id!==c);V(C)},De=async c=>{if(c.preventDefault(),!i.trim())return;const C={title:i,description:N,columnId:r,priority:b,coverImage:y,dueDate:M?new Date(M):null,checklist:u};s&&s.id?await w.updateTask(a,s.id,C):await w.addTask(a,C),o()},Se=async()=>{!s||!n||(await w.moveTask(a,s.id,n,0),o())},ie=async c=>{if(c.preventDefault(),!v.trim()||!(s!=null&&s.id))return;const C={text:v,authorId:q.currentUser.uid,authorEmail:q.currentUser.email};try{await w.addComment(a,s.id,C),D("")}catch(L){console.error("Failed to add comment:",L),alert("Error: Could not post your comment.")}},_=Nt(s==null?void 0:s.dueDate),X=u||[],ce=X.filter(c=>c.completed).length,Me=X.length>0&&ce===X.length;return e.jsx(le,{isOpen:t,onClose:o,children:e.jsxs("form",{onSubmit:De,className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex-shrink-0 p-6",children:[y&&e.jsxs("div",{className:"relative mb-6 -mx-6 -mt-6 group",children:[e.jsx("img",{src:y,alt:"Cover",className:"w-full h-48 object-cover rounded-t-lg"}),e.jsx("button",{type:"button",onClick:()=>U(!A),className:"absolute top-2 right-2 bg-black/50 text-white p-2 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(pe,{size:16})})]}),e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("span",{className:`w-6 h-6 rounded-full flex-shrink-0 ${Ne[b]}`}),e.jsx("input",{type:"text",value:i,onChange:c=>m(c.target.value),className:"w-full bg-transparent text-3xl font-bold text-white border-none focus:ring-0 p-0",placeholder:"Task Title",required:!0})]}),e.jsxs("div",{className:"flex items-center flex-wrap gap-x-4 gap-y-2 text-sm text-gray-400",children:[H?e.jsxs("select",{value:b,onChange:c=>h(c.target.value),onBlur:()=>K(!1),autoFocus:!0,className:"bg-gray-700 border border-gray-600 rounded-lg px-3 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{children:"Low"}),e.jsx("option",{children:"Medium"}),e.jsx("option",{children:"High"})]}):e.jsxs("button",{type:"button",onClick:()=>K(!0),className:"flex items-center space-x-2 p-1 rounded-md hover:bg-gray-700",children:[e.jsx(Xe,{size:16}),e.jsxs("span",{children:[b," Priority"]})]}),J?e.jsx("input",{type:"datetime-local",value:M,onChange:c=>I(c.target.value),onBlur:()=>B(!1),autoFocus:!0,className:"bg-gray-700 border border-gray-600 rounded-lg px-3 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500"}):e.jsxs("button",{type:"button",onClick:()=>B(!0),className:`flex items-center space-x-2 p-1 rounded-md hover:bg-gray-700 ${_!=null&&_.isPast?"text-red-400":""}`,children:[e.jsx(ae,{size:16}),e.jsx("span",{children:_?_.text:"Set Due Date"})]}),s&&s.id&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ze,{size:16}),e.jsx("span",{className:"font-mono",children:vt(f)})]}),s&&s.id&&e.jsxs("button",{type:"button",onClick:we,className:"flex items-center space-x-2 p-1 hover:bg-gray-700 rounded-full",children:[S?e.jsx(xe,{size:16,className:"text-yellow-400"}):e.jsx(he,{size:16}),e.jsxs("span",{children:[S?"Pause":"Start"," Timer"]})]})]})]}),e.jsxs("div",{className:"flex-grow grid grid-cols-1 md:grid-cols-3 gap-8 px-6 overflow-y-auto custom-scrollbar",children:[e.jsxs("div",{className:"md:col-span-2",children:[A&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{className:"flex items-center space-x-2 text-sm font-medium text-gray-400 mb-2",children:[e.jsx(ge,{size:16}),e.jsx("span",{children:"Cover Image URL"})]}),e.jsx("input",{type:"url",value:y,onChange:c=>T(c.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{className:"flex items-center space-x-2 text-sm font-medium text-gray-400 mb-2",children:[e.jsx(et,{size:16}),e.jsx("span",{children:"Description"})]}),e.jsx(tt,{theme:"snow",value:N,onChange:j,className:"bg-gray-700 rounded-lg"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{className:"flex items-center space-x-2 text-sm font-medium text-gray-400 mb-2",children:[e.jsx(re,{size:16}),e.jsx("span",{children:"Checklist"})]}),u.length>0&&e.jsx("div",{className:"w-full bg-gray-900 rounded-full h-2 mb-3",children:e.jsx("div",{className:"bg-indigo-500 h-2 rounded-full",style:{width:`${ce/u.length*100}%`}})}),e.jsx("div",{className:"space-y-2",children:u.map(c=>e.jsxs("div",{className:"flex items-center justify-between bg-gray-700 p-2 rounded-md hover:bg-gray-600",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:c.completed,onChange:()=>ke(c.id),className:"w-4 h-4 text-indigo-600 bg-gray-900 border-gray-600 rounded focus:ring-indigo-500"}),e.jsx("span",{className:`ml-3 text-sm ${c.completed?"line-through text-gray-500":"text-gray-300"}`,children:c.text})]}),e.jsx("button",{type:"button",onClick:()=>Te(c.id),className:"text-gray-500 hover:text-red-500",children:e.jsx(oe,{size:16})})]},c.id))}),e.jsxs("div",{className:"flex items-center mt-3",children:[e.jsx("input",{type:"text",value:d,onChange:c=>p(c.target.value),placeholder:"Add an item",className:"w-full bg-gray-700 border-gray-600 rounded-l-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500"}),e.jsx("button",{type:"button",onClick:Ce,className:"bg-indigo-600 hover:bg-indigo-700 text-white font-bold p-2 rounded-r-md",children:e.jsx(ne,{size:20})})]})]})]}),e.jsxs("div",{className:"md:col-span-1 space-y-4",children:[s&&s.id&&Me&&s.columnId!==n&&e.jsxs("button",{type:"button",onClick:Se,className:"w-full flex items-center justify-center space-x-2 bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg",children:[e.jsx(re,{size:16}),e.jsx("span",{children:"Mark as Complete"})]}),!y&&e.jsxs("button",{type:"button",onClick:()=>U(!0),className:"w-full flex items-center justify-center space-x-2 bg-gray-700 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg",children:[e.jsx(ge,{size:16}),e.jsx("span",{children:"Add Cover"})]}),s&&s.id&&e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center space-x-2 text-sm font-medium text-gray-400 mb-2",children:[e.jsx(st,{size:16}),e.jsx("span",{children:"Activity"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"text",value:v,onChange:c=>D(c.target.value),onKeyDown:c=>{c.key==="Enter"&&ie(c)},placeholder:"Write a comment...",className:"w-full bg-gray-700 border-gray-600 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500"}),e.jsx("button",{type:"button",onClick:ie,className:"p-2 bg-indigo-600 rounded-lg hover:bg-indigo-700",children:e.jsx(rt,{size:16})})]}),e.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto custom-scrollbar-thin",children:O.map(c=>{var C;return e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-semibold text-gray-300",children:c.authorEmail}),e.jsx("p",{className:"text-gray-400",children:c.text}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:(C=c.createdAt)==null?void 0:C.toDate().toLocaleString()})]},c.id)})})]})]})]})]}),e.jsxs("div",{className:"flex-shrink-0 flex justify-end space-x-3 pt-4 mt-auto px-6 pb-6 border-t border-gray-700",children:[e.jsx("button",{type:"button",onClick:o,className:"bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded-lg",children:"Cancel"}),e.jsx("button",{type:"submit",className:"bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-lg",children:s&&s.id?"Save Changes":"Add Task"})]})]})})},wt=({column:t,tasks:o,userId:s,draggedTask:r,setDraggedTask:a,doneColumnId:n,onColumnDragStart:i,onColumnDragEnter:m,onColumnDrop:N,isColumnDragged:j})=>{const[b,h]=l.useState(!1),[y,T]=l.useState(!1),[M,I]=l.useState(null),u=["To Do","In Progress","Done"],g=(f=null)=>{I(f),T(!0)},d=async()=>{window.confirm(`Delete "${t.title}" and all its tasks?`)&&await w.deleteColumn(s,t.id,o)},p=async f=>{if(f.preventDefault(),h(!1),!r)return;const P=t.id;if(r.columnId===P){const z=[...f.currentTarget.querySelectorAll(".task-card")].findIndex(D=>{const A=D.getBoundingClientRect();return f.clientY<A.top+A.height/2}),O=[...o],[x]=O.splice(O.findIndex(D=>D.id===r.id),1);z===-1?O.push(x):O.splice(z,0,x);const v=O.map((D,A)=>({id:D.id,order:A}));await w.reorderTasks(s,v)}else{const z=(o||[]).length;await w.moveTask(s,r.id,P,z)}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{onDragEnter:m,onDragEnd:N,onDragOver:f=>f.preventDefault(),className:`flex-shrink-0 w-80 bg-gray-200 dark:bg-gray-800 rounded-lg flex flex-col max-h-[calc(100vh-10rem)] ${j?"opacity-50":""}`,children:[e.jsxs("div",{draggable:!0,onDragStart:i,className:"flex justify-between items-center p-4 flex-shrink-0 cursor-grab",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(at,{size:18,className:"mr-2 text-gray-500"}),e.jsx("h3",{className:"font-semibold text-lg",children:t.title})]}),!u.includes(t.title)&&e.jsx("button",{onClick:d,className:"text-gray-500 hover:text-red-500",children:e.jsx(oe,{size:16})})]}),e.jsx("div",{className:`task-list flex-grow space-y-3 px-4 overflow-y-auto transition-colors min-h-20 ${b?"bg-gray-700/50":""}`,onDrop:p,onDragOver:f=>{f.preventDefault(),h(!0)},onDragLeave:()=>h(!1),children:o.map(f=>e.jsx(jt,{task:f,setDraggedTask:a,onEdit:()=>g(f),userId:s,doneColumnId:n},f.id))}),e.jsx("div",{className:"px-4 pb-3 pt-2 flex-shrink-0",children:e.jsxs("button",{onClick:()=>g(),className:"text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white flex items-center space-x-2 transition-colors",children:[e.jsx(ne,{size:16}),e.jsx("span",{className:"text-sm",children:"Add a card"})]})})]}),e.jsx(ve,{isOpen:y,onClose:()=>T(!1),task:M,columnId:t.id,userId:s,doneColumnId:n})]})},Ct=({columns:t,setColumns:o,tasks:s,userId:r,doneColumnId:a})=>{const[n,i]=l.useState(null),[m,N]=l.useState(null),[j,b]=l.useState(!1),[h,y]=l.useState(""),T=async g=>{if(g.preventDefault(),!!h.trim())try{await w.addColumn(r,h,t.length),y(""),b(!1)}catch(d){console.error("Failed to add column:",d),alert("Error: Could not add the new column.")}},M=(g,d)=>{N(d)},I=(g,d)=>{if(!m||m.id===d.id)return;const p=[...t],f=p.findIndex(z=>z.id===m.id),P=p.findIndex(z=>z.id===d.id),[S]=p.splice(f,1);p.splice(P,0,S),o(p)},u=async()=>{if(m)try{const g=t.map((d,p)=>({id:d.id,order:p}));await w.reorderColumns(r,g)}catch(g){console.error("Failed to reorder columns:",g)}finally{N(null)}};return e.jsxs(e.Fragment,{children:[e.jsxs("main",{className:"flex-1 flex items-start overflow-x-auto p-4 space-x-4 bg-gray-100 dark:bg-gray-900",children:[t&&t.map(g=>e.jsx(wt,{column:g,tasks:s[g.id]||[],userId:r,draggedTask:n,setDraggedTask:i,doneColumnId:a,onColumnDragStart:d=>M(d,g),onColumnDragEnter:d=>I(d,g),onColumnDrop:u,isColumnDragged:(m==null?void 0:m.id)===g.id},g.id)),e.jsx("div",{className:"flex-shrink-0 w-80",children:e.jsxs("button",{onClick:()=>b(!0),className:"w-full p-2 bg-black/10 dark:bg-white/10 hover:bg-black/20 dark:hover:bg-white/20 rounded-lg flex items-center text-gray-600 dark:text-gray-400 transition-colors",children:[e.jsx(ne,{size:16,className:"mr-2"}),"Add another list"]})})]}),e.jsx(le,{isOpen:j,onClose:()=>b(!1),title:"Add New Column",children:e.jsxs("form",{onSubmit:T,children:[e.jsx("input",{type:"text",value:h,onChange:g=>y(g.target.value),placeholder:"Enter list title...",className:"w-full bg-gray-200 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500",required:!0}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx("button",{type:"submit",className:"bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-lg",children:"Add List"})})]})})]})},kt=({task:t,onTaskClick:o})=>{const s={High:"bg-red-500",Medium:"bg-yellow-500",Low:"bg-blue-500"},r=t.checklist||[],a=r.filter(m=>m.completed).length,n=r.length,i=n>0?a/n*100:0;return e.jsxs("div",{onClick:m=>o(m,t),className:"bg-gray-700 dark:bg-gray-700 p-2 rounded-md mb-2 cursor-pointer hover:bg-indigo-600 transition-colors group",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${s[t.priority]||"bg-gray-400"}`}),e.jsx("p",{className:"text-xs text-white truncate group-hover:text-white",children:t.title})]}),n>0&&e.jsx("div",{className:"mt-2",children:e.jsx("div",{className:"w-full bg-gray-600 dark:bg-gray-600 rounded-full h-1",children:e.jsx("div",{className:`h-1 rounded-full ${i===100?"bg-green-500":"bg-indigo-400"}`,style:{width:`${i}%`}})})})]})},Tt=({tasks:t,userId:o,columns:s})=>{const[r,a]=l.useState(new Date),[n,i]=l.useState(!1),[m,N]=l.useState(null),[j,b]=l.useState("All"),h=l.useMemo(()=>j==="All"?t:t.filter(x=>x.priority===j),[t,j]),y=(x,v)=>{x.stopPropagation(),N(v),i(!0)},T=x=>{const v=s.find(D=>D.title==="To Do");if(!v){alert("Could not find the 'To Do' column. Please create one if it was deleted.");return}N({dueDate:x,columnId:v.id}),i(!0)},M=new Date(r.getFullYear(),r.getMonth(),1),I=new Date(r.getFullYear(),r.getMonth()+1,0),u=M.getDay(),g=I.getDate(),d=h.reduce((x,v)=>{if(v.dueDate){const D=v.dueDate.toDate().toISOString().split("T")[0];x[D]||(x[D]=[]),x[D].push(v)}return x},{}),p=[];for(let x=0;x<u;x++)p.push(e.jsx("div",{className:"border-r border-b border-gray-200 dark:border-gray-700 bg-gray-100 dark:bg-gray-800"},`empty-start-${x}`));for(let x=1;x<=g;x++){const v=new Date(r.getFullYear(),r.getMonth(),x),D=v.getDay(),A=v.toISOString().split("T")[0],U=d[A]||[],J=new Date().toISOString().split("T")[0]===A,B=D===0||D===6;p.push(e.jsxs("div",{className:`border-r border-b border-gray-200 dark:border-gray-700 p-2 flex flex-col relative min-h-[120px] cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700/50 transition-colors ${B?"bg-gray-100 dark:bg-gray-800":""}`,onClick:()=>T(v),children:[e.jsx("span",{className:`font-bold text-sm mb-2 ${J?"text-indigo-500 dark:text-indigo-400":""}`,children:x}),e.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar-thin",children:U.map(H=>e.jsx(kt,{task:H,onTaskClick:y},H.id))})]},x))}const P=(7-(u+g)%7)%7;for(let x=0;x<P;x++){const v=(u+g+x)%7,D=v===0||v===6;p.push(e.jsx("div",{className:`border-r border-b border-gray-200 dark:border-gray-700 ${D?"bg-gray-100 dark:bg-gray-800":""}`},`empty-end-${x}`))}const S=()=>a(new Date(r.getFullYear(),r.getMonth()+1,1)),z=()=>a(new Date(r.getFullYear(),r.getMonth()-1,1)),O=()=>a(new Date);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col flex-grow p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:r.toLocaleString("default",{month:"long",year:"numeric"})}),e.jsx("button",{onClick:O,className:"px-3 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-200 dark:hover:bg-gray-700",children:"Today"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ot,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsxs("select",{value:j,onChange:x=>b(x.target.value),className:"pl-9 pr-4 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-200 dark:hover:bg-gray-700 bg-transparent focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"All",children:"All Priorities"}),e.jsx("option",{value:"High",children:"High"}),e.jsx("option",{value:"Medium",children:"Medium"}),e.jsx("option",{value:"Low",children:"Low"})]})]}),e.jsx("button",{onClick:z,className:"p-2 rounded-md hover:bg-gray-200 dark:hover:bg-gray-700",children:e.jsx(nt,{})}),e.jsx("button",{onClick:S,className:"p-2 rounded-md hover:bg-gray-200 dark:hover:bg-gray-700",children:e.jsx(lt,{})})]})]}),e.jsxs("div",{className:"grid grid-cols-7 flex-grow border-t border-l border-gray-200 dark:border-gray-700",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map((x,v)=>e.jsx("div",{className:`text-center font-semibold text-xs text-gray-500 dark:text-gray-400 p-2 border-r border-b border-gray-200 dark:border-gray-700 ${v===0||v===6?"bg-gray-100 dark:bg-gray-800":"bg-white dark:bg-gray-800/50"}`,children:x},x)),p]})]}),n&&e.jsx(ve,{isOpen:n,onClose:()=>i(!1),task:m,columnId:m==null?void 0:m.columnId,userId:o})]})},Dt=({user:t,theme:o,setTheme:s})=>{const[r,a]=l.useState([]),[n,i]=l.useState({}),[m,N]=l.useState(!0),[j,b]=l.useState("board"),[h,y]=l.useState(""),T=l.useRef(!1);l.useEffect(()=>{T.current||(w.initializeBoard(t.uid),T.current=!0);const g=w.onColumnsSnapshot(t.uid,p=>{a(p),N(!1)}),d=w.onTasksSnapshot(t.uid,p=>{for(const f in p)p[f].sort((P,S)=>P.order-S.order);i(p)});return()=>{g(),d()}},[t.uid]);const M=l.useMemo(()=>{if(!h)return n;const g=h.toLowerCase(),d={};for(const p in n)d[p]=n[p].filter(f=>f.title.toLowerCase().includes(g));return d},[n,h]);if(m)return e.jsx("div",{className:"bg-white dark:bg-gray-900 text-gray-900 dark:text-white h-screen flex items-center justify-center",children:e.jsx("p",{children:"Loading Board..."})});const I=Object.values(n).flat(),u=r.find(g=>g.title==="Done");return e.jsxs("div",{className:"bg-white dark:bg-gray-900 text-gray-900 dark:text-white h-screen flex flex-col font-sans",children:[e.jsx(ft,{user:t,currentView:j,setCurrentView:b,theme:o,setTheme:s,searchTerm:h,setSearchTerm:y}),j==="board"?e.jsx(Ct,{columns:r,setColumns:a,tasks:M,userId:t.uid,doneColumnId:u==null?void 0:u.id}):e.jsx(Tt,{tasks:I,userId:t.uid,columns:r})]})},St=`
  /* Light Mode Quill Styles */
  .light .ql-editor { color: #111827; }
  .light .ql-toolbar { background-color: #f3f4f6; border-color: #d1d5db !important; }
  .light .ql-container { background-color: #f9fafb; border-color: #d1d5db !important; }
  .light .ql-toolbar .ql-stroke { stroke: #4b5563; }
  .light .ql-toolbar .ql-fill { fill: #4b5563; }
  .light .ql-toolbar .ql-picker-label { color: #4b5563; }

  /* Dark Mode Quill Styles */
  .dark .ql-editor { color: #e5e7eb; }
  .dark .ql-toolbar { background-color: #4b5563; border-color: #374151 !important; }
  .dark .ql-container { background-color: #374151; border-color: #374151 !important; }
  .dark .ql-toolbar .ql-stroke { stroke: #d1d5db; }
  .dark .ql-toolbar .ql-fill { fill: #d1d5db; }
  .dark .ql-toolbar .ql-picker-label { color: #d1d5db; }
`;function Mt(){const[t,o]=l.useState(null),[s,r]=l.useState(!0),[a,n]=l.useState(localStorage.getItem("theme")||"dark");return l.useEffect(()=>{const i=window.document.documentElement;i.classList.remove(a==="dark"?"light":"dark"),i.classList.add(a),localStorage.setItem("theme",a)},[a]),l.useEffect(()=>{const i=F.onAuthChange(m=>{o(m),r(!1)});return()=>i()},[]),s?e.jsx("div",{className:"bg-white dark:bg-gray-900 h-screen flex items-center justify-center",children:e.jsx("p",{className:"text-gray-900 dark:text-white",children:"Loading..."})}):e.jsxs(e.Fragment,{children:[e.jsx("style",{children:St}),e.jsx("div",{className:a,children:t?e.jsx(Dt,{user:t,theme:a,setTheme:n}):e.jsx(ht,{})})]})}ye(document.getElementById("root")).render(e.jsx(l.StrictMode,{children:e.jsx(Mt,{})}));
